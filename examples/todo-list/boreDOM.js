var ae=async e=>{let t=new Map;for(let o=0;o<e.length;++o){let s=Array.from(fe("script[src]")).find(a=>((a.getAttribute("src")??"").split("/").pop()??"")===`${e[o]}.js`)?.getAttribute("src"),i=null;if(s)try{let l=await import(new URL(s,document.baseURI).href);for(let u of Object.keys(l)){i=l[u];break}t.set(e[o],i)}catch(a){console.error(`Unable to import "${s}"`,a)}}return t},le=async(e,t)=>{let r=t?.mirrorAttributes??!1,n=[],s=new Map,i=Array.from(fe("template[data-component]")).filter(a=>a instanceof HTMLElement);for(let a of i){let l="",u=[];for(let c in a.dataset)c==="component"?l=a.dataset[c]??"":r&&u.push([Ne(c),a.dataset[c]??""]);if(!l){console.error("Invalid <template> found: missing data-component",a);continue}if(ke(a)){let c=a.content.querySelector("script");if(c){let f=c.textContent;if(f&&f.trim().length>0)try{let d=new Blob([f],{type:"text/javascript"}),g=URL.createObjectURL(d),h=await import(g);URL.revokeObjectURL(g),c.remove();let m=null;if(h.default)m=h.default;else{let y=Object.keys(h);y.length>0&&(m=h[y[0]])}if(m){let y=e?e(m):m;s.set(l,y)}}catch{}}}pe(l,{attributes:u}),n.push(l)}return{names:n,inlineLogic:s}},V=(e,t)=>{let o=x(e);if(!B(o)){let r=`The tag name "${e}" is not a BoreDOM  component.
      
"createComponent" only accepts tag-names with matching <template> tags that have a data-component attribute in them.`;throw console.error(r),new Error(r)}return t&&(o.renderCallback=t),o},$e=e=>{let t=ce(e);if(!(t===null||!B(t)))return t},ce=e=>document.querySelector(e),fe=e=>document.querySelectorAll(e),x=(e,t)=>{let o=document.createElement(e);return t&&Array.isArray(t)&&t.length>0&&t.map(r=>o.appendChild(r)),o};var K=(e,t)=>{document.readyState==="loading"?addEventListener("DOMContentLoaded",()=>dispatchEvent(new CustomEvent(e,{detail:t}))):dispatchEvent(new CustomEvent(e,{detail:t}))};var ke=e=>e instanceof HTMLTemplateElement,ue=e=>typeof e=="object",ie=e=>typeof e=="function",B=e=>ue(e)&&"isBored"in e&&!!e.isBored;var Ne=e=>{if(e===""||!e.split("").some(o=>o!==o.toLowerCase()))return e;let t="";for(let o=0;o<e.length;o++){let r=e[o];r===r.toUpperCase()&&o!==0&&(t+="-"),t+=r.toLowerCase()}return t},de=e=>e.startsWith("on"),He=e=>e.startsWith("queriedOn"),se=e=>de(e)?e.slice(2).toLowerCase():e.slice(9).toLowerCase(),J=class extends HTMLElement{},pe=(e,t={})=>{customElements.get(e)||customElements.define(e,class extends J{static get observedAttributes(){return typeof t.attributeChangedCallback=="object"?Object.keys(t.attributeChangedCallback):[]}constructor(){super()}isBored=!0;traverse(r,{traverseShadowRoot:n,query:s}={}){Array.from(n?this.shadowRoot?.querySelectorAll(s??"*")??[]:[]).concat(Array.from(this.querySelectorAll(s??"*"))).filter(i=>i instanceof HTMLElement).forEach(r)}#t(r){return r.split("'").filter(n=>n.length>2&&!(n.includes("(")||n.includes(",")||n.includes(")")))}#n(r){return r.split(/[\s,]+/g).map(n=>n.trim()).filter(Boolean)}#e(r){let n=r.trim();return n.length===0?[]:n.includes("dispatch(")||n.includes("'")?this.#t(r):this.#n(r)}#r(){let r;this.traverse(n=>{if(n instanceof HTMLElement){customElements.get(n.tagName.toLowerCase())&&(r=n);for(let i=0;i<n.attributes.length;i++){let a=n.attributes[i],l=a.name,u=(c,f)=>{f.length!==0&&f.forEach(d=>{n.addEventListener(c,g=>K(d,{event:g,dispatcher:n,component:this,index:this.parentElement?Array.from(this.parentElement.children).indexOf(this):-1}))})};if(l.startsWith("on-")){let c=l.slice(3),f=this.#e(a.value);u(c,f),n.removeAttribute(l);continue}if(l==="data-dispatch"||l.startsWith("data-dispatch-")){let c=l==="data-dispatch"?"click":l.slice(14),f=this.#e(a.value);u(c,f),n.removeAttribute(l);continue}}}},{traverseShadowRoot:!0})}isInitialized=!1;#o(){let r=ce(`[data-component="${e}"]`)??x("template"),n=null;if(!1){let i=t.shadowrootmode??n??"open",a=this.attachShadow({mode:i});if(t.style){let l=x("style");l.textContent=t.style,a.appendChild(l)}if(t.shadow){let l=x("template");l.innerHTML=t.shadow,a.appendChild(l.content.cloneNode(!0))}else n&&a.appendChild(r.content.cloneNode(!0))}r&&!n&&this.appendChild(r.content.cloneNode(!0)),t.onSlotChange&&this.traverse(i=>{i instanceof HTMLSlotElement&&i.addEventListener("slotchange",a=>t.onSlotChange?.(a))},{traverseShadowRoot:!0}),ie(t.onClick)&&this.addEventListener("click",t.onClick);for(let[i,a]of Object.entries(t))if(de(i)){if(!ie(a))continue;this.addEventListener(se(i),a)}else if(He(i))continue;t.attributes&&Array.isArray(t.attributes)&&t.attributes.map(([i,a])=>this.setAttribute(i,a)),this.#r(),this.isInitialized=!0}renderCallback=r=>{};connectedCallback(){this.isInitialized||this.#o(),this.renderCallback(this),t.connectedCallback?.(this)}disconnectedCallback(){t.disconnectedCallback?.(this)}adoptedCallback(){t.adoptedCallback?.(this)}attributeChangedCallback(r,n,s){t.attributeChangedCallback&&t.attributeChangedCallback[r]({element:this,name:r,oldValue:n,newValue:s})}})},Q=e=>{pe(e,{})};function $(e,t){let o=t;return t===null||e.forEach(r=>{o=o[r]}),o}function k(e,t=[]){let o=[{path:[],obj:e}],r=[],n=new WeakSet;for(;o.length>0;){let{path:s,obj:i}=o.pop();if(!n.has(i)){n.add(i);for(let a in i){if(t.includes(a))continue;let l=i[a],u=s.concat(a);typeof l=="object"&&l!==null&&!n.has(l)&&o.push({path:u,obj:l}),r.push({path:u,value:l})}}}return r}function A(e){if(e==null||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);return t==null?!0:t===Object.prototype}var Ie=e=>{let t={};for(let[o,r]of Object.entries(e.dataset))o.startsWith("prop")||r!==void 0&&(t[o]=r);return t};function me(e,t,o){return(r,n)=>{addEventListener(r,s=>{let i=s?.detail?.event.currentTarget,a;for(;i;){if(i===e){try{let l=n({state:t,e:s.detail,detail:o});Promise.resolve(l).catch(u=>{console.error(`Error in async handler for "${r}" event`,u)})}catch(l){console.error(`Error in handler for "${r}" event`,l)}return}i instanceof HTMLElement?i=i.parentElement:i=void 0}})}}function ge(e){return new Proxy({},{get(t,o,r){let n=new Error(`Ref "${String(o)}" not found in <${e.tagName}>`);if(typeof o=="string"){let s=e.querySelectorAll(`[data-ref="${o}"]`);if(!s)throw n;let i=Array.from(s).filter(a=>a instanceof HTMLElement);if(i.length===0)throw n;return i.length===1?i[0]:i}}})}function ye(e){return new Proxy({},{get(t,o,r){let n=new Error(`Slot "${String(o)}" not found in <${e.tagName}>`);if(typeof o=="string"){let s=e.querySelectorAll(`slot[name="${o}"]`);if(!s)throw n;let i=Array.from(s).filter(a=>a instanceof HTMLSlotElement);if(i.length===0)throw n;return i.length===1?i[0]:i}},set(t,o,r){if(typeof o!="string")return!1;let n=r;if(r instanceof HTMLElement)r.setAttribute("data-slot",o);else if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")n=x("span"),n.setAttribute("data-slot",o),n.innerText=String(r);else throw new Error(`Invalid value for slot ${o} in <${e.tagName}>`);let s=Array.from(e.querySelectorAll(`[data-slot="${o}"]`));return s.length>0?s.forEach(i=>i.parentElement?.replaceChild(n,i)):Array.from(e.querySelectorAll(`slot[name="${o}"]`)).forEach(a=>a.parentElement?.replaceChild(n,a)),!0}})}function N(e,t,o=!1,r){let n=r||{targets:new WeakMap,path:[]};if(e!==void 0)return new Proxy(e,{set(s,i,a){return o?Reflect.set(s,i,a):(typeof i=="string"&&console.error(`State is read-only for web components. Unable to set '${i}'.`),!1)},get(s,i,a){let l=Reflect.get(s,i,a),u=i==="__proto__";if(typeof i=="string"&&!u){n.targets.has(s)||n.targets.set(s,n.path.join("."));let f=n.targets.get(s);n.path.length=0,typeof f=="string"&&f!==""&&n.path.push(...f.split(".")),n.path.push(i)}if(u||Array.isArray(l)||A(l))return!n.targets.has(l)&&typeof i=="string"&&n.targets.set(l,n.path.join(".")),N(l,t,o,n);let c=n.targets.get(s)??"";return typeof c=="string"&&typeof i=="string"&&(Array.isArray(s)||(c+=c!==""?`.${i}`:i),t.indexOf(c)===-1&&t.push(c)),n.path.length=0,n.path.push(c),l}})}function Re(e){return()=>{let t=e.internal.updates,o=new Set,r=n=>{if(n)for(let s=0;s<n.length;s++){let i=n[s];if(!o.has(i)){o.add(i);try{i(e.app)}catch{}}}};for(let n=0;n<t.path.length;n++){let s=t.path[n],i=s.slice(s.indexOf(".")+1);r(t.subscribers.get(i));for(let[a,l]of t.subscribers.entries()){if(a===i)continue;let u=`${a}.`,c=`${i}.`;(i.startsWith(u)||a.startsWith(c))&&r(l)}}t.path=[],t.value=[],t.raf=void 0}}function he(e){let t=e.internal,o=e;if(o===void 0)return e;let r=new WeakSet,n=Symbol("boredom-proxy");function s(a,l){if(r.has(a))return a;let u=new Proxy(a,{get(c,f,d){return f===n?!0:Reflect.get(c,f,d)},set(c,f,d){if(!(c[f]!==d))return!0;if(typeof f=="string"){let h=Array.isArray(a)?l:`${l}.${f}`;!(d&&d[n]===!0)&&(Array.isArray(d)||A(d))&&(d=i(d,h))}return Reflect.set(c,f,d),typeof f!="string"||(Array.isArray(a)?t.updates.path.push(`${l}`):t.updates.path.push(`${l}.${f}`),t.updates.value.push(c),t.updates.raf||(t.updates.raf=requestAnimationFrame(Re(e)))),!0}});return r.add(a),r.add(u),u}function i(a,l){if(!Array.isArray(a)&&!A(a)||r.has(a)||a&&a[n]===!0)return a;if(Array.isArray(a))for(let u=0;u<a.length;u++){let c=a[u];(Array.isArray(c)||A(c))&&(a[u]=i(c,l))}else for(let u of Object.keys(a)){let c=a[u];(Array.isArray(c)||A(c))&&(a[u]=i(c,`${l}.${u}`))}return s(a,l)}return k(e,["internal"]).forEach(({path:a,value:l})=>{if(Array.isArray(l)||A(l)&&!r.has(l)){let c=a.join("."),f=$(a.slice(0,-1),o);if(f===l)return;f[a.at(-1)]=s(l,c)}}),e}function be(e){let t=e.internal.customTags.filter(r=>document.querySelector(r)!==null),o=e.internal.components;for(let[r,n]of o.entries()){if(n===null||!t.includes(r))continue;let s=Array.from(document.querySelectorAll(r)).filter(i=>B(i));s.length!==0&&s.forEach((i,a)=>{if(i.isBoredInitialized)return;let l={index:a,name:r,data:Ie(i)};n(e,l)(i),i.__boreDOMDetail=l,i.isBoredInitialized=!0})}}function H(e,t,o){let r=t.internal.components.get(e);if(r){let n={...o,tagName:e};n.data||(n.data={});let s=V(e,r(t,n));return s.__boreDOMDetail=n,s}return V(e)}var D={console:!0,globals:!0,errorBoundary:!0,visualIndicators:!0,errorHistory:!0,versionLog:!0,api:!0,methodMissing:!0,templateInference:!0,strict:!1,outputFormat:"human",llm:!0},I=new Map,R=null;function p(e){return e==="errorBoundary"?D.errorBoundary??!0:!1}function U(e){if(typeof e=="boolean"){let t=e;D={console:t,globals:t,errorBoundary:!0,visualIndicators:t,errorHistory:t,versionLog:t,api:t,methodMissing:t,templateInference:t,strict:!1,outputFormat:"human",llm:t}}else D={...D,...e}}function Ee(){return{...D}}function Ue(){}function _e(e,t){console.error(`[boreDOM] Render error in <${e}>: ${t.message}`)}function X(e){e.removeAttribute("data-boredom-error")}function je(e){let t=e?I.get(e):R;if(!t)return null;try{return{component:t.component,state:JSON.parse(JSON.stringify(t.state)),timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}catch(o){return p("console")&&console.warn(`[boreDOM] exportState: Unable to serialize state for <${t.component}>:`,o instanceof Error?o.message:o),{component:t.component,state:"[Unable to serialize - contains circular references or functions]",timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}}var C={get errors(){return I},get lastError(){return R},rerender(e){let t=e?I.get(e):R;t?t.rerender():console.warn("[boreDOM] No error context found to rerender")},clearError(e){let t=e?I.get(e):R;t?(X(t.element),void 0):p("console")&&console.warn(e?`[boreDOM] clearError: No error found for <${e}>`:"[boreDOM] clearError: No error to clear")},export:je,get config(){return Ee()}};var j=Symbol("boreDOM.webComponent"),O=null,Y=null,Z=null,Fe=new WeakMap;function Se(e,t,o){O=e,t&&(Y=t),o&&(Z=o)}function F(){return O}function Pe(e){return typeof e=="function"&&e[j]===!0}function Me(e,t,o){return console.warn("[boreDOM] define() is not available in production build"),!1}function Ge(e,t){if(!O)return;let o=Array.from(document.querySelectorAll(e)),r={count:0};o.forEach((n,s)=>{if(n instanceof HTMLElement&&"renderCallback"in n)try{let a=t(O,{index:s,name:e,data:void 0});n.renderCallback=a,a(n)}catch(i){r.count++,p("console")&&console.error(`[boreDOM] Failed to initialize <${e}> instance ${s}:`,i)}}),r.count>0&&p("console")&&console.warn(`[boreDOM] ${r.count} of ${o.length} <${e}> instances failed to initialize`)}function we(e,t=0){console.warn("[boreDOM] operate() is not available in production build")}function We(e){return console.warn("[boreDOM] exportComponent() is not available in production build"),null}var P={define:Me,operate:we,exportComponent:We};var L=new Map,G=new Map,ee=null,qe=new Map;function Ce(e,t,o){return{}}function ze(e,t){}function Je(e){L.delete(e)}function Ve(){G.clear(),ee=null}function Ke(e){p("console")&&(console.log("%c\u26A0\uFE0F boreDOM: Missing function %c%s%c in <%s>","color: #f39c12; font-weight: bold","color: #9b59b6; font-weight: bold",e.name,"color: #f39c12",e.component),e.args.length>0&&console.log("   Arguments:",e.args),console.log("%c\u{1F4A1} Define it:","color: #3498db; font-weight: bold"),console.log(`   $defineMissing((${Ae(e.args)}) => { ... })`),console.log(`   boreDOM.defineHelper('${e.name}', (${Ae(e.args)}) => { ... })`))}function Ae(e){return e.length===0?"":e.map((t,o)=>t==null?`arg${o}`:Array.isArray(t)?"items":typeof t=="object"?"name"in t&&"email"in t?"user":"id"in t&&"title"in t?"item":"id"in t?"record":"data":typeof t=="string"?"text":typeof t=="number"?"count":typeof t=="boolean"?"flag":`arg${o}`).join(", ")}function Qe(e){if(!p("errorHistory"))return;let t=G.get(e.name)||[];t.length>=10&&t.shift(),t.push(e),G.set(e.name,t),ee=e}function Xe(e){if(!p("globals")||typeof window>"u")return;let t=window;t.$missingName=e.name,t.$missingArgs=e.args,t.$missingComponent=e.component,t.$defineMissing=e.define}function Ye(e,t){return null}function Ze(e){return e.replace(/-([a-z])/g,(t,o)=>o.toUpperCase())}function et(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function tt(e){if(e==="true")return!0;if(e==="false")return!1;let t=Number(e);if(!isNaN(t)&&e!=="")return t;if(e.startsWith("{")||e.startsWith("["))try{return JSON.parse(e)}catch{return e}return e}function nt(e){return e==null?"":typeof e=="object"?JSON.stringify(e):String(e)}var _={get missingFunctions(){return G},get lastMissing(){return ee},defineHelper:ze,get helpers(){return new Map(L)},clearHelper:Je,clearMissingFunctions:Ve,get inferredTemplates(){return qe},inferTemplate:Ye};var rt=new Set(["script","style","noscript","template","link","meta","head","title"]),ot=new Set(["id","class","type","value","checked","disabled","placeholder","href","src","alt","title","role"]);function it(e){return!(e.hasAttribute("hidden")||e.style.display==="none"||e.style.visibility==="hidden"||e.getAttribute("aria-hidden")==="true")}function te(e){if(!(e instanceof HTMLElement))return null;let t=e.tagName.toLowerCase();if(rt.has(t)||!it(e))return null;let o={tagName:t},r={},n=!1;for(let a of Array.from(e.attributes)){let l=a.name;(ot.has(l)||l.startsWith("aria-")||l.startsWith("data-"))&&(l==="checked"||l==="disabled"?r[l]=e[l]:l==="value"&&(t==="input"||t==="textarea"||t==="select")?r[l]=e.value:r[l]=a.value,n=!0)}n&&(o.attributes=r);let s="";for(let a of Array.from(e.childNodes))if(a.nodeType===Node.TEXT_NODE){let l=a.nodeValue?.trim();l&&(s+=l+" ")}s=s.trim(),s&&(o.text=s);let i=[];for(let a of Array.from(e.children)){let l=te(a);l&&i.push(l)}return i.length>0&&(o.children=i),t==="div"&&!n&&!s&&i.length===0?null:o}function De(e,t){let o=[];try{for(let r of t){let n=xe(e,r);n&&o.push(n)}return{success:!0}}catch(r){for(let n=o.length-1;n>=0;n--)try{xe(e,o[n])}catch(s){console.error("Critical: Rollback failed",s)}return{success:!1,error:r.message||String(r)}}}function Oe(e,t){if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null||Array.isArray(e)!==Array.isArray(t))return!1;let o=Object.keys(e),r=Object.keys(t);if(o.length!==r.length)return!1;for(let n of o)if(!r.includes(n)||!Oe(e[n],t[n]))return!1;return!0}function st(e){return e===""?[]:e==="/"?[""]:e.split("/").slice(1).map(t=>t.replace(/~1/g,"/").replace(/~0/g,"~"))}function xe(e,t){let o=st(t.path);if(o.length===0)throw new Error("Cannot operate on root state directly");let r=o.pop(),n=e;for(let s of o){if(n==null)throw new Error(`Path not found: ${t.path}`);if(Array.isArray(n)){let i=parseInt(s,10);if(isNaN(i))throw new Error(`Invalid array index: ${s}`);n=n[i]}else n=n[s]}if(n==null)throw new Error(`Path not found: ${t.path}`);if(t.op==="test"){let s;if(Array.isArray(n))if(r==="-")s=void 0;else{let i=parseInt(r,10);isNaN(i)||i<0||i>=n.length?s=void 0:s=n[i]}else s=n[r];if(!Oe(s,t.value))throw new Error(`Test failed at ${t.path}: expected ${JSON.stringify(t.value)}, got ${JSON.stringify(s)}`);return null}if(Array.isArray(n)){if(r==="-"){if(t.op==="add")return n.push(t.value),{op:"remove",path:t.path.replace(/-$/,(n.length-1).toString())};throw new Error("Can only add to '-' index")}let s=parseInt(r,10);if(isNaN(s)||s<0)throw new Error(`Invalid array index: ${r}`);if(t.op==="add"){if(s>n.length)throw new Error("Index out of bounds");return n.splice(s,0,t.value),{op:"remove",path:t.path}}else if(t.op==="remove"){if(s>=n.length)throw new Error("Index out of bounds");let i=n[s];return n.splice(s,1),{op:"add",path:t.path,value:i}}else if(t.op==="replace"){if(s>=n.length)throw new Error("Index out of bounds");let i=n[s];return n[s]=t.value,{op:"replace",path:t.path,value:i}}}else if(t.op==="add"){let s=n[r],i=Object.prototype.hasOwnProperty.call(n,r);return n[r]=t.value,i?{op:"replace",path:t.path,value:s}:{op:"remove",path:t.path}}else if(t.op==="replace"){if(!Object.prototype.hasOwnProperty.call(n,r))throw new Error(`Path not found: ${t.path}`);let s=n[r];return n[r]=t.value,{op:"replace",path:t.path,value:s}}else if(t.op==="remove"){if(!Object.prototype.hasOwnProperty.call(n,r))throw new Error(`Path not found: ${t.path}`);let s=n[r];return delete n[r],{op:"add",path:t.path,value:s}}return null}var v="0.25.25";var ne=!0,at=e=>te(e||document.body),lt=e=>{let t=F();return!t||!t.app?{success:!1,error:"No app state found"}:De(t.app,e)},Le={vision:ne?at:()=>null,transact:ne?lt:()=>({success:!1,error:"Production mode"}),compact:ne?()=>{let e=F();if(!e||!e.app)return null;let t=e.app,o=k(t).map(s=>s.path.join(".")),r={};Object.entries(t).forEach(([s,i])=>{Array.isArray(i)?r[s]=`[${i.length}]`:i&&typeof i=="object"?r[s]="{...}":r[s]=i});let n=Array.from(e.internal.components.entries()).map(([s,i])=>({tag:s,hasLogic:!!i}));return{framework:{name:"boreDOM",version:v},state:{paths:o,sample:r},components:n}}:()=>null};var ct=e=>e.replace(/-([a-z])/g,(t,o)=>o.toUpperCase()),ft=e=>e.replace(/\[(\d+)\]/g,".$1").replace(/^\./,"").split(".").filter(Boolean),T=(e,t)=>{if(e==null)return;let o=ft(t);return o.length===0?e:$(o,e)},S=(e,t)=>{let o=e.trim();if(o)return o==="index"||o==="i"?t.index:o==="item"?t.item:o==="detail"?t.detail:o==="self"?t.self:o.startsWith("state.")?T(t.state,o.slice(6)):o.startsWith("item.")?T(t.item,o.slice(5)):o.startsWith("detail.")?T(t.detail,o.slice(7)):o.startsWith("self.")?T(t.self,o.slice(5)):T(t.state,o)},W=e=>{let t=[];if(e instanceof DocumentFragment){let o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;o.nextNode();)t.push(o.currentNode);return t}return t.push(e),e.traverse(o=>{t.push(o)},{traverseShadowRoot:!0}),t},ut=e=>{let t=e.getAttribute("data-class-base");if(t!==null)return t;let o=e.className;return e.setAttribute("data-class-base",o),o},dt=(e,t,o)=>{let r=ut(e);if(t.includes(":")){let s=[];t.split(",").forEach(a=>{let[l,u]=a.split(":").map(c=>c.trim());!l||!u||S(u,o)&&s.push(l)});let i=[r,...s].filter(Boolean).join(" ").trim();e.className=i;return}let n=S(t,o);if(typeof n=="string")e.className=[r,n].filter(Boolean).join(" ").trim();else if(Array.isArray(n))e.className=[r,n.join(" ")].filter(Boolean).join(" ").trim();else if(n&&typeof n=="object"){let s=Object.entries(n).filter(([,i])=>!!i).map(([i])=>i);e.className=[r,...s].filter(Boolean).join(" ").trim()}else e.className=r.trim()},ve=(e,t)=>{let o=t.item===void 0;e.forEach(r=>{if(r instanceof HTMLTemplateElement||o&&r.closest("[data-list-item]"))return;let n=r.getAttribute("data-text");if(n){let c=S(n,t);r.textContent=c==null?"":String(c)}let s=r.getAttribute("data-show");s&&(r.hidden=!S(s,t));let i=r.getAttribute("data-class");i&&dt(r,i,t);let a=r.getAttribute("data-value");if(a&&"value"in r){let c=S(a,t);r.value=c==null?"":String(c)}let l=r.getAttribute("data-checked");if(l&&"checked"in r){let c=S(l,t);r.checked=!!c}let u=Array.from(r.attributes).filter(c=>c.name.startsWith("data-prop-"));if(u.length>0){let c=!1;if(u.forEach(f=>{let d=f.name.slice(10);if(!d)return;let g=S(f.value,t),h=`data-${d}`,m=r.getAttribute(h),E=(g==null||typeof g=="string"||typeof g=="number"||typeof g=="boolean")&&g!==void 0&&g!==null?String(g):null;E===null?m!==null&&(r.removeAttribute(h),c=!0):m!==E&&(r.setAttribute(h,E),c=!0);let M=ct(d),b=r.__boreDOMDetail;b&&(b.data||(b.data={}),b.data[M]!==g&&(b.data[M]=g,c=!0))}),c){let f=r.__boreDOMRerender;typeof f=="function"&&f()}}})},Te=(e,t)=>{let o=e.getAttribute("data-list");if(!o)return;let r=e.querySelector("template[data-item]");if(!(r instanceof HTMLTemplateElement))return;let n=S(o,t),s=Array.isArray(n)?n:[];Array.from(e.children).forEach(a=>{a.hasAttribute("data-list-item")&&a.remove()});let i=document.createDocumentFragment();s.forEach((a,l)=>{let u=r.content.cloneNode(!0);Array.from(u.childNodes).forEach(c=>{c.nodeType===Node.ELEMENT_NODE&&c.setAttribute("data-list-item","")}),pt(u,{...t,item:a,index:l}),i.appendChild(u)}),e.appendChild(i)},pt=(e,t)=>{let o=W(e);o.forEach(r=>Te(r,t)),o=W(e),ve(o,t)},re=(e,t)=>{let o=W(e);o.forEach(r=>Te(r,t)),o=W(e),ve(o,t)};var Be=!1,mt=!1,gt=(e,...t)=>{let o="";for(let r=0;r<e.length;r++)o+=e[r],r<t.length&&(o+=String(t[r]));return o};function yt(e,t,o){if(typeof document<"u"){let r=document.querySelector(`template[data-component="${e}"]`);if(r)r.innerHTML=t;else{let n=document.createElement("template");n.setAttribute("data-component",e),n.innerHTML=t,document.body.appendChild(n)}}return q(o)}var oe={get errors(){return C.errors},get lastError(){return C.lastError},rerender:C.rerender,clearError:C.clearError,export:C.export,get config(){return C.config},_setDebugConfig:U,version:v,llm:Le,component:yt,html:gt};mt&&(Object.assign(oe,{define:P.define,operate:P.operate,exportComponent:P.exportComponent,defineHelper:_.defineHelper,clearHelper:_.clearHelper,clearMissingFunctions:_.clearMissingFunctions,inferTemplate:_.inferTemplate}),Object.defineProperties(oe,{missingFunctions:{get:()=>_.missingFunctions},lastMissing:{get:()=>_.lastMissing},helpers:{get:()=>_.helpers},inferredTemplates:{get:()=>_.inferredTemplates}}));typeof window<"u"&&(window.boreDOM=oe,window.dispatch=K);async function un(e,t,o){o?.debug!==void 0&&U(o.debug),!Be&&p("versionLog")&&(Be=!0);let r=f=>f&&f[j]?f:typeof f=="function"?q(f):f,s=o?.singleFile??!0,{names:i,inlineLogic:a}=await le(r,{mirrorAttributes:o?.mirrorAttributes}),l=s?new Map:await ae(i);if(a)for(let[f,d]of a)(!l.has(f)||l.get(f)===null)&&l.set(f,d);if(t)for(let f of Object.keys(t))l.set(f,t[f]);for(let f of i)(!l.has(f)||l.get(f)===null)&&l.set(f,q(()=>()=>{}));let c=he({app:e,internal:{customTags:i,components:l,updates:{path:[],value:[],raf:void 0,subscribers:new Map}}});return c.internal.updates.path=[],c.internal.updates.value=[],c.internal.updates.raf&&(cancelAnimationFrame(c.internal.updates.raf),c.internal.updates.raf=void 0),Se(c,q,Q),be(c),c.app}function q(e){let t=(o,r)=>n=>{let{internal:s,app:i}=o,a=[],l=N(i,a,!0),u=ge(n),c=ye(n),f=me(n,i,r),d;n.state=l,n.refs=u,n.slots=c;let g=async()=>{let m=s.updates.subscribers;for(let y of a){let E=m.get(y);E?E.includes(d)||E.push(d):m.set(y,[d])}},h;try{h=e({detail:r,state:l,refs:u,on:f,self:n,makeComponent:(m,y)=>H(m,o,y?.detail)})}catch(m){let y=m;p("console")&&(r?.name??n.tagName.toLowerCase(),void 0),h=()=>{}}d=m=>{let y=r?.name??n.tagName.toLowerCase(),E=Ce(y,n,()=>d(m)),M=N(m,a,!1);if(p("errorBoundary"))try{h({state:M,refs:u,slots:c,self:n,detail:r,makeComponent:(b,w)=>H(b,o,w?.detail),helpers:E}),re(n,{state:M,detail:r,self:n}),g(),X(n)}catch(b){let w=b,z={component:y,element:n,error:w,state:i,refs:u,slots:c,timestamp:Date.now(),rerender:()=>d(m),stack:w.stack??""};p("console")?void 0:_e(y,w)}else h({state:M,refs:u,slots:c,self:n,detail:r,makeComponent:(b,w)=>H(b,o,w?.detail),helpers:E}),re(n,{state:M,detail:r,self:n}),g()},n.__boreDOMDetail=r,n.__boreDOMRerender=()=>d(i),d(l)};return t[j]=!0,t}export{v as VERSION,oe as boreDOM,Ue as clearGlobals,yt as component,Ee as getDebugConfig,gt as html,un as inflictBoreDOM,p as isDebugEnabled,$e as queryComponent,Q as registerComponent,U as setDebugConfig,q as webComponent};
