var ue=async e=>{let t=new Map;for(let o=0;o<e.length;++o){let a=Array.from(me("script[src]")).find(s=>((s.getAttribute("src")??"").split("/").pop()??"")===`${e[o]}.js`)?.getAttribute("src"),i=null;if(a)try{let l=await import(new URL(a,document.baseURI).href);for(let f of Object.keys(l)){i=l[f];break}t.set(e[o],i)}catch(s){console.error(`Unable to import "${a}"`,s)}}return t},de=async(e,t)=>{let o=typeof __LLM__<"u"&&__LLM__,r=t?.mirrorAttributes??!o,n=[],a=new Map,i=Array.from(me("template[data-component]")).filter(s=>s instanceof HTMLElement);for(let s of i){let l="",f=[];for(let c in s.dataset)c==="component"?l=s.dataset[c]??"":r&&f.push([Qe(c),s.dataset[c]??""]);if(!l){console.error("Invalid <template> found: missing data-component",s);continue}if(Ke(s)){let c=s.content.querySelector("script");if(c){let u=c.textContent;if(u&&u.trim().length>0)try{let p=new Blob([u],{type:"text/javascript"}),g=URL.createObjectURL(p),h=await import(g);URL.revokeObjectURL(g),c.remove();let m=null;if(h.default)m=h.default;else{let y=Object.keys(h);y.length>0&&(m=h[y[0]])}if(m){let y=e?e(m):m;a.set(l,y)}}catch{}}}ye(l,{attributes:f}),n.push(l)}return{names:n,inlineLogic:a}},Q=(e,t)=>{let o=v(e);if(!H(o)){let r=`The tag name "${e}" is not a BoreDOM  component.
      
"createComponent" only accepts tag-names with matching <template> tags that have a data-component attribute in them.`;throw console.error(r),new Error(r)}return t&&(o.renderCallback=t),o},Ve=e=>{let t=pe(e);if(!(t===null||!H(t)))return t},pe=e=>document.querySelector(e),me=e=>document.querySelectorAll(e),v=(e,t)=>{let o=document.createElement(e);return t&&Array.isArray(t)&&t.length>0&&t.map(r=>o.appendChild(r)),o};var X=(e,t)=>{document.readyState==="loading"?addEventListener("DOMContentLoaded",()=>dispatchEvent(new CustomEvent(e,{detail:t}))):dispatchEvent(new CustomEvent(e,{detail:t}))};var Ke=e=>e instanceof HTMLTemplateElement,ge=e=>typeof e=="object",fe=e=>typeof e=="function",H=e=>ge(e)&&"isBored"in e&&!!e.isBored;var Qe=e=>{if(e===""||!e.split("").some(o=>o!==o.toLowerCase()))return e;let t="";for(let o=0;o<e.length;o++){let r=e[o];r===r.toUpperCase()&&o!==0&&(t+="-"),t+=r.toLowerCase()}return t},V=e=>e.startsWith("on"),Xe=e=>e.startsWith("queriedOn"),J=e=>V(e)?e.slice(2).toLowerCase():e.slice(9).toLowerCase(),K=class extends HTMLElement{},ye=(e,t={})=>{let o=typeof __LLM__<"u"&&__LLM__;customElements.get(e)||customElements.define(e,class extends K{static get observedAttributes(){return typeof t.attributeChangedCallback=="object"?Object.keys(t.attributeChangedCallback):[]}constructor(){super()}isBored=!0;traverse(r,{traverseShadowRoot:n,query:a}={}){Array.from(n?this.shadowRoot?.querySelectorAll(a??"*")??[]:[]).concat(Array.from(this.querySelectorAll(a??"*"))).filter(i=>i instanceof HTMLElement).forEach(r)}#e(r){return r.split("'").filter(n=>n.length>2&&!(n.includes("(")||n.includes(",")||n.includes(")")))}#n(r){return r.split(/[\s,]+/g).map(n=>n.trim()).filter(Boolean)}#t(r){let n=r.trim();return n.length===0?[]:n.includes("dispatch(")||n.includes("'")?this.#e(r):this.#n(r)}#r(){let r;this.traverse(n=>{if(n instanceof HTMLElement){customElements.get(n.tagName.toLowerCase())&&(r=n);for(let i=0;i<n.attributes.length;i++){let s=n.attributes[i],l=s.name,f=(c,u)=>{u.length!==0&&u.forEach(p=>{n.addEventListener(c,g=>X(p,{event:g,dispatcher:n,component:this,index:this.parentElement?Array.from(this.parentElement.children).indexOf(this):-1}))})};if(l.startsWith("on-")){let c=l.slice(3),u=this.#t(s.value);f(c,u),n.removeAttribute(l);continue}if(l==="data-dispatch"||l.startsWith("data-dispatch-")){let c=l==="data-dispatch"?"click":l.slice(14),u=this.#t(s.value);f(c,u),n.removeAttribute(l);continue}if(!o&&V(s.name)){let c=this.#e(s.value);c.length>0&&f(J(s.name),c),n.setAttribute(`data-${l}-dispatches`,c.join()),n.removeAttribute(l)}}}},{traverseShadowRoot:!0})}isInitialized=!1;#o(){let r=pe(`[data-component="${e}"]`)??v("template"),n=o?null:r.getAttribute("shadowrootmode");if(!o&&(t.style||t.shadow||n)){let i=t.shadowrootmode??n??"open",s=this.attachShadow({mode:i});if(t.style){let l=v("style");l.textContent=t.style,s.appendChild(l)}if(t.shadow){let l=v("template");l.innerHTML=t.shadow,s.appendChild(l.content.cloneNode(!0))}else n&&s.appendChild(r.content.cloneNode(!0))}r&&!n&&this.appendChild(r.content.cloneNode(!0)),t.onSlotChange&&this.traverse(i=>{i instanceof HTMLSlotElement&&i.addEventListener("slotchange",s=>t.onSlotChange?.(s))},{traverseShadowRoot:!0}),fe(t.onClick)&&this.addEventListener("click",t.onClick);for(let[i,s]of Object.entries(t))if(V(i)){if(!fe(s))continue;this.addEventListener(J(i),s)}else if(Xe(i)){if(o)continue;let l=s;if(!ge(l))continue;let f=J(i);for(let[c,u]of Object.entries(l))this.traverse(p=>{p.addEventListener(f,u)},{traverseShadowRoot:!0,query:c})}t.attributes&&Array.isArray(t.attributes)&&t.attributes.map(([i,s])=>this.setAttribute(i,s)),this.#r(),this.isInitialized=!0}renderCallback=r=>{};connectedCallback(){this.isInitialized||this.#o(),this.renderCallback(this),t.connectedCallback?.(this)}disconnectedCallback(){t.disconnectedCallback?.(this)}adoptedCallback(){t.adoptedCallback?.(this)}attributeChangedCallback(r,n,a){t.attributeChangedCallback&&t.attributeChangedCallback[r]({element:this,name:r,oldValue:n,newValue:a})}})},Y=e=>{ye(e,{})};function N(e,t){let o=t;return t===null||e.forEach(r=>{o=o[r]}),o}function I(e,t=[]){let o=[{path:[],obj:e}],r=[],n=new WeakSet;for(;o.length>0;){let{path:a,obj:i}=o.pop();if(!n.has(i)){n.add(i);for(let s in i){if(t.includes(s))continue;let l=i[s],f=a.concat(s);typeof l=="object"&&l!==null&&!n.has(l)&&o.push({path:f,obj:l}),r.push({path:f,value:l})}}}return r}function C(e){if(e==null||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);return t==null?!0:t===Object.prototype}var Ye=e=>{let t={};for(let[o,r]of Object.entries(e.dataset))o.startsWith("prop")||r!==void 0&&(t[o]=r);return t};function he(e,t,o){return(r,n)=>{addEventListener(r,a=>{let i=a?.detail?.event.currentTarget,s;for(;i;){if(i===e){try{let l=n({state:t,e:a.detail,detail:o});Promise.resolve(l).catch(f=>{console.error(`Error in async handler for "${r}" event`,f)})}catch(l){console.error(`Error in handler for "${r}" event`,l)}return}i instanceof HTMLElement?i=i.parentElement:i=void 0}})}}function be(e){return new Proxy({},{get(t,o,r){let n=new Error(`Ref "${String(o)}" not found in <${e.tagName}>`);if(typeof o=="string"){let a=e.querySelectorAll(`[data-ref="${o}"]`);if(!a)throw n;let i=Array.from(a).filter(s=>s instanceof HTMLElement);if(i.length===0)throw n;return i.length===1?i[0]:i}}})}function Ee(e){return new Proxy({},{get(t,o,r){let n=new Error(`Slot "${String(o)}" not found in <${e.tagName}>`);if(typeof o=="string"){let a=e.querySelectorAll(`slot[name="${o}"]`);if(!a)throw n;let i=Array.from(a).filter(s=>s instanceof HTMLSlotElement);if(i.length===0)throw n;return i.length===1?i[0]:i}},set(t,o,r){if(typeof o!="string")return!1;let n=r;if(r instanceof HTMLElement)r.setAttribute("data-slot",o);else if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")n=v("span"),n.setAttribute("data-slot",o),n.innerText=String(r);else throw new Error(`Invalid value for slot ${o} in <${e.tagName}>`);let a=Array.from(e.querySelectorAll(`[data-slot="${o}"]`));return a.length>0?a.forEach(i=>i.parentElement?.replaceChild(n,i)):Array.from(e.querySelectorAll(`slot[name="${o}"]`)).forEach(s=>s.parentElement?.replaceChild(n,s)),!0}})}function R(e,t,o=!1,r){let n=r||{targets:new WeakMap,path:[]};if(e!==void 0)return new Proxy(e,{set(a,i,s){return o?Reflect.set(a,i,s):(typeof i=="string"&&console.error(`State is read-only for web components. Unable to set '${i}'.`),!1)},get(a,i,s){let l=Reflect.get(a,i,s),f=i==="__proto__";if(typeof i=="string"&&!f){n.targets.has(a)||n.targets.set(a,n.path.join("."));let u=n.targets.get(a);n.path.length=0,typeof u=="string"&&u!==""&&n.path.push(...u.split(".")),n.path.push(i)}if(f||Array.isArray(l)||C(l))return!n.targets.has(l)&&typeof i=="string"&&n.targets.set(l,n.path.join(".")),R(l,t,o,n);let c=n.targets.get(a)??"";return typeof c=="string"&&typeof i=="string"&&(Array.isArray(a)||(c+=c!==""?`.${i}`:i),t.indexOf(c)===-1&&t.push(c)),n.path.length=0,n.path.push(c),l}})}function Ze(e){return()=>{let t=e.internal.updates,o=new Set,r=n=>{if(n)for(let a=0;a<n.length;a++){let i=n[a];if(!o.has(i)){o.add(i);try{i(e.app)}catch{}}}};for(let n=0;n<t.path.length;n++){let a=t.path[n],i=a.slice(a.indexOf(".")+1);r(t.subscribers.get(i));for(let[s,l]of t.subscribers.entries()){if(s===i)continue;let f=`${s}.`,c=`${i}.`;(i.startsWith(f)||s.startsWith(c))&&r(l)}}t.path=[],t.value=[],t.raf=void 0}}function _e(e){let t=e.internal,o=e;if(o===void 0)return e;let r=new WeakSet,n=Symbol("boredom-proxy");function a(s,l){if(r.has(s))return s;let f=new Proxy(s,{get(c,u,p){return u===n?!0:Reflect.get(c,u,p)},set(c,u,p){if(!(c[u]!==p))return!0;if(typeof u=="string"){let h=Array.isArray(s)?l:`${l}.${u}`;!(p&&p[n]===!0)&&(Array.isArray(p)||C(p))&&(p=i(p,h))}return Reflect.set(c,u,p),typeof u!="string"||(Array.isArray(s)?t.updates.path.push(`${l}`):t.updates.path.push(`${l}.${u}`),t.updates.value.push(c),t.updates.raf||(t.updates.raf=requestAnimationFrame(Ze(e)))),!0}});return r.add(s),r.add(f),f}function i(s,l){if(!Array.isArray(s)&&!C(s)||r.has(s)||s&&s[n]===!0)return s;if(Array.isArray(s))for(let f=0;f<s.length;f++){let c=s[f];(Array.isArray(c)||C(c))&&(s[f]=i(c,l))}else for(let f of Object.keys(s)){let c=s[f];(Array.isArray(c)||C(c))&&(s[f]=i(c,`${l}.${f}`))}return a(s,l)}return I(e,["internal"]).forEach(({path:s,value:l})=>{if(Array.isArray(l)||C(l)&&!r.has(l)){let c=s.join("."),u=N(s.slice(0,-1),o);if(u===l)return;u[s.at(-1)]=a(l,c)}}),e}function Se(e){let t=e.internal.customTags.filter(r=>document.querySelector(r)!==null),o=e.internal.components;for(let[r,n]of o.entries()){if(n===null||!t.includes(r))continue;let a=Array.from(document.querySelectorAll(r)).filter(i=>H(i));a.length!==0&&a.forEach((i,s)=>{if(i.isBoredInitialized)return;let l={index:s,name:r,data:Ye(i)};n(e,l)(i),i.__boreDOMDetail=l,i.isBoredInitialized=!0})}}function U(e,t,o){let r=t.internal.components.get(e);if(r){let n={...o,tagName:e};n.data||(n.data={});let a=Q(e,r(t,n));return a.__boreDOMDetail=n,a}return Q(e)}var x={console:!0,globals:!0,errorBoundary:!0,visualIndicators:!0,errorHistory:!0,versionLog:!0,api:!0,methodMissing:!0,templateInference:!0,strict:!1,outputFormat:"human",llm:!0},D=new Map,_=null;function d(e){if(typeof __DEBUG__<"u"&&!__DEBUG__)return e==="errorBoundary"?x.errorBoundary??!0:!1;let t=x[e];return e==="strict"?t??!1:t??!0}function j(e){if(typeof e=="boolean"){let t=e;x={console:t,globals:t,errorBoundary:!0,visualIndicators:t,errorHistory:t,versionLog:t,api:t,methodMissing:t,templateInference:t,strict:!1,outputFormat:"human",llm:t}}else x={...x,...e}}function we(){return{...x}}function Me(e){if(typeof __DEBUG__<"u"&&!__DEBUG__||!d("globals")||typeof window>"u")return;let t=window;t.$state=e.state,t.$refs=e.refs,t.$slots=e.slots,t.$self=e.element,t.$error=e.error,t.$component=e.component,t.$rerender=e.rerender}function Ae(){if(typeof __DEBUG__<"u"&&!__DEBUG__||!d("globals")||typeof window>"u")return;let e=window;delete e.$state,delete e.$refs,delete e.$slots,delete e.$self,delete e.$error,delete e.$component,delete e.$rerender}function Ce(e){if(!(typeof __DEBUG__<"u"&&!__DEBUG__)&&d("console")){if(x.outputFormat==="llm"){console.log(JSON.stringify({type:"error",component:e.component,message:e.error?.message,stack:e.error?.stack}));return}console.log("%c\u{1F534} boreDOM: Error in %c<%s>%c render","color: #ff6b6b; font-weight: bold","color: #4ecdc4; font-weight: bold",e.component,"color: #ff6b6b"),console.error(e.error),d("globals")&&(console.log("%c\u{1F4CB} Debug context loaded:","color: #95a5a6; font-weight: bold"),console.log("   $state     \u2192",e.state),console.log("   $refs      \u2192",e.refs),console.log("   $slots     \u2192",e.slots),console.log("   $self      \u2192",e.element),console.log("%c\u{1F4A1} Quick fixes:","color: #f39c12; font-weight: bold"),console.log("   $state.propertyName = value"),console.log("   $rerender()"),console.log("%c\u{1F4E4} When fixed:","color: #27ae60; font-weight: bold"),console.log(`   boreDOM.export('${e.component}')`))}}function xe(e,t){console.error(`[boreDOM] Render error in <${e}>: ${t.message}`)}function De(e,t){typeof __DEBUG__<"u"&&!__DEBUG__||d("console")&&(console.log("%c\u{1F534} boreDOM: Error in %c<%s>%c init","color: #ff6b6b; font-weight: bold","color: #4ecdc4; font-weight: bold",e,"color: #ff6b6b"),console.error(t))}function Oe(e){typeof __DEBUG__<"u"&&!__DEBUG__||d("errorHistory")&&(D.set(e.component,e),_=e)}function Z(e){typeof __DEBUG__<"u"&&!__DEBUG__||d("errorHistory")&&(e?(D.delete(e),_?.component===e&&(_=null)):_&&(D.delete(_.component),_=null))}function ve(e){typeof __DEBUG__<"u"&&!__DEBUG__||d("visualIndicators")&&e.setAttribute("data-boredom-error","true")}function ee(e){e.removeAttribute("data-boredom-error")}function et(e){let t=e?D.get(e):_;if(!t)return null;try{return{component:t.component,state:JSON.parse(JSON.stringify(t.state)),timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}catch(o){return d("console")&&console.warn(`[boreDOM] exportState: Unable to serialize state for <${t.component}>:`,o instanceof Error?o.message:o),{component:t.component,state:"[Unable to serialize - contains circular references or functions]",timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}}var O={get errors(){return D},get lastError(){return _},rerender(e){let t=e?D.get(e):_;t?t.rerender():console.warn("[boreDOM] No error context found to rerender")},clearError(e){let t=e?D.get(e):_;t?(ee(t.element),Z(e),Ae()):d("console")&&console.warn(e?`[boreDOM] clearError: No error found for <${e}>`:"[boreDOM] clearError: No error to clear")},export:et,get config(){return we()}};var F=Symbol("boreDOM.webComponent"),L=null,te=null,ne=null,Le=new WeakMap;function Te(e,t,o){L=e,t&&(te=t),o&&(ne=o)}function B(){return L}function Be(e,t){typeof __DEBUG__<"u"&&!__DEBUG__||d("api")&&Le.set(e,t)}function tt(e){return typeof e=="function"&&e[F]===!0}function re(e,t,o){if(typeof __DEBUG__<"u"&&!__DEBUG__)return console.warn("[boreDOM] define() is not available in production build"),!1;if(!d("api"))return console.warn("[boreDOM] define() is disabled (debug.api is false)"),!1;if(!L)throw new Error("[boreDOM] Cannot define component before inflictBoreDOM()");if(!e.includes("-"))throw new Error(`[boreDOM] Invalid tag name "${e}": must contain a hyphen`);if(customElements.get(e))throw new Error(`[boreDOM] Component "${e}" is already defined`);if(!te||!ne)throw new Error("[boreDOM] Console API not initialized. Call inflictBoreDOM() first.");let r=L,n=te,a=ne,i=document.createElement("template");i.innerHTML=t,i.setAttribute("data-component",e),document.body.appendChild(i);let s=tt(o)?o:n(o);return r.internal.components.set(e,s),r.internal.customTags.push(e),a(e),nt(e,s),d("console")&&console.log("%c\u2705 boreDOM: Defined %c<%s>","color: #27ae60; font-weight: bold","color: #4ecdc4; font-weight: bold",e),!0}function nt(e,t){if(!L)return;let o=Array.from(document.querySelectorAll(e)),r={count:0};o.forEach((n,a)=>{if(n instanceof HTMLElement&&"renderCallback"in n)try{let s=t(L,{index:a,name:e,data:void 0});n.renderCallback=s,s(n)}catch(i){r.count++,d("console")&&console.error(`[boreDOM] Failed to initialize <${e}> instance ${a}:`,i)}}),r.count>0&&d("console")&&console.warn(`[boreDOM] ${r.count} of ${o.length} <${e}> instances failed to initialize`)}function $e(e,t=0){if(typeof __DEBUG__<"u"&&!__DEBUG__){console.warn("[boreDOM] operate() is not available in production build");return}if(!d("api")){console.warn("[boreDOM] operate() is disabled (debug.api is false)");return}let o=null;if(typeof e=="string"?o=Array.from(document.querySelectorAll(e)).filter(a=>a instanceof HTMLElement)[t]??null:o=e,!o){d("console")&&console.warn(`[boreDOM] operate(): No element found for "${e}"`);return}let r=Le.get(o);if(!r){d("console")&&console.warn("[boreDOM] operate(): Element is not a boreDOM component or not initialized");return}return r}function rt(e){if(typeof __DEBUG__<"u"&&!__DEBUG__)return console.warn("[boreDOM] exportComponent() is not available in production build"),null;if(!d("api"))return console.warn("[boreDOM] exportComponent() is disabled (debug.api is false)"),null;let t=$e(e);if(!t)return null;let r=document.querySelector(`template[data-component="${t.detail.name}"]`)?.innerHTML??void 0;try{return{component:t.detail.name,state:JSON.parse(JSON.stringify(t.state)),template:r,timestamp:new Date().toISOString()}}catch(n){return d("console")&&console.warn(`[boreDOM] exportComponent: Unable to serialize state for <${t.detail.name}>:`,n instanceof Error?n.message:n),{component:t.detail.name,state:"[Unable to serialize - contains circular references or functions]",template:r,timestamp:new Date().toISOString()}}}var P={define:re,operate:$e,exportComponent:rt};var T=new Map,G=new Map,ie=null,He=new Map,oe=null;function Ne(e,t,o){return typeof __DEBUG__<"u"&&!__DEBUG__?{}:d("methodMissing")?new Proxy({},{get(r,n){if(!(typeof n=="symbol"||n==="then"||n==="toJSON")){if(T.has(n)){let a=T.get(n);return(...i)=>a(...i)}return(...a)=>{let i={name:n,args:a,component:e,element:t,timestamp:Date.now(),define:s=>{Ie(n,s),o()}};st(i),at(i),lt(i)}}},has(r,n){return typeof n=="string"&&T.has(n)}}):{}}function Ie(e,t){typeof __DEBUG__<"u"&&!__DEBUG__||d("methodMissing")&&(T.set(e,t),d("console")&&console.log("%c\u2705 boreDOM: Defined helper %c%s","color: #27ae60; font-weight: bold","color: #9b59b6; font-weight: bold",e))}function ot(e){T.delete(e)}function it(){G.clear(),ie=null}function st(e){d("console")&&(console.log("%c\u26A0\uFE0F boreDOM: Missing function %c%s%c in <%s>","color: #f39c12; font-weight: bold","color: #9b59b6; font-weight: bold",e.name,"color: #f39c12",e.component),e.args.length>0&&console.log("   Arguments:",e.args),console.log("%c\u{1F4A1} Define it:","color: #3498db; font-weight: bold"),console.log(`   $defineMissing((${ke(e.args)}) => { ... })`),console.log(`   boreDOM.defineHelper('${e.name}', (${ke(e.args)}) => { ... })`))}function ke(e){return e.length===0?"":e.map((t,o)=>t==null?`arg${o}`:Array.isArray(t)?"items":typeof t=="object"?"name"in t&&"email"in t?"user":"id"in t&&"title"in t?"item":"id"in t?"record":"data":typeof t=="string"?"text":typeof t=="number"?"count":typeof t=="boolean"?"flag":`arg${o}`).join(", ")}function at(e){if(!d("errorHistory"))return;let t=G.get(e.name)||[];t.length>=10&&t.shift(),t.push(e),G.set(e.name,t),ie=e}function lt(e){if(!d("globals")||typeof window>"u")return;let t=window;t.$missingName=e.name,t.$missingArgs=e.args,t.$missingComponent=e.component,t.$defineMissing=e.define}function Re(e,t){if(typeof __DEBUG__<"u"&&!__DEBUG__||!d("templateInference")||d("strict"))return null;let o={},r=[];if(t){for(let s of Array.from(t.attributes)){if(s.name.startsWith("data-")||["class","id","style"].includes(s.name))continue;let l=ut(s.name);o[l]=dt(s.value)}for(let s of Array.from(t.children)){let l=s.getAttribute("slot");l&&!r.includes(l)&&r.push(l)}}let n=Object.keys(o).map(s=>`    <slot name="${je(s)}">${pt(o[s])}</slot>`).join(`
`),a=r.length===0&&Object.keys(o).length===0?'    <slot name="content">Loading...</slot>':"",i=`<div class="${e}-skeleton" data-inferred>
${n||a}
  </div>`;return{tagName:e,template:i,props:o,slots:r}}function ct(e,t){if(typeof __DEBUG__<"u"&&!__DEBUG__||!d("templateInference")||customElements.get(e)||!B())return!1;let o=Re(e,t);if(!o)return!1;let{template:r,props:n}=o;He.set(e,o),ft(e,n);try{return re(e,r,({state:a})=>({slots:i})=>{d("console")&&(console.log("%c\u{1F52E} boreDOM: Inferred <%s> rendering","color: #9b59b6; font-weight: bold",e),console.log("   Inferred props:",n),console.log("   App state:",a));for(let[s,l]of Object.entries(n)){let f=je(s);i[f]&&(i[f]=String(l))}}),!0}catch(a){return d("console")&&console.warn(`[boreDOM] Failed to register inferred <${e}>:`,a),!1}}function ft(e,t){if(d("console")){if(console.log("%c\u{1F52E} boreDOM: Inferring template for %c<%s>","color: #9b59b6; font-weight: bold","color: #4ecdc4; font-weight: bold",e),Object.keys(t).length>0){console.log("%c\u{1F4CB} Inferred props from attributes:","color: #95a5a6");for(let[o,r]of Object.entries(t))console.log(`   ${o}: ${JSON.stringify(r)}`)}console.log("%c\u{1F4A1} Define properly with:","color: #3498db; font-weight: bold"),console.log(`   boreDOM.define('${e}', '<your template>', ({ state }) => ({ slots }) => { ... })`)}}function Ue(){typeof __DEBUG__<"u"&&!__DEBUG__||d("templateInference")&&(typeof window>"u"||oe||(oe=new MutationObserver(e=>{for(let t of e)for(let o of Array.from(t.addedNodes))if(o instanceof HTMLElement&&o.tagName.includes("-")){let r=o.tagName.toLowerCase();customElements.get(r)||document.querySelector(`template[data-component="${r}"]`)||queueMicrotask(()=>{customElements.get(r)||ct(r,o)})}}),oe.observe(document.body,{childList:!0,subtree:!0})))}function ut(e){return e.replace(/-([a-z])/g,(t,o)=>o.toUpperCase())}function je(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function dt(e){if(e==="true")return!0;if(e==="false")return!1;let t=Number(e);if(!isNaN(t)&&e!=="")return t;if(e.startsWith("{")||e.startsWith("["))try{return JSON.parse(e)}catch{return e}return e}function pt(e){return e==null?"":typeof e=="object"?JSON.stringify(e):String(e)}var S={get missingFunctions(){return G},get lastMissing(){return ie},defineHelper:Ie,get helpers(){return new Map(T)},clearHelper:ot,clearMissingFunctions:it,get inferredTemplates(){return He},inferTemplate:Re};var mt=new Set(["script","style","noscript","template","link","meta","head","title"]),gt=new Set(["id","class","type","value","checked","disabled","placeholder","href","src","alt","title","role"]);function yt(e){return!(e.hasAttribute("hidden")||e.style.display==="none"||e.style.visibility==="hidden"||e.getAttribute("aria-hidden")==="true")}function se(e){if(!(e instanceof HTMLElement))return null;let t=e.tagName.toLowerCase();if(mt.has(t)||!yt(e))return null;let o={tagName:t},r={},n=!1;for(let s of Array.from(e.attributes)){let l=s.name;(gt.has(l)||l.startsWith("aria-")||l.startsWith("data-"))&&(l==="checked"||l==="disabled"?r[l]=e[l]:l==="value"&&(t==="input"||t==="textarea"||t==="select")?r[l]=e.value:r[l]=s.value,n=!0)}n&&(o.attributes=r);let a="";for(let s of Array.from(e.childNodes))if(s.nodeType===Node.TEXT_NODE){let l=s.nodeValue?.trim();l&&(a+=l+" ")}a=a.trim(),a&&(o.text=a);let i=[];for(let s of Array.from(e.children)){let l=se(s);l&&i.push(l)}return i.length>0&&(o.children=i),t==="div"&&!n&&!a&&i.length===0?null:o}function Pe(e,t){let o=[];try{for(let r of t){let n=Fe(e,r);n&&o.push(n)}return{success:!0}}catch(r){for(let n=o.length-1;n>=0;n--)try{Fe(e,o[n])}catch(a){console.error("Critical: Rollback failed",a)}return{success:!1,error:r.message||String(r)}}}function Ge(e,t){if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null||Array.isArray(e)!==Array.isArray(t))return!1;let o=Object.keys(e),r=Object.keys(t);if(o.length!==r.length)return!1;for(let n of o)if(!r.includes(n)||!Ge(e[n],t[n]))return!1;return!0}function ht(e){return e===""?[]:e==="/"?[""]:e.split("/").slice(1).map(t=>t.replace(/~1/g,"/").replace(/~0/g,"~"))}function Fe(e,t){let o=ht(t.path);if(o.length===0)throw new Error("Cannot operate on root state directly");let r=o.pop(),n=e;for(let a of o){if(n==null)throw new Error(`Path not found: ${t.path}`);if(Array.isArray(n)){let i=parseInt(a,10);if(isNaN(i))throw new Error(`Invalid array index: ${a}`);n=n[i]}else n=n[a]}if(n==null)throw new Error(`Path not found: ${t.path}`);if(t.op==="test"){let a;if(Array.isArray(n))if(r==="-")a=void 0;else{let i=parseInt(r,10);isNaN(i)||i<0||i>=n.length?a=void 0:a=n[i]}else a=n[r];if(!Ge(a,t.value))throw new Error(`Test failed at ${t.path}: expected ${JSON.stringify(t.value)}, got ${JSON.stringify(a)}`);return null}if(Array.isArray(n)){if(r==="-"){if(t.op==="add")return n.push(t.value),{op:"remove",path:t.path.replace(/-$/,(n.length-1).toString())};throw new Error("Can only add to '-' index")}let a=parseInt(r,10);if(isNaN(a)||a<0)throw new Error(`Invalid array index: ${r}`);if(t.op==="add"){if(a>n.length)throw new Error("Index out of bounds");return n.splice(a,0,t.value),{op:"remove",path:t.path}}else if(t.op==="remove"){if(a>=n.length)throw new Error("Index out of bounds");let i=n[a];return n.splice(a,1),{op:"add",path:t.path,value:i}}else if(t.op==="replace"){if(a>=n.length)throw new Error("Index out of bounds");let i=n[a];return n[a]=t.value,{op:"replace",path:t.path,value:i}}}else if(t.op==="add"){let a=n[r],i=Object.prototype.hasOwnProperty.call(n,r);return n[r]=t.value,i?{op:"replace",path:t.path,value:a}:{op:"remove",path:t.path}}else if(t.op==="replace"){if(!Object.prototype.hasOwnProperty.call(n,r))throw new Error(`Path not found: ${t.path}`);let a=n[r];return n[r]=t.value,{op:"replace",path:t.path,value:a}}else if(t.op==="remove"){if(!Object.prototype.hasOwnProperty.call(n,r))throw new Error(`Path not found: ${t.path}`);let a=n[r];return delete n[r],{op:"add",path:t.path,value:a}}return null}var $="0.25.25";var ae=typeof __LLM__<"u"?__LLM__:typeof __DEBUG__>"u"||__DEBUG__,bt=e=>se(e||document.body),Et=e=>{let t=B();return!t||!t.app?{success:!1,error:"No app state found"}:Pe(t.app,e)},We={vision:ae?bt:()=>null,transact:ae?Et:()=>({success:!1,error:"Production mode"}),compact:ae?()=>{let e=B();if(!e||!e.app)return null;let t=e.app,o=I(t).map(a=>a.path.join(".")),r={};Object.entries(t).forEach(([a,i])=>{Array.isArray(i)?r[a]=`[${i.length}]`:i&&typeof i=="object"?r[a]="{...}":r[a]=i});let n=Array.from(e.internal.components.entries()).map(([a,i])=>({tag:a,hasLogic:!!i}));return{framework:{name:"boreDOM",version:$},state:{paths:o,sample:r},components:n}}:()=>null};var _t=e=>e.replace(/-([a-z])/g,(t,o)=>o.toUpperCase()),St=e=>e.replace(/\[(\d+)\]/g,".$1").replace(/^\./,"").split(".").filter(Boolean),k=(e,t)=>{if(e==null)return;let o=St(t);return o.length===0?e:N(o,e)},w=(e,t)=>{let o=e.trim();if(o)return o==="index"||o==="i"?t.index:o==="item"?t.item:o==="detail"?t.detail:o==="self"?t.self:o.startsWith("state.")?k(t.state,o.slice(6)):o.startsWith("item.")?k(t.item,o.slice(5)):o.startsWith("detail.")?k(t.detail,o.slice(7)):o.startsWith("self.")?k(t.self,o.slice(5)):k(t.state,o)},W=e=>{let t=[];if(e instanceof DocumentFragment){let o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;o.nextNode();)t.push(o.currentNode);return t}return t.push(e),e.traverse(o=>{t.push(o)},{traverseShadowRoot:!0}),t},wt=e=>{let t=e.getAttribute("data-class-base");if(t!==null)return t;let o=e.className;return e.setAttribute("data-class-base",o),o},Mt=(e,t,o)=>{let r=wt(e);if(t.includes(":")){let a=[];t.split(",").forEach(s=>{let[l,f]=s.split(":").map(c=>c.trim());!l||!f||w(f,o)&&a.push(l)});let i=[r,...a].filter(Boolean).join(" ").trim();e.className=i;return}let n=w(t,o);if(typeof n=="string")e.className=[r,n].filter(Boolean).join(" ").trim();else if(Array.isArray(n))e.className=[r,n.join(" ")].filter(Boolean).join(" ").trim();else if(n&&typeof n=="object"){let a=Object.entries(n).filter(([,i])=>!!i).map(([i])=>i);e.className=[r,...a].filter(Boolean).join(" ").trim()}else e.className=r.trim()},qe=(e,t)=>{let o=t.item===void 0;e.forEach(r=>{if(r instanceof HTMLTemplateElement||o&&r.closest("[data-list-item]"))return;let n=r.getAttribute("data-text");if(n){let c=w(n,t);r.textContent=c==null?"":String(c)}let a=r.getAttribute("data-show");a&&(r.hidden=!w(a,t));let i=r.getAttribute("data-class");i&&Mt(r,i,t);let s=r.getAttribute("data-value");if(s&&"value"in r){let c=w(s,t);r.value=c==null?"":String(c)}let l=r.getAttribute("data-checked");if(l&&"checked"in r){let c=w(l,t);r.checked=!!c}let f=Array.from(r.attributes).filter(c=>c.name.startsWith("data-prop-"));if(f.length>0){let c=!1;if(f.forEach(u=>{let p=u.name.slice(10);if(!p)return;let g=w(u.value,t),h=`data-${p}`,m=r.getAttribute(h),E=(g==null||typeof g=="string"||typeof g=="number"||typeof g=="boolean")&&g!==void 0&&g!==null?String(g):null;E===null?m!==null&&(r.removeAttribute(h),c=!0):m!==E&&(r.setAttribute(h,E),c=!0);let M=_t(p),b=r.__boreDOMDetail;b&&(b.data||(b.data={}),b.data[M]!==g&&(b.data[M]=g,c=!0))}),c){let u=r.__boreDOMRerender;typeof u=="function"&&u()}}})},ze=(e,t)=>{let o=e.getAttribute("data-list");if(!o)return;let r=e.querySelector("template[data-item]");if(!(r instanceof HTMLTemplateElement))return;let n=w(o,t),a=Array.isArray(n)?n:[];Array.from(e.children).forEach(s=>{s.hasAttribute("data-list-item")&&s.remove()});let i=document.createDocumentFragment();a.forEach((s,l)=>{let f=r.content.cloneNode(!0);Array.from(f.childNodes).forEach(c=>{c.nodeType===Node.ELEMENT_NODE&&c.setAttribute("data-list-item","")}),At(f,{...t,item:s,index:l}),i.appendChild(f)}),e.appendChild(i)},At=(e,t)=>{let o=W(e);o.forEach(r=>ze(r,t)),o=W(e),qe(o,t)},le=(e,t)=>{let o=W(e);o.forEach(r=>ze(r,t)),o=W(e),qe(o,t)};var Je=!1,Ct=typeof __DEBUG__>"u"||__DEBUG__,xt=(e,...t)=>{let o="";for(let r=0;r<e.length;r++)o+=e[r],r<t.length&&(o+=String(t[r]));return o};function Dt(e,t,o){if(typeof document<"u"){let r=document.querySelector(`template[data-component="${e}"]`);if(r)r.innerHTML=t;else{let n=document.createElement("template");n.setAttribute("data-component",e),n.innerHTML=t,document.body.appendChild(n)}}return q(o)}var ce={get errors(){return O.errors},get lastError(){return O.lastError},rerender:O.rerender,clearError:O.clearError,export:O.export,get config(){return O.config},_setDebugConfig:j,version:$,llm:We,component:Dt,html:xt};Ct&&(Object.assign(ce,{define:P.define,operate:P.operate,exportComponent:P.exportComponent,defineHelper:S.defineHelper,clearHelper:S.clearHelper,clearMissingFunctions:S.clearMissingFunctions,inferTemplate:S.inferTemplate}),Object.defineProperties(ce,{missingFunctions:{get:()=>S.missingFunctions},lastMissing:{get:()=>S.lastMissing},helpers:{get:()=>S.helpers},inferredTemplates:{get:()=>S.inferredTemplates}}));typeof window<"u"&&(window.boreDOM=ce,window.dispatch=X);async function mn(e,t,o){o?.debug!==void 0&&j(o.debug),!Je&&d("versionLog")&&(Je=!0);let r=u=>u&&u[F]?u:typeof u=="function"?q(u):u,n=typeof __SINGLE_FILE__<"u"&&__SINGLE_FILE__,a=o?.singleFile??n,{names:i,inlineLogic:s}=await de(r,{mirrorAttributes:o?.mirrorAttributes}),l=a?new Map:await ue(i);if(s)for(let[u,p]of s)(!l.has(u)||l.get(u)===null)&&l.set(u,p);if(t)for(let u of Object.keys(t))l.set(u,t[u]);for(let u of i)(!l.has(u)||l.get(u)===null)&&l.set(u,q(()=>()=>{}));let c=_e({app:e,internal:{customTags:i,components:l,updates:{path:[],value:[],raf:void 0,subscribers:new Map}}});return c.internal.updates.path=[],c.internal.updates.value=[],c.internal.updates.raf&&(cancelAnimationFrame(c.internal.updates.raf),c.internal.updates.raf=void 0),Te(c,q,Y),Se(c),Ue(),c.app}function q(e){let t=(o,r)=>n=>{let{internal:a,app:i}=o,s=[],l=R(i,s,!0),f=be(n),c=Ee(n),u=he(n,i,r),p;n.state=l,n.refs=f,n.slots=c;let g=async()=>{let m=a.updates.subscribers;for(let y of s){let E=m.get(y);E?E.includes(p)||E.push(p):m.set(y,[p])}},h;try{h=e({detail:r,state:l,refs:f,on:u,self:n,makeComponent:(m,y)=>U(m,o,y?.detail)})}catch(m){let y=m;d("console")&&De(r?.name??n.tagName.toLowerCase(),y),h=()=>{}}p=m=>{let y=r?.name??n.tagName.toLowerCase(),E=Ne(y,n,()=>p(m)),M=R(m,s,!1);if(d("errorBoundary"))try{h({state:M,refs:f,slots:c,self:n,detail:r,makeComponent:(b,A)=>U(b,o,A?.detail),helpers:E}),le(n,{state:M,detail:r,self:n}),g(),ee(n),Z(y)}catch(b){let A=b,z={component:y,element:n,error:A,state:i,refs:f,slots:c,timestamp:Date.now(),rerender:()=>p(m),stack:A.stack??""};d("console")?Ce(z):xe(y,A),Me(z),Oe(z),ve(n)}else h({state:M,refs:f,slots:c,self:n,detail:r,makeComponent:(b,A)=>U(b,o,A?.detail),helpers:E}),le(n,{state:M,detail:r,self:n}),g()},Be(n,{state:i,refs:f,slots:c,self:n,detail:r,rerender:()=>p(i)}),n.__boreDOMDetail=r,n.__boreDOMRerender=()=>p(i),p(l)};return t[F]=!0,t}export{$ as VERSION,ce as boreDOM,Ae as clearGlobals,Dt as component,we as getDebugConfig,xt as html,mn as inflictBoreDOM,d as isDebugEnabled,Ve as queryComponent,Y as registerComponent,j as setDebugConfig,q as webComponent};
