var lt=Object.defineProperty;var B=(e,t)=>()=>(e&&(t=e(e=0)),t);var ct=(e,t)=>{for(var n in t)lt(e,n,{get:t[n],enumerable:!0})};function $e(e,t,n){O=e,t&&(X=t),n&&(Z=n)}function y(){return O}function ke(e,t){typeof __DEBUG__<"u"&&!__DEBUG__||f("api")&&Oe.set(e,t)}function gt(e){return typeof e=="function"&&e[ee]===!0}function te(e,t,n){if(typeof __DEBUG__<"u"&&!__DEBUG__)return console.warn("[boreDOM] define() is not available in production build"),!1;if(!f("api"))return console.warn("[boreDOM] define() is disabled (debug.api is false)"),!1;if(!O)throw new Error("[boreDOM] Cannot define component before inflictBoreDOM()");if(!e.includes("-"))throw new Error(`[boreDOM] Invalid tag name "${e}": must contain a hyphen`);if(customElements.get(e))throw new Error(`[boreDOM] Component "${e}" is already defined`);if(!X||!Z)throw new Error("[boreDOM] Console API not initialized. Call inflictBoreDOM() first.");let r=O,i=X,s=Z,o=document.createElement("template");o.innerHTML=t,o.setAttribute("data-component",e),document.body.appendChild(o);let a=gt(n)?n:i(n);return r.internal.components.set(e,a),r.internal.customTags.push(e),s(e),yt(e,a),f("console")&&console.log("%c\u2705 boreDOM: Defined %c<%s>","color: #27ae60; font-weight: bold","color: #4ecdc4; font-weight: bold",e),!0}function yt(e,t){if(!O)return;let n=Array.from(document.querySelectorAll(e)),r={count:0};n.forEach((i,s)=>{if(i instanceof HTMLElement&&"renderCallback"in i)try{let a=t(O,{index:s,name:e,data:void 0});i.renderCallback=a,a(i)}catch(o){r.count++,f("console")&&console.error(`[boreDOM] Failed to initialize <${e}> instance ${s}:`,o)}}),r.count>0&&f("console")&&console.warn(`[boreDOM] ${r.count} of ${n.length} <${e}> instances failed to initialize`)}function Te(e,t=0){if(typeof __DEBUG__<"u"&&!__DEBUG__){console.warn("[boreDOM] operate() is not available in production build");return}if(!f("api")){console.warn("[boreDOM] operate() is disabled (debug.api is false)");return}let n=null;if(typeof e=="string"?n=Array.from(document.querySelectorAll(e)).filter(s=>s instanceof HTMLElement)[t]??null:n=e,!n){f("console")&&console.warn(`[boreDOM] operate(): No element found for "${e}"`);return}let r=Oe.get(n);if(!r){f("console")&&console.warn("[boreDOM] operate(): Element is not a boreDOM component or not initialized");return}return r}function bt(e){if(typeof __DEBUG__<"u"&&!__DEBUG__)return console.warn("[boreDOM] exportComponent() is not available in production build"),null;if(!f("api"))return console.warn("[boreDOM] exportComponent() is disabled (debug.api is false)"),null;let t=Te(e);if(!t)return null;let r=document.querySelector(`template[data-component="${t.detail.name}"]`)?.innerHTML??void 0;try{return{component:t.detail.name,state:JSON.parse(JSON.stringify(t.state)),template:r,timestamp:new Date().toISOString()}}catch(i){return f("console")&&console.warn(`[boreDOM] exportComponent: Unable to serialize state for <${t.detail.name}>:`,i instanceof Error?i.message:i),{component:t.detail.name,state:"[Unable to serialize - contains circular references or functions]",template:r,timestamp:new Date().toISOString()}}}var ee,O,X,Z,Oe,G,j=B(()=>{"use strict";$();ee=Symbol("boreDOM.webComponent"),O=null,X=null,Z=null,Oe=new WeakMap;G={define:te,operate:Te,exportComponent:bt}});function He(e,t,n){return typeof __DEBUG__<"u"&&!__DEBUG__?{}:f("methodMissing")?new Proxy({},{get(r,i){if(!(typeof i=="symbol"||i==="then"||i==="toJSON"))return k.has(i)?k.get(i):(...s)=>{let o={name:i,args:s,component:e,element:t,timestamp:Date.now(),define:a=>{Re(i,a),n()}};Ct(o),St(o),_t(o)}},has(r,i){return typeof i=="string"&&k.has(i)}}):{}}function Re(e,t){typeof __DEBUG__<"u"&&!__DEBUG__||f("methodMissing")&&(k.set(e,t),f("console")&&console.log("%c\u2705 boreDOM: Defined helper %c%s","color: #27ae60; font-weight: bold","color: #9b59b6; font-weight: bold",e))}function ht(e){k.delete(e)}function Et(){P.clear(),re=null}function Ct(e){f("console")&&(console.log("%c\u26A0\uFE0F boreDOM: Missing function %c%s%c in <%s>","color: #f39c12; font-weight: bold","color: #9b59b6; font-weight: bold",e.name,"color: #f39c12",e.component),e.args.length>0&&console.log("   Arguments:",e.args),console.log("%c\u{1F4A1} Define it:","color: #3498db; font-weight: bold"),console.log(`   $defineMissing((${Ie(e.args)}) => { ... })`),console.log(`   boreDOM.defineHelper('${e.name}', (${Ie(e.args)}) => { ... })`))}function Ie(e){return e.length===0?"":e.map((t,n)=>t==null?`arg${n}`:Array.isArray(t)?"items":typeof t=="object"?"name"in t&&"email"in t?"user":"id"in t&&"title"in t?"item":"id"in t?"record":"data":typeof t=="string"?"text":typeof t=="number"?"count":typeof t=="boolean"?"flag":`arg${n}`).join(", ")}function St(e){if(!f("errorHistory"))return;let t=P.get(e.name)||[];t.length>=10&&t.shift(),t.push(e),P.set(e.name,t),re=e}function _t(e){if(!f("globals")||typeof window>"u")return;let t=window;t.$missingName=e.name,t.$missingArgs=e.args,t.$missingComponent=e.component,t.$defineMissing=e.define}function Fe(e,t){if(typeof __DEBUG__<"u"&&!__DEBUG__||!f("templateInference")||f("strict"))return null;let n={},r=[];if(t){for(let a of Array.from(t.attributes)){if(a.name.startsWith("data-")||["class","id","style"].includes(a.name))continue;let l=xt(a.name);n[l]=At(a.value)}for(let a of Array.from(t.children)){let l=a.getAttribute("slot");l&&!r.includes(l)&&r.push(l)}}let i=Object.keys(n).map(a=>`    <slot name="${Ge(a)}">${Lt(n[a])}</slot>`).join(`
`),s=r.length===0&&Object.keys(n).length===0?'    <slot name="content">Loading...</slot>':"",o=`<div class="${e}-skeleton" data-inferred>
${i||s}
  </div>`;return{tagName:e,template:o,props:n,slots:r}}function Mt(e,t){if(typeof __DEBUG__<"u"&&!__DEBUG__||!f("templateInference")||customElements.get(e)||!y())return!1;let n=Fe(e,t);if(!n)return!1;let{template:r,props:i}=n;Be.set(e,n),wt(e,i);try{return te(e,r,({state:s})=>({slots:o})=>{f("console")&&(console.log("%c\u{1F52E} boreDOM: Inferred <%s> rendering","color: #9b59b6; font-weight: bold",e),console.log("   Inferred props:",i),console.log("   App state:",s));for(let[a,l]of Object.entries(i)){let c=Ge(a);o[c]&&(o[c]=String(l))}}),!0}catch(s){return f("console")&&console.warn(`[boreDOM] Failed to register inferred <${e}>:`,s),!1}}function wt(e,t){if(f("console")){if(console.log("%c\u{1F52E} boreDOM: Inferring template for %c<%s>","color: #9b59b6; font-weight: bold","color: #4ecdc4; font-weight: bold",e),Object.keys(t).length>0){console.log("%c\u{1F4CB} Inferred props from attributes:","color: #95a5a6");for(let[n,r]of Object.entries(t))console.log(`   ${n}: ${JSON.stringify(r)}`)}console.log("%c\u{1F4A1} Define properly with:","color: #3498db; font-weight: bold"),console.log(`   boreDOM.define('${e}', '<your template>', ({ state }) => ({ slots }) => { ... })`)}}function Ue(){typeof __DEBUG__<"u"&&!__DEBUG__||f("templateInference")&&(typeof window>"u"||ne||(ne=new MutationObserver(e=>{for(let t of e)for(let n of Array.from(t.addedNodes))if(n instanceof HTMLElement&&n.tagName.includes("-")){let r=n.tagName.toLowerCase();customElements.get(r)||document.querySelector(`template[data-component="${r}"]`)||queueMicrotask(()=>{customElements.get(r)||Mt(r,n)})}}),ne.observe(document.body,{childList:!0,subtree:!0})))}function xt(e){return e.replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Ge(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function At(e){if(e==="true")return!0;if(e==="false")return!1;let t=Number(e);if(!isNaN(t)&&e!=="")return t;if(e.startsWith("{")||e.startsWith("["))try{return JSON.parse(e)}catch{return e}return e}function Lt(e){return e==null?"":typeof e=="object"?JSON.stringify(e):String(e)}var k,P,re,Be,ne,m,oe=B(()=>{"use strict";$();j();k=new Map,P=new Map,re=null,Be=new Map,ne=null;m={get missingFunctions(){return P},get lastMissing(){return re},defineHelper:Re,get helpers(){return new Map(k)},clearHelper:ht,clearMissingFunctions:Et,get inferredTemplates(){return Be},inferTemplate:Fe}});var w,W=B(()=>{"use strict";w="0.25.25"});var Ze={};ct(Ze,{clearAttempts:()=>Xe,context:()=>Ke,copy:()=>Qe,focus:()=>ue,formatErrorForLLM:()=>Ht,getAttempts:()=>Ye,isLLMOutputFormat:()=>Ft,llmAPI:()=>de,llmLog:()=>Rt,recordAttempt:()=>Ve});function vt(e,t){if(e===t)return!0;if(!e||!t||typeof e!="object"||typeof t!="object")return!1;try{let n=Date.now()+Math.random();e[ie]=n;let r=t[ie]===n;return delete e[ie],r}catch{return!1}}function ae(e,t="",n=new WeakSet){let r=[];if(e==null||typeof e!="object"||n.has(e))return r;n.add(e);for(let i of Object.keys(e)){let s=t?`${t}.${i}`:i;r.push(s);let o=e[i];Array.isArray(o)?(r.push(`${s}[]`),o.length>0&&typeof o[0]=="object"&&o[0]!==null&&r.push(...ae(o[0],`${s}[0]`,n))):o&&typeof o=="object"&&r.push(...ae(o,s,n))}return r}function le(e,t=new WeakSet){return e===null?"null":e===void 0?"undefined":Array.isArray(e)?e.length===0?"any[]":`${le(e[0],t)}[]`:typeof e=="object"?t.has(e)?"/* circular */":(t.add(e),`{
${Object.entries(e).map(([r,i])=>`  ${r}: ${le(i,t)}`).join(`
`)}
}`):typeof e}function b(e,t=new WeakSet,n){if(e==null||typeof e!="object")return e;if(typeof e=="function")return"[Function]";if(typeof e=="symbol")return"[Symbol]";if(e instanceof Date)return e.toISOString();if(e instanceof RegExp)return e.toString();if(e instanceof Map)return"[Map]";if(e instanceof Set)return"[Set]";if(n===void 0&&(n=e),t.has(e))return"[Circular]";t.add(e);let r=Array.isArray(e)?[]:{};for(let[i,s]of Object.entries(e))Dt.some(a=>i.toLowerCase().includes(a.toLowerCase()))?r[i]="[REDACTED]":s&&typeof s=="object"?vt(s,n)||t.has(s)?r[i]="[Circular]":r[i]=b(s,t,n):typeof s=="function"?r[i]="[Function]":typeof s=="symbol"?r[i]="[Symbol]":r[i]=s;return r}function We(e){let t=e.error.message.toLowerCase();if(t.includes("undefined")&&t.includes("reading")){let n=t.match(/reading '(\w+)'/);if(n)return`Property access on null/undefined. Add null check before accessing '${n[1]}' or initialize the value.`}if(t.includes("is not a function")){let n=t.match(/(\w+) is not a function/);if(n)return`'${n[1]}' is not a function. Check if it's defined, imported, or if the object exists.`}return t.includes("map")||t.includes("filter")||t.includes("foreach")?"Array method called on non-array. Initialize as empty array or add type check.":t.includes("null")||t.includes("undefined")?"Null/undefined value encountered. Add defensive checks or initialize data.":"Check the error message and component state for the root cause."}function fe(){return S.errors}function Ne(){return m.missingFunctions}function Ot(){return m.helpers}function qe(){if(typeof document>"u")return[];let e=[],t=document.querySelectorAll("*");for(let n of Array.from(t)){let r=n.tagName.toLowerCase();r.includes("-")&&!customElements.get(r)&&(e.includes(r)||e.push(r))}return e}function ze(){let e=y();return e?e.internal.customTags||[]:[]}function $t(e){return typeof document>"u"?null:document.querySelector(`template[data-component="${e}"]`)?.innerHTML??null}function kt(e){return typeof document>"u"?0:document.querySelectorAll(e).length}function ce(e){let n=y()?.internal.components.has(e)??!1,r=$t(e),i=kt(e),o=fe().has(e),a=[],l=[];if(r){let c=document.createElement("div");c.innerHTML=r,c.querySelectorAll("[data-ref]").forEach(u=>{let d=u.getAttribute("data-ref");d&&a.push(d)}),c.querySelectorAll("[data-slot], slot[name]").forEach(u=>{let d=u.getAttribute("data-slot")||u.getAttribute("name");d&&l.push(d)})}return{tagName:e,template:r,hasLogic:n,refs:a,slots:l,events:[],stateAccess:[],hasError:o,instanceCount:i}}function Tt(){let e=ze(),t={};for(let n of e)t[n]=ce(n);return t}function It(){let e=["reactive-state","web-components","event-handling"],t=H();return t.errorBoundary&&e.push("error-boundary"),t.globals&&e.push("debug-globals"),t.api&&e.push("runtime-define"),t.methodMissing&&e.push("method-missing"),t.templateInference&&e.push("template-inference"),e}function Bt(){let e=ze();return{eventNaming:"unknown",stateStructure:"unknown",componentNaming:e.length>0?e.every(n=>n.match(/^[a-z]+-[a-z]+(-[a-z]+)*$/))?"kebab-case (e.g., user-profile, todo-list)":"mixed":"unknown"}}function Je(e,t){if(t.length===0)return`${e}(): any`;let n=t.map((r,i)=>r===null?`arg${i}: null`:r===void 0?`arg${i}: undefined`:Array.isArray(r)?"items: any[]":typeof r=="object"?"data: object":`arg${i}: ${typeof r}`);return`${e}(${n.join(", ")}): any`}function je(){return{framework:{name:"boreDOM",version:w,capabilities:[]},state:{shape:"{}",paths:[],sample:{}},components:{},issues:{errors:[],missingFunctions:[],missingComponents:[]},helpers:{defined:{},missing:{}},patterns:{eventNaming:"unknown",stateStructure:"unknown",componentNaming:"unknown"}}}function Pe(){return{issue:{type:"none",description:"LLM features disabled or unavailable"},relevantState:{}}}function Ke(){if(typeof __DEBUG__<"u"&&!__DEBUG__||!f("llm"))return je();let t=y()?.app??{},n=fe(),r=Ne(),i=Ot(),s=Array.from(n.values()).map(c=>({component:c.component,error:c.error.message,stack:c.stack,state:b(c.state),timestamp:c.timestamp})),o=[],a={};for(let[c,u]of r.entries()){let d=u.map(g=>g.args),p=[...new Set(u.map(g=>g.component))],R=Math.max(...u.map(g=>g.timestamp));o.push({name:c,args:u[0]?.args??[],component:u[0]?.component??"unknown",inferredSignature:Je(c,u[0]?.args??[]),callCount:u.length}),a[c]={args:d,components:p,lastCall:R}}let l={};for(let[c,u]of i.entries())l[c]=`${c}(${u.length>0?"...":""}): any`;return{framework:{name:"boreDOM",version:w,capabilities:It()},state:{shape:le(t),paths:ae(t),sample:b(t)},components:Tt(),issues:{errors:s,missingFunctions:o,missingComponents:qe()},helpers:{defined:l,missing:a},patterns:Bt()}}function ue(){if(typeof __DEBUG__<"u"&&!__DEBUG__||!f("llm"))return Pe();let e=fe();if(e.size>0){let r=Array.from(e.values()),i=r[r.length-1];return{issue:{type:"error",description:i.error.message,component:i.component,suggestion:We(i)},component:{...ce(i.component),currentState:b(i.state)},relevantState:b(i.state),previousAttempts:se()}}let t=Ne();if(t.size>0){let r=Array.from(t.entries()),[i,s]=r[r.length-1],o=s[s.length-1];return{issue:{type:"missing_function",description:`Undefined function '${i}' called`,component:o?.component,suggestion:`Define helper: boreDOM.defineHelper("${i}", (${Je(i,o?.args??[]).split("(")[1]?.split(")")[0]||""}) => { /* implementation */ })`},component:o?.component?{...ce(o.component),currentState:b(y()?.app)}:void 0,relevantState:b(y()?.app),previousAttempts:se()}}let n=qe();if(n.length>0){let r=n[0];return{issue:{type:"missing_component",description:`Custom element <${r}> used but not defined`,suggestion:`Define component: boreDOM.define("${r}", "<template-html>", ({ state }) => ({ slots }) => { /* render */ })`},relevantState:b(y()?.app),previousAttempts:se()}}return{issue:{type:"none",description:"No current issues detected"},relevantState:b(y()?.app)}}function Qe(){if(typeof __DEBUG__<"u"&&!__DEBUG__||!f("llm"))return"{}";let e=ue(),t=JSON.stringify(e,null,2);return typeof navigator<"u"&&navigator.clipboard?navigator.clipboard.writeText(t).then(()=>{f("console")&&console.log("%c\u{1F4CB} boreDOM: LLM context copied to clipboard","color: #27ae60; font-weight: bold")}).catch(()=>{f("console")&&(console.log("%c\u{1F4CB} boreDOM: Clipboard access failed, context logged below:","color: #f39c12; font-weight: bold"),console.log(t))}):f("console")&&(console.log("%c\u{1F4CB} boreDOM: Clipboard unavailable, context logged below:","color: #f39c12; font-weight: bold"),console.log(t)),t}function Ve(e,t,n){typeof __DEBUG__<"u"&&!__DEBUG__||f("llm")&&(x.push({code:e,result:t,error:n,timestamp:Date.now()}),x.length>10&&(x=x.slice(-10)))}function se(){return[...x]}function Ye(){return[...x]}function Xe(){x=[]}function Ht(e){return JSON.stringify({type:"error",component:e.component,error:e.error.message,stack:e.stack,state:b(e.state),refs:Object.keys(e.refs),slots:Object.keys(e.slots),suggestion:We(e),timestamp:e.timestamp})}function Rt(e,t){if(typeof __DEBUG__<"u"&&!__DEBUG__)return;H().outputFormat==="llm"&&console.log(JSON.stringify({type:e,...t}))}function Ft(){return H().outputFormat==="llm"}var x,Dt,ie,de,pe=B(()=>{"use strict";$();j();oe();W();x=[],Dt=["password","token","secret","apiKey","api_key","auth","credential","private","key","pass"],ie=Symbol("__llm_circular_check__");de={context:Ke,focus:ue,copy:Qe,get attempts(){return Ye()},clearAttempts:Xe,_recordAttempt:Ve}});function f(e){if(typeof __DEBUG__<"u"&&!__DEBUG__)return e==="errorBoundary"?A.errorBoundary??!0:!1;let t=A[e];return e==="strict"?t??!1:t??!0}function me(e){if(typeof e=="boolean"){let t=e;A={console:t,globals:t,errorBoundary:!0,visualIndicators:t,errorHistory:t,versionLog:t,api:t,methodMissing:t,templateInference:t,strict:!1,outputFormat:"human",llm:t}}else A={...A,...e}}function H(){return{...A}}function et(e){if(typeof __DEBUG__<"u"&&!__DEBUG__||!f("globals")||typeof window>"u")return;let t=window;t.$state=e.state,t.$refs=e.refs,t.$slots=e.slots,t.$self=e.element,t.$error=e.error,t.$component=e.component,t.$rerender=e.rerender}function tt(){if(typeof __DEBUG__<"u"&&!__DEBUG__||!f("globals")||typeof window>"u")return;let e=window;delete e.$state,delete e.$refs,delete e.$slots,delete e.$self,delete e.$error,delete e.$component,delete e.$rerender}function nt(e){if(!(typeof __DEBUG__<"u"&&!__DEBUG__)&&f("console")){if(A.outputFormat==="llm"){Promise.resolve().then(()=>(pe(),Ze)).then(({formatErrorForLLM:t})=>{console.log(t(e))});return}console.log("%c\u{1F534} boreDOM: Error in %c<%s>%c render","color: #ff6b6b; font-weight: bold","color: #4ecdc4; font-weight: bold",e.component,"color: #ff6b6b"),console.error(e.error),f("globals")&&(console.log("%c\u{1F4CB} Debug context loaded:","color: #95a5a6; font-weight: bold"),console.log("   $state     \u2192",e.state),console.log("   $refs      \u2192",e.refs),console.log("   $slots     \u2192",e.slots),console.log("   $self      \u2192",e.element),console.log("%c\u{1F4A1} Quick fixes:","color: #f39c12; font-weight: bold"),console.log("   $state.propertyName = value"),console.log("   $rerender()"),console.log("%c\u{1F4E4} When fixed:","color: #27ae60; font-weight: bold"),console.log(`   boreDOM.export('${e.component}')`))}}function rt(e,t){console.error(`[boreDOM] Render error in <${e}>: ${t.message}`)}function ot(e,t){typeof __DEBUG__<"u"&&!__DEBUG__||f("console")&&(console.log("%c\u{1F534} boreDOM: Error in %c<%s>%c init","color: #ff6b6b; font-weight: bold","color: #4ecdc4; font-weight: bold",e,"color: #ff6b6b"),console.error(t))}function it(e){typeof __DEBUG__<"u"&&!__DEBUG__||f("errorHistory")&&(L.set(e.component,e),h=e)}function ge(e){typeof __DEBUG__<"u"&&!__DEBUG__||f("errorHistory")&&(e?(L.delete(e),h?.component===e&&(h=null)):h&&(L.delete(h.component),h=null))}function st(e){typeof __DEBUG__<"u"&&!__DEBUG__||f("visualIndicators")&&e.setAttribute("data-boredom-error","true")}function ye(e){e.removeAttribute("data-boredom-error")}function Ut(e){let t=e?L.get(e):h;if(!t)return null;try{return{component:t.component,state:JSON.parse(JSON.stringify(t.state)),timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}catch(n){return f("console")&&console.warn(`[boreDOM] exportState: Unable to serialize state for <${t.component}>:`,n instanceof Error?n.message:n),{component:t.component,state:"[Unable to serialize - contains circular references or functions]",timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}}var A,L,h,S,$=B(()=>{"use strict";A={console:!0,globals:!0,errorBoundary:!0,visualIndicators:!0,errorHistory:!0,versionLog:!0,api:!0,methodMissing:!0,templateInference:!0,strict:!1,outputFormat:"human",llm:!0},L=new Map,h=null;S={get errors(){return L},get lastError(){return h},rerender(e){let t=e?L.get(e):h;t?t.rerender():console.warn("[boreDOM] No error context found to rerender")},clearError(e){let t=e?L.get(e):h;t?(ye(t.element),ge(e),tt()):f("console")&&console.warn(e?`[boreDOM] clearError: No error found for <${e}>`:"[boreDOM] clearError: No error to clear")},export:Ut,get config(){return H()}}});var he=async e=>{let t=new Map;for(let n=0;n<e.length;++n){let s=Array.from(Se("script[src]")).find(a=>((a.getAttribute("src")??"").split("/").pop()??"")===`${e[n]}.js`)?.getAttribute("src"),o=null;if(s)try{let l=await import(new URL(s,document.baseURI).href);for(let c of Object.keys(l)){o=l[c];break}t.set(e[n],o)}catch(a){console.error(`Unable to import "${s}"`,a)}}return t},Ee=()=>Array.from(Se("template[data-component]")).filter(e=>e instanceof HTMLElement).map(e=>{let t={name:"",attributes:[]};for(let n in e.dataset)n==="component"?t.name=e.dataset[n]??"":t.attributes.push([dt(n),e.dataset[n]??""]);if(t.name==="")throw new Error(`A <template> was found with an invalid data-component: "${e.dataset.component}"`);return t}).map(({name:e,attributes:t})=>(Me(e,{attributes:t}),e)),K=(e,t)=>{let n=v(e);if(!F(n)){let r=`The tag name "${e}" is not a BoreDOM  component.
      
"createComponent" only accepts tag-names with matching <template> tags that have a data-component attribute in them.`;throw console.error(r),new Error(r)}return t&&(n.renderCallback=t),n},ft=e=>{let t=Ce(e);if(!(t===null||!F(t)))return t},Ce=e=>document.querySelector(e),Se=e=>document.querySelectorAll(e),v=(e,t)=>{let n=document.createElement(e);return t&&Array.isArray(t)&&t.length>0&&t.map(r=>n.appendChild(r)),n};var ut=(e,t)=>{document.readyState==="loading"?addEventListener("DOMContentLoaded",()=>dispatchEvent(new CustomEvent(e,{detail:t}))):dispatchEvent(new CustomEvent(e,{detail:t}))};var _e=e=>typeof e=="object",be=e=>typeof e=="function",F=e=>_e(e)&&"isBored"in e&&!!e.isBored;var dt=e=>{if(e===""||!e.split("").some(n=>n!==n.toLowerCase()))return e;let t="";for(let n=0;n<e.length;n++){let r=e[n];r===r.toUpperCase()&&n!==0&&(t+="-"),t+=r.toLowerCase()}return t};var z=e=>e.startsWith("on"),pt=e=>e.startsWith("queriedOn"),q=e=>z(e)?e.slice(2).toLowerCase():e.slice(9).toLowerCase(),J=class extends HTMLElement{},Me=(e,t={})=>{customElements.get(e)||customElements.define(e,class extends J{static get observedAttributes(){return typeof t.attributeChangedCallback=="object"?Object.keys(t.attributeChangedCallback):[]}constructor(){super()}isBored=!0;traverse(n,{traverseShadowRoot:r,query:i}={}){Array.from(r?this.shadowRoot?.querySelectorAll(i??"*")??[]:[]).concat(Array.from(this.querySelectorAll(i??"*"))).filter(s=>s instanceof HTMLElement).forEach(n)}#e(n){return n.split("'").filter(r=>r.length>2&&!(r.includes("(")||r.includes(",")||r.includes(")")))}#t(){let n;this.traverse(r=>{if(r instanceof HTMLElement){customElements.get(r.tagName.toLowerCase())&&(n=r);for(let s=0;s<r.attributes.length;s++){let o=r.attributes[s];if(z(o.name)){let a=this.#e(o.value);a.length>0&&a.forEach(l=>{r.addEventListener(q(o.name),c=>ut(l,{event:c,dispatcher:r,component:this,index:this.parentElement?Array.from(this.parentElement.children).indexOf(this):-1}))}),r.setAttribute(`data-${o.name}-dispatches`,a.join()),r.removeAttribute(o.name)}}}},{traverseShadowRoot:!0})}isInitialized=!1;#n(){let n=Ce(`[data-component="${e}"]`)??v("template"),r=n.getAttribute("shadowrootmode");if(t.style||t.shadow||r){let s=t.shadowrootmode??r??"open",o=this.attachShadow({mode:s});if(t.style){let a=v("style");a.textContent=t.style,o.appendChild(a)}if(t.shadow){let a=v("template");a.innerHTML=t.shadow,o.appendChild(a.content.cloneNode(!0))}else r&&o.appendChild(n.content.cloneNode(!0))}n&&!r&&this.appendChild(n.content.cloneNode(!0)),t.onSlotChange&&this.traverse(s=>{s instanceof HTMLSlotElement&&s.addEventListener("slotchange",o=>t.onSlotChange?.(o))},{traverseShadowRoot:!0}),be(t.onClick)&&this.addEventListener("click",t.onClick);for(let[s,o]of Object.entries(t))if(z(s)){if(!be(o))continue;this.addEventListener(q(s),o)}else if(pt(s)){let a=o;if(!_e(a))continue;let l=q(s);for(let[c,u]of Object.entries(a))this.traverse(d=>{d.addEventListener(l,u)},{traverseShadowRoot:!0,query:c})}t.attributes&&Array.isArray(t.attributes)&&t.attributes.map(([s,o])=>this.setAttribute(s,o)),this.#t(),this.isInitialized=!0}renderCallback=n=>{};connectedCallback(){this.isInitialized||this.#n(),this.renderCallback(this),t.connectedCallback?.(this)}slots=U(this);updateSlot(n,r,i){document.createElement(i).setAttribute("slot",n)}disconnectedCallback(){t.disconnectedCallback?.(this)}adoptedCallback(){t.adoptedCallback?.(this)}attributeChangedCallback(n,r,i){t.attributeChangedCallback&&t.attributeChangedCallback[n]({element:this,name:n,oldValue:r,newValue:i})}})},Q=e=>{Me(e,{})};function we(e,t){let n=t;return t===null||e.forEach(r=>{n=n[r]}),n}function xe(e,t=[]){let n=[{path:[],obj:e}],r=[],i=new WeakSet;for(;n.length>0;){let{path:s,obj:o}=n.pop();if(!i.has(o)){i.add(o);for(let a in o){if(t.includes(a))continue;let l=o[a],c=s.concat(a);typeof l=="object"&&l!==null&&!i.has(l)&&n.push({path:c,obj:l}),r.push({path:c,value:l})}}}return r}function M(e){if(e==null||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);return t==null?!0:t===Object.prototype}function Ae(e,t,n){return(r,i)=>{addEventListener(r,s=>{let o=s?.detail?.event.currentTarget,a;for(;o;){if(o===e){try{let l=i({state:t,e:s.detail,detail:n});Promise.resolve(l).catch(c=>{console.error(`Error in async handler for "${r}" event`,c)})}catch(l){console.error(`Error in handler for "${r}" event`,l)}return}o instanceof HTMLElement?o=o.parentElement:o=void 0}})}}function Le(e){return new Proxy({},{get(t,n,r){let i=new Error(`Ref "${String(n)}" not found in <${e.tagName}>`);if(typeof n=="string"){let s=e.querySelectorAll(`[data-ref="${n}"]`);if(!s)throw i;let o=Array.from(s).filter(a=>a instanceof HTMLElement);if(o.length===0)throw i;return o.length===1?o[0]:o}}})}function U(e){return new Proxy({},{get(t,n,r){let i=new Error(`Slot "${String(n)}" not found in <${e.tagName}>`);if(typeof n=="string"){let s=e.querySelectorAll(`slot[name="${n}"]`);if(!s)throw i;let o=Array.from(s).filter(a=>a instanceof HTMLSlotElement);if(o.length===0)throw i;return o.length===1?o[0]:o}},set(t,n,r){if(typeof n!="string")return!1;let i=r;if(r instanceof HTMLElement)r.setAttribute("data-slot",n);else if(typeof r=="string")i=v("span"),i.setAttribute("data-slot",n),i.innerText=r;else throw new Error(`Invalid value for slot ${n} in <${e.tagName}>`);let s=Array.from(e.querySelectorAll(`[data-slot="${n}"]`));return s.length>0?s.forEach(o=>o.parentElement?.replaceChild(i,o)):Array.from(e.querySelectorAll(`slot[name="${n}"]`)).forEach(a=>a.parentElement?.replaceChild(i,a)),!0}})}function V(e,t,n){let r=n||{targets:new WeakMap,path:[]};if(e!==void 0)return new Proxy(e,{set(i,s,o){return typeof s=="string"&&console.error(`State is read-only for web components. Unable to set '${s}'.`),!1},get(i,s,o){let a=Reflect.get(i,s,o),l=s==="__proto__";if(typeof s=="string"&&!l&&(r.targets.has(i)||(r.targets.set(i,r.path.join(".")),r.path.push(s))),l||Array.isArray(a)||M(a))return V(a,t,r);let c=r.targets.get(i)??"";return typeof c=="string"&&typeof s=="string"&&(Array.isArray(i)||(c+=c!==""?`.${s}`:s),t.indexOf(c)===-1&&t.push(c)),r.path.length=0,r.path.push(c),a}})}function mt(e){return()=>{let t=e.internal.updates,n=new Set,r=i=>{if(i)for(let s=0;s<i.length;s++){let o=i[s];if(!n.has(o)){n.add(o);try{o(e.app)}catch{}}}};for(let i=0;i<t.path.length;i++){let s=t.path[i],o=s.slice(s.indexOf(".")+1);r(t.subscribers.get(o));for(let[a,l]of t.subscribers.entries()){if(a===o)continue;let c=`${a}.`,u=`${o}.`;(o.startsWith(c)||a.startsWith(u))&&r(l)}}t.path=[],t.value=[],t.raf=void 0}}function De(e){let t=e.internal,n=e;if(n===void 0)return e;let r=new WeakSet,i=Symbol("boredom-proxy");function s(a,l){if(r.has(a))return a;let c=new Proxy(a,{get(u,d,p){return d===i?!0:Reflect.get(u,d,p)},set(u,d,p){if(!(u[d]!==p))return!0;if(typeof d=="string"){let g=Array.isArray(a)?l:`${l}.${d}`;!(p&&p[i]===!0)&&(Array.isArray(p)||M(p))&&(p=o(p,g))}return Reflect.set(u,d,p),typeof d!="string"||(Array.isArray(a)?t.updates.path.push(`${l}`):t.updates.path.push(`${l}.${d}`),t.updates.value.push(u),t.updates.raf||(t.updates.raf=requestAnimationFrame(mt(e)))),!0}});return r.add(a),r.add(c),c}function o(a,l){if(!Array.isArray(a)&&!M(a)||r.has(a)||a&&a[i]===!0)return a;if(Array.isArray(a))for(let c=0;c<a.length;c++){let u=a[c];(Array.isArray(u)||M(u))&&(a[c]=o(u,l))}else for(let c of Object.keys(a)){let u=a[c];(Array.isArray(u)||M(u))&&(a[c]=o(u,`${l}.${c}`))}return s(a,l)}return xe(e,["internal"]).forEach(({path:a,value:l})=>{if(Array.isArray(l)||M(l)&&!r.has(l)){let u=a.join("."),d=we(a.slice(0,-1),n);if(d===l)return;d[a.at(-1)]=s(l,u)}}),e}function ve(e){let t=e.internal.customTags.filter(r=>document.querySelector(r)!==null),n=e.internal.components;for(let[r,i]of n.entries()){if(i===null||!t.includes(r))continue;let s=Array.from(document.querySelectorAll(r)).filter(o=>F(o));s.length!==0&&s.forEach((o,a)=>{i(e,{index:a,name:r,data:void 0})(o)})}}function Y(e,t,n){let r=t.internal.components.get(e);if(r){let i={...n,tagName:e};return K(e,r(t,i))}return K(e)}$();j();oe();pe();$();W();W();var at=!1,Gt={get errors(){return S.errors},get lastError(){return S.lastError},rerender:S.rerender,clearError:S.clearError,export:S.export,get config(){return S.config},version:w,define:G.define,operate:G.operate,exportComponent:G.exportComponent,get missingFunctions(){return m.missingFunctions},get lastMissing(){return m.lastMissing},defineHelper:m.defineHelper,get helpers(){return m.helpers},clearHelper:m.clearHelper,clearMissingFunctions:m.clearMissingFunctions,get inferredTemplates(){return m.inferredTemplates},inferTemplate:m.inferTemplate,llm:de};typeof window<"u"&&(window.boreDOM=Gt);async function Mn(e,t,n){n?.debug!==void 0&&me(n.debug),!at&&f("versionLog")&&(at=!0,typeof console<"u"&&typeof console.info=="function"&&console.info(`[boreDOM] v${w}`));let r=Ee(),i=await he(r);if(t)for(let a of Object.keys(t))i.set(a,t[a]);let o=De({app:e,internal:{customTags:r,components:i,updates:{path:[],value:[],raf:void 0,subscribers:new Map}}});return o.internal.updates.path=[],o.internal.updates.value=[],o.internal.updates.raf&&(cancelAnimationFrame(o.internal.updates.raf),o.internal.updates.raf=void 0),$e(o,jt,Q),ve(o),Ue(),o.app}function jt(e){let t=null,n,r=(i,s)=>o=>{let{internal:a,app:l}=i,c=[],u=V(l,c),d=Le(o),p=U(o),R=Ae(o,l,s);if(t!==o){let g=async()=>{let E=a.updates.subscribers;for(let C of c){let D=E.get(C);D?D.includes(n)||D.push(n):E.set(C,[n])}},T;try{T=e({detail:s,state:u,refs:d,on:R,self:o})}catch(E){let C=E;f("console")&&ot(s?.name??o.tagName.toLowerCase(),C),T=()=>{}}n=E=>{let C=s?.name??o.tagName.toLowerCase(),D=He(C,o,()=>n(E));if(f("errorBoundary"))try{T({state:E,refs:d,slots:p,self:o,detail:s,makeComponent:(I,_)=>Y(I,i,_?.detail),helpers:D}),g(),ye(o),ge(C)}catch(I){let _=I,N={component:C,element:o,error:_,state:l,refs:d,slots:p,timestamp:Date.now(),rerender:()=>n(E),stack:_.stack??""};f("console")?nt(N):rt(C,_),et(N),it(N),st(o)}else T({state:E,refs:d,slots:p,self:o,detail:s,makeComponent:(I,_)=>Y(I,i,_?.detail),helpers:D}),g()},ke(o,{state:l,refs:d,slots:p,self:o,detail:s,rerender:()=>n(l)})}n(u),t=o};return r[ee]=!0,r}export{w as VERSION,Gt as boreDOM,tt as clearGlobals,Mn as inflictBoreDOM,f as isDebugEnabled,ft as queryComponent,Q as registerComponent,me as setDebugConfig,jt as webComponent};
