var R=typeof __LLM__<"u"&&__LLM__,pe=e=>e.split("'").filter(t=>t.length>2&&!(t.includes("(")||t.includes(",")||t.includes(")"))),ue=e=>e.split(/[\s,]+/g).map(t=>t.trim()).filter(Boolean),J=R?ue:e=>{let t=e.trim();return t.length===0?[]:t.includes("dispatch(")||t.includes("'")?pe(e):ue(e)},me=async e=>{let t=new Map;for(let r=0;r<e.length;++r){let s=Array.from(ye("script[src]")).find(a=>((a.getAttribute("src")??"").split("/").pop()??"")===`${e[r]}.js`)?.getAttribute("src"),i=null;if(s)try{let l=await import(new URL(s,document.baseURI).href);for(let p of Object.keys(l)){i=l[p];break}t.set(e[r],i)}catch(a){console.error(`Unable to import "${s}"`,a)}}return t},ge=async(e,t)=>{let r=!R&&(t?.mirrorAttributes??!0),o=[],n=new Map,s=Array.from(ye("template[data-component]")).filter(i=>i instanceof HTMLElement);for(let i of s){let a="",l=[];for(let p in i.dataset)p==="component"?a=i.dataset[p]??"":r&&l.push([et(p),i.dataset[p]??""]);if(!a){console.error("Invalid <template> found: missing data-component",i);continue}if(Ze(i)){let p=i.content.querySelector("script");if(p){let c=p.textContent;if(c&&c.trim().length>0)try{let f=new Blob([c],{type:"text/javascript"}),u=URL.createObjectURL(f),y=await import(u);URL.revokeObjectURL(u),p.remove();let m=null;if(y.default)m=y.default;else{let d=Object.keys(y);d.length>0&&(m=y[d[0]])}if(m){let d=e?e(m):m;n.set(a,d)}}catch{}}}he(a,{attributes:l}),o.push(a)}return{names:o,inlineLogic:n}},Y=(e,t)=>{let r=D(e);if(!N(r)){let o=`The tag name "${e}" is not a BoreDOM  component.
      
"createComponent" only accepts tag-names with matching <template> tags that have a data-component attribute in them.`;throw console.error(o),new Error(o)}return t&&(r.renderCallback=t),r},Ye=e=>{let t=K(e);if(!(t===null||!N(t)))return t},K=e=>document.querySelector(e),ye=e=>document.querySelectorAll(e),D=(e,t)=>{let r=document.createElement(e);return t&&Array.isArray(t)&&t.length>0&&t.map(o=>r.appendChild(o)),r};var Z=(e,t)=>{document.readyState==="loading"?addEventListener("DOMContentLoaded",()=>dispatchEvent(new CustomEvent(e,{detail:t}))):dispatchEvent(new CustomEvent(e,{detail:t}))};var Ze=e=>e instanceof HTMLTemplateElement,be=e=>typeof e=="object",de=e=>typeof e=="function",N=e=>be(e)&&"isBored"in e&&!!e.isBored;var et=e=>{if(e===""||!e.split("").some(r=>r!==r.toLowerCase()))return e;let t="";for(let r=0;r<e.length;r++){let o=e[r];o===o.toUpperCase()&&r!==0&&(t+="-"),t+=o.toLowerCase()}return t},Q=e=>e.startsWith("on"),tt=e=>e.startsWith("queriedOn"),V=e=>Q(e)?e.slice(2).toLowerCase():e.slice(9).toLowerCase(),X=class extends HTMLElement{},he=(e,t={})=>{if(customElements.get(e))return;let r=(c,f,{traverseShadowRoot:u,query:y}={})=>{Array.from(u?c.shadowRoot?.querySelectorAll(y??"*")??[]:[]).concat(Array.from(c.querySelectorAll(y??"*"))).filter(d=>d instanceof HTMLElement).forEach(f)},o=(c,f,u,y)=>{y.length!==0&&y.forEach(m=>{f.addEventListener(u,d=>Z(m,{event:d,dispatcher:f,component:c,index:c.parentElement?Array.from(c.parentElement.children).indexOf(c):-1}))})},i=R?c=>{r(c,f=>{for(let u=0;u<f.attributes.length;u++){let y=f.attributes[u],m=y.name;if(m==="data-dispatch"||m.startsWith("data-dispatch-")){let d=m==="data-dispatch"?"click":m.slice(14);o(c,f,d,J(y.value)),f.removeAttribute(m)}}},{traverseShadowRoot:!0})}:c=>{r(c,f=>{for(let u=0;u<f.attributes.length;u++){let y=f.attributes[u],m=y.name;if(m.startsWith("on-")){let d=m.slice(3);o(c,f,d,J(y.value)),f.removeAttribute(m);continue}if(m==="data-dispatch"||m.startsWith("data-dispatch-")){let d=m==="data-dispatch"?"click":m.slice(14);o(c,f,d,J(y.value)),f.removeAttribute(m);continue}if(Q(m)){let d=pe(y.value);d.length>0&&o(c,f,V(m),d),f.setAttribute(`data-${m}-dispatches`,d.join()),f.removeAttribute(m)}}},{traverseShadowRoot:!0})},p=R?c=>{let f=K(`[data-component="${e}"]`)??D("template");c.appendChild(f.content.cloneNode(!0)),t.attributes&&Array.isArray(t.attributes)&&t.attributes.forEach(([u,y])=>c.setAttribute(u,y)),i(c),c.isInitialized=!0}:c=>{let f=K(`[data-component="${e}"]`)??D("template"),u=f.getAttribute("shadowrootmode");if(t.style||t.shadow||u){let m=t.shadowrootmode??u??"open",d=c.attachShadow({mode:m});if(t.style){let b=D("style");b.textContent=t.style,d.appendChild(b)}if(t.shadow){let b=D("template");b.innerHTML=t.shadow,d.appendChild(b.content.cloneNode(!0))}else u&&d.appendChild(f.content.cloneNode(!0))}f&&!u&&c.appendChild(f.content.cloneNode(!0)),t.onSlotChange&&r(c,m=>{m instanceof HTMLSlotElement&&m.addEventListener("slotchange",d=>t.onSlotChange?.(d))},{traverseShadowRoot:!0}),de(t.onClick)&&c.addEventListener("click",t.onClick);for(let[m,d]of Object.entries(t))if(Q(m)){if(!de(d))continue;c.addEventListener(V(m),d)}else if(tt(m)){let b=d;if(!be(b))continue;let E=V(m);for(let[S,h]of Object.entries(b))r(c,_=>{_.addEventListener(E,h)},{traverseShadowRoot:!0,query:S})}t.attributes&&Array.isArray(t.attributes)&&t.attributes.forEach(([m,d])=>c.setAttribute(m,d)),i(c),c.isInitialized=!0};customElements.define(e,class extends X{static get observedAttributes(){return typeof t.attributeChangedCallback=="object"?Object.keys(t.attributeChangedCallback):[]}constructor(){super()}isBored=!0;isInitialized=!1;traverse(c,f={}){r(this,c,f)}renderCallback=c=>{};connectedCallback(){this.isInitialized||p(this),this.renderCallback(this),t.connectedCallback?.(this)}disconnectedCallback(){t.disconnectedCallback?.(this)}adoptedCallback(){t.adoptedCallback?.(this)}attributeChangedCallback(c,f,u){t.attributeChangedCallback&&t.attributeChangedCallback[c]({element:this,name:c,oldValue:f,newValue:u})}})},ee=e=>{he(e,{})};function I(e,t){let r=t;return t===null||e.forEach(o=>{r=r[o]}),r}function F(e,t=[]){let r=[{path:[],obj:e}],o=[],n=new WeakSet;for(;r.length>0;){let{path:s,obj:i}=r.pop();if(!n.has(i)){n.add(i);for(let a in i){if(t.includes(a))continue;let l=i[a],p=s.concat(a);typeof l=="object"&&l!==null&&!n.has(l)&&r.push({path:p,obj:l}),o.push({path:p,value:l})}}}return o}function O(e){if(e==null||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);return t==null?!0:t===Object.prototype}var nt=e=>{let t={};for(let[r,o]of Object.entries(e.dataset))r.startsWith("prop")||o!==void 0&&(t[r]=o);return t};function Ee(e,t,r){return(o,n)=>{addEventListener(o,s=>{let i=s?.detail?.event.currentTarget,a;for(;i;){if(i===e){try{let l=n({state:t,e:s.detail,detail:r});Promise.resolve(l).catch(p=>{console.error(`Error in async handler for "${o}" event`,p)})}catch(l){console.error(`Error in handler for "${o}" event`,l)}return}i instanceof HTMLElement?i=i.parentElement:i=void 0}})}}function _e(e){return new Proxy({},{get(t,r,o){let n=new Error(`Ref "${String(r)}" not found in <${e.tagName}>`);if(typeof r=="string"){let s=e.querySelectorAll(`[data-ref="${r}"]`);if(!s)throw n;let i=Array.from(s).filter(a=>a instanceof HTMLElement);if(i.length===0)throw n;return i.length===1?i[0]:i}}})}function Se(e){return new Proxy({},{get(t,r,o){let n=new Error(`Slot "${String(r)}" not found in <${e.tagName}>`);if(typeof r=="string"){let s=e.querySelectorAll(`slot[name="${r}"]`);if(!s)throw n;let i=Array.from(s).filter(a=>a instanceof HTMLSlotElement);if(i.length===0)throw n;return i.length===1?i[0]:i}},set(t,r,o){if(typeof r!="string")return!1;let n=o;if(o instanceof HTMLElement)o.setAttribute("data-slot",r);else if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")n=D("span"),n.setAttribute("data-slot",r),n.innerText=String(o);else throw new Error(`Invalid value for slot ${r} in <${e.tagName}>`);let s=Array.from(e.querySelectorAll(`[data-slot="${r}"]`));return s.length>0?s.forEach(i=>i.parentElement?.replaceChild(n,i)):Array.from(e.querySelectorAll(`slot[name="${r}"]`)).forEach(a=>a.parentElement?.replaceChild(n,a)),!0}})}function U(e,t,r=!1,o){let n=o||{targets:new WeakMap,path:[]};if(e!==void 0)return new Proxy(e,{set(s,i,a){return r?Reflect.set(s,i,a):(typeof i=="string"&&console.error(`State is read-only for web components. Unable to set '${i}'.`),!1)},get(s,i,a){let l=Reflect.get(s,i,a),p=i==="__proto__";if(typeof i=="string"&&!p){n.targets.has(s)||n.targets.set(s,n.path.join("."));let f=n.targets.get(s);n.path.length=0,typeof f=="string"&&f!==""&&n.path.push(...f.split(".")),n.path.push(i)}if(p||Array.isArray(l)||O(l))return!n.targets.has(l)&&typeof i=="string"&&n.targets.set(l,n.path.join(".")),U(l,t,r,n);let c=n.targets.get(s)??"";return typeof c=="string"&&typeof i=="string"&&(Array.isArray(s)||(c+=c!==""?`.${i}`:i),t.indexOf(c)===-1&&t.push(c)),n.path.length=0,n.path.push(c),l}})}function rt(e){return()=>{let t=e.internal.updates,r=new Set,o=n=>{if(n)for(let s=0;s<n.length;s++){let i=n[s];if(!r.has(i)){r.add(i);try{i(e.app)}catch{}}}};for(let n=0;n<t.path.length;n++){let s=t.path[n],i=s.slice(s.indexOf(".")+1);o(t.subscribers.get(i));for(let[a,l]of t.subscribers.entries()){if(a===i)continue;let p=`${a}.`,c=`${i}.`;(i.startsWith(p)||a.startsWith(c))&&o(l)}}t.path=[],t.value=[],t.raf=void 0}}function Me(e){let t=e.internal,r=e;if(r===void 0)return e;let o=new WeakSet,n=Symbol("boredom-proxy");function s(a,l){if(o.has(a))return a;let p=new Proxy(a,{get(c,f,u){return f===n?!0:Reflect.get(c,f,u)},set(c,f,u){if(!(c[f]!==u))return!0;if(typeof f=="string"){let m=Array.isArray(a)?l:`${l}.${f}`;!(u&&u[n]===!0)&&(Array.isArray(u)||O(u))&&(u=i(u,m))}return Reflect.set(c,f,u),typeof f!="string"||(Array.isArray(a)?t.updates.path.push(`${l}`):t.updates.path.push(`${l}.${f}`),t.updates.value.push(c),t.updates.raf||(t.updates.raf=requestAnimationFrame(rt(e)))),!0}});return o.add(a),o.add(p),p}function i(a,l){if(!Array.isArray(a)&&!O(a)||o.has(a)||a&&a[n]===!0)return a;if(Array.isArray(a))for(let p=0;p<a.length;p++){let c=a[p];(Array.isArray(c)||O(c))&&(a[p]=i(c,l))}else for(let p of Object.keys(a)){let c=a[p];(Array.isArray(c)||O(c))&&(a[p]=i(c,`${l}.${p}`))}return s(a,l)}return F(e,["internal"]).forEach(({path:a,value:l})=>{if(Array.isArray(l)||O(l)&&!o.has(l)){let c=a.join("."),f=I(a.slice(0,-1),r);if(f===l)return;f[a.at(-1)]=s(l,c)}}),e}function Ae(e){let t=e.internal.customTags.filter(o=>document.querySelector(o)!==null),r=e.internal.components;for(let[o,n]of r.entries()){if(n===null||!t.includes(o))continue;let s=Array.from(document.querySelectorAll(o)).filter(i=>N(i));s.length!==0&&s.forEach((i,a)=>{if(i.isBoredInitialized)return;let l={index:a,name:o,data:nt(i)};n(e,l)(i),i.__boreDOMDetail=l,i.isBoredInitialized=!0})}}function j(e,t,r){let o=t.internal.components.get(e);if(o){let n={...r,tagName:e};n.data||(n.data={});let s=Y(e,o(t,n));return s.__boreDOMDetail=n,s}return Y(e)}var L={console:!0,globals:!0,errorBoundary:!0,visualIndicators:!0,errorHistory:!0,versionLog:!0,api:!0,methodMissing:!0,templateInference:!0,strict:!1,outputFormat:"human",llm:!0},v=new Map,M=null;function g(e){if(typeof __DEBUG__<"u"&&!__DEBUG__)return e==="errorBoundary"?L.errorBoundary??!0:!1;let t=L[e];return e==="strict"?t??!1:t??!0}function P(e){if(typeof e=="boolean"){let t=e;L={console:t,globals:t,errorBoundary:!0,visualIndicators:t,errorHistory:t,versionLog:t,api:t,methodMissing:t,templateInference:t,strict:!1,outputFormat:"human",llm:t}}else L={...L,...e}}function Ce(){return{...L}}function we(e){if(typeof __DEBUG__<"u"&&!__DEBUG__||!g("globals")||typeof window>"u")return;let t=window;t.$state=e.state,t.$refs=e.refs,t.$slots=e.slots,t.$self=e.element,t.$error=e.error,t.$component=e.component,t.$rerender=e.rerender}function xe(){if(typeof __DEBUG__<"u"&&!__DEBUG__||!g("globals")||typeof window>"u")return;let e=window;delete e.$state,delete e.$refs,delete e.$slots,delete e.$self,delete e.$error,delete e.$component,delete e.$rerender}function De(e){if(!(typeof __DEBUG__<"u"&&!__DEBUG__)&&g("console")){if(L.outputFormat==="llm"){console.log(JSON.stringify({type:"error",component:e.component,message:e.error?.message,stack:e.error?.stack}));return}console.log("%c\u{1F534} boreDOM: Error in %c<%s>%c render","color: #ff6b6b; font-weight: bold","color: #4ecdc4; font-weight: bold",e.component,"color: #ff6b6b"),console.error(e.error),g("globals")&&(console.log("%c\u{1F4CB} Debug context loaded:","color: #95a5a6; font-weight: bold"),console.log("   $state     \u2192",e.state),console.log("   $refs      \u2192",e.refs),console.log("   $slots     \u2192",e.slots),console.log("   $self      \u2192",e.element),console.log("%c\u{1F4A1} Quick fixes:","color: #f39c12; font-weight: bold"),console.log("   $state.propertyName = value"),console.log("   $rerender()"),console.log("%c\u{1F4E4} When fixed:","color: #27ae60; font-weight: bold"),console.log(`   boreDOM.export('${e.component}')`))}}function Oe(e,t){console.error(`[boreDOM] Render error in <${e}>: ${t.message}`)}function Le(e,t){typeof __DEBUG__<"u"&&!__DEBUG__||g("console")&&(console.log("%c\u{1F534} boreDOM: Error in %c<%s>%c init","color: #ff6b6b; font-weight: bold","color: #4ecdc4; font-weight: bold",e,"color: #ff6b6b"),console.error(t))}function ve(e){typeof __DEBUG__<"u"&&!__DEBUG__||g("errorHistory")&&(v.set(e.component,e),M=e)}function te(e){typeof __DEBUG__<"u"&&!__DEBUG__||g("errorHistory")&&(e?(v.delete(e),M?.component===e&&(M=null)):M&&(v.delete(M.component),M=null))}function Te(e){typeof __DEBUG__<"u"&&!__DEBUG__||g("visualIndicators")&&e.setAttribute("data-boredom-error","true")}function ne(e){e.removeAttribute("data-boredom-error")}function ot(e){let t=e?v.get(e):M;if(!t)return null;try{return{component:t.component,state:JSON.parse(JSON.stringify(t.state)),timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}catch(r){return g("console")&&console.warn(`[boreDOM] exportState: Unable to serialize state for <${t.component}>:`,r instanceof Error?r.message:r),{component:t.component,state:"[Unable to serialize - contains circular references or functions]",timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}}var T={get errors(){return v},get lastError(){return M},rerender(e){let t=e?v.get(e):M;t?t.rerender():console.warn("[boreDOM] No error context found to rerender")},clearError(e){let t=e?v.get(e):M;t?(ne(t.element),te(e),xe()):g("console")&&console.warn(e?`[boreDOM] clearError: No error found for <${e}>`:"[boreDOM] clearError: No error to clear")},export:ot,get config(){return Ce()}};var B=Symbol("boreDOM.webComponent"),Be=null,$e=null,ke=null;function re(e,t,r){Be=e,t&&($e=t),r&&(ke=r)}function C(){return Be}function He(){return $e}function Re(){return ke}var Ne=new WeakMap;function Ie(e,t){typeof __DEBUG__<"u"&&!__DEBUG__||g("api")&&Ne.set(e,t)}function it(e){return typeof e=="function"&&e[B]===!0}function oe(e,t,r){if(typeof __DEBUG__<"u"&&!__DEBUG__)return console.warn("[boreDOM] define() is not available in production build"),!1;if(!g("api"))return console.warn("[boreDOM] define() is disabled (debug.api is false)"),!1;let o=C();if(!o)throw new Error("[boreDOM] Cannot define component before inflictBoreDOM()");if(!e.includes("-"))throw new Error(`[boreDOM] Invalid tag name "${e}": must contain a hyphen`);if(customElements.get(e))throw new Error(`[boreDOM] Component "${e}" is already defined`);let n=He(),s=Re();if(!n||!s)throw new Error("[boreDOM] Console API not initialized. Call inflictBoreDOM() first.");let i=document.createElement("template");i.innerHTML=t,i.setAttribute("data-component",e),document.body.appendChild(i);let a=it(r)?r:n(r);return o.internal.components.set(e,a),o.internal.customTags.push(e),s(e),st(e,a),g("console")&&console.log("%c\u2705 boreDOM: Defined %c<%s>","color: #27ae60; font-weight: bold","color: #4ecdc4; font-weight: bold",e),!0}function st(e,t){let r=C();if(!r)return;let o=Array.from(document.querySelectorAll(e)),n={count:0};o.forEach((s,i)=>{if(s instanceof HTMLElement&&"renderCallback"in s)try{let l=t(r,{index:i,name:e,data:void 0});s.renderCallback=l,l(s)}catch(a){n.count++,g("console")&&console.error(`[boreDOM] Failed to initialize <${e}> instance ${i}:`,a)}}),n.count>0&&g("console")&&console.warn(`[boreDOM] ${n.count} of ${o.length} <${e}> instances failed to initialize`)}function Fe(e,t=0){if(typeof __DEBUG__<"u"&&!__DEBUG__){console.warn("[boreDOM] operate() is not available in production build");return}if(!g("api")){console.warn("[boreDOM] operate() is disabled (debug.api is false)");return}let r=null;if(typeof e=="string"?r=Array.from(document.querySelectorAll(e)).filter(s=>s instanceof HTMLElement)[t]??null:r=e,!r){g("console")&&console.warn(`[boreDOM] operate(): No element found for "${e}"`);return}let o=Ne.get(r);if(!o){g("console")&&console.warn("[boreDOM] operate(): Element is not a boreDOM component or not initialized");return}return o}function at(e){if(typeof __DEBUG__<"u"&&!__DEBUG__)return console.warn("[boreDOM] exportComponent() is not available in production build"),null;if(!g("api"))return console.warn("[boreDOM] exportComponent() is disabled (debug.api is false)"),null;let t=Fe(e);if(!t)return null;let o=document.querySelector(`template[data-component="${t.detail.name}"]`)?.innerHTML??void 0;try{return{component:t.detail.name,state:JSON.parse(JSON.stringify(t.state)),template:o,timestamp:new Date().toISOString()}}catch(n){return g("console")&&console.warn(`[boreDOM] exportComponent: Unable to serialize state for <${t.detail.name}>:`,n instanceof Error?n.message:n),{component:t.detail.name,state:"[Unable to serialize - contains circular references or functions]",template:o,timestamp:new Date().toISOString()}}}var W={define:oe,operate:Fe,exportComponent:at};var $=new Map,G=new Map,se=null,je=new Map,ie=null;function Pe(e,t,r){return typeof __DEBUG__<"u"&&!__DEBUG__?{}:g("methodMissing")?new Proxy({},{get(o,n){if(!(typeof n=="symbol"||n==="then"||n==="toJSON")){if($.has(n)){let s=$.get(n);return(...i)=>s(...i)}return(...s)=>{let i={name:n,args:s,component:e,element:t,timestamp:Date.now(),define:a=>{We(n,a),r()}};ft(i),ut(i),dt(i)}}},has(o,n){return typeof n=="string"&&$.has(n)}}):{}}function We(e,t){typeof __DEBUG__<"u"&&!__DEBUG__||g("methodMissing")&&($.set(e,t),g("console")&&console.log("%c\u2705 boreDOM: Defined helper %c%s","color: #27ae60; font-weight: bold","color: #9b59b6; font-weight: bold",e))}function lt(e){$.delete(e)}function ct(){G.clear(),se=null}function ft(e){g("console")&&(console.log("%c\u26A0\uFE0F boreDOM: Missing function %c%s%c in <%s>","color: #f39c12; font-weight: bold","color: #9b59b6; font-weight: bold",e.name,"color: #f39c12",e.component),e.args.length>0&&console.log("   Arguments:",e.args),console.log("%c\u{1F4A1} Define it:","color: #3498db; font-weight: bold"),console.log(`   $defineMissing((${Ue(e.args)}) => { ... })`),console.log(`   boreDOM.defineHelper('${e.name}', (${Ue(e.args)}) => { ... })`))}function Ue(e){return e.length===0?"":e.map((t,r)=>t==null?`arg${r}`:Array.isArray(t)?"items":typeof t=="object"?"name"in t&&"email"in t?"user":"id"in t&&"title"in t?"item":"id"in t?"record":"data":typeof t=="string"?"text":typeof t=="number"?"count":typeof t=="boolean"?"flag":`arg${r}`).join(", ")}function ut(e){if(!g("errorHistory"))return;let t=G.get(e.name)||[];t.length>=10&&t.shift(),t.push(e),G.set(e.name,t),se=e}function dt(e){if(!g("globals")||typeof window>"u")return;let t=window;t.$missingName=e.name,t.$missingArgs=e.args,t.$missingComponent=e.component,t.$defineMissing=e.define}function Ge(e,t){if(typeof __DEBUG__<"u"&&!__DEBUG__||!g("templateInference")||g("strict"))return null;let r={},o=[];if(t){for(let a of Array.from(t.attributes)){if(a.name.startsWith("data-")||["class","id","style"].includes(a.name))continue;let l=gt(a.name);r[l]=yt(a.value)}for(let a of Array.from(t.children)){let l=a.getAttribute("slot");l&&!o.includes(l)&&o.push(l)}}let n=Object.keys(r).map(a=>`    <slot name="${ze(a)}">${bt(r[a])}</slot>`).join(`
`),s=o.length===0&&Object.keys(r).length===0?'    <slot name="content">Loading...</slot>':"",i=`<div class="${e}-skeleton" data-inferred>
${n||s}
  </div>`;return{tagName:e,template:i,props:r,slots:o}}function pt(e,t){if(typeof __DEBUG__<"u"&&!__DEBUG__||!g("templateInference")||customElements.get(e)||!C())return!1;let r=Ge(e,t);if(!r)return!1;let{template:o,props:n}=r;je.set(e,r),mt(e,n);try{return oe(e,o,({state:s})=>({slots:i})=>{g("console")&&(console.log("%c\u{1F52E} boreDOM: Inferred <%s> rendering","color: #9b59b6; font-weight: bold",e),console.log("   Inferred props:",n),console.log("   App state:",s));for(let[a,l]of Object.entries(n)){let p=ze(a);i[p]&&(i[p]=String(l))}}),!0}catch(s){return g("console")&&console.warn(`[boreDOM] Failed to register inferred <${e}>:`,s),!1}}function mt(e,t){if(g("console")){if(console.log("%c\u{1F52E} boreDOM: Inferring template for %c<%s>","color: #9b59b6; font-weight: bold","color: #4ecdc4; font-weight: bold",e),Object.keys(t).length>0){console.log("%c\u{1F4CB} Inferred props from attributes:","color: #95a5a6");for(let[r,o]of Object.entries(t))console.log(`   ${r}: ${JSON.stringify(o)}`)}console.log("%c\u{1F4A1} Define properly with:","color: #3498db; font-weight: bold"),console.log(`   boreDOM.define('${e}', '<your template>', ({ state }) => ({ slots }) => { ... })`)}}function qe(){typeof __DEBUG__<"u"&&!__DEBUG__||g("templateInference")&&(typeof window>"u"||ie||(ie=new MutationObserver(e=>{for(let t of e)for(let r of Array.from(t.addedNodes))if(r instanceof HTMLElement&&r.tagName.includes("-")){let o=r.tagName.toLowerCase();customElements.get(o)||document.querySelector(`template[data-component="${o}"]`)||queueMicrotask(()=>{customElements.get(o)||pt(o,r)})}}),ie.observe(document.body,{childList:!0,subtree:!0})))}function gt(e){return e.replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function ze(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function yt(e){if(e==="true")return!0;if(e==="false")return!1;let t=Number(e);if(!isNaN(t)&&e!=="")return t;if(e.startsWith("{")||e.startsWith("["))try{return JSON.parse(e)}catch{return e}return e}function bt(e){return e==null?"":typeof e=="object"?JSON.stringify(e):String(e)}var w={get missingFunctions(){return G},get lastMissing(){return se},defineHelper:We,get helpers(){return new Map($)},clearHelper:lt,clearMissingFunctions:ct,get inferredTemplates(){return je},inferTemplate:Ge};var ht=new Set(["script","style","noscript","template","link","meta","head","title"]),Et=new Set(["id","class","type","value","checked","disabled","placeholder","href","src","alt","title","role"]);function _t(e){return!(e.hasAttribute("hidden")||e.style.display==="none"||e.style.visibility==="hidden"||e.getAttribute("aria-hidden")==="true")}function ae(e){if(!(e instanceof HTMLElement))return null;let t=e.tagName.toLowerCase();if(ht.has(t)||!_t(e))return null;let r={tagName:t},o={},n=!1;for(let a of Array.from(e.attributes)){let l=a.name;(Et.has(l)||l.startsWith("aria-")||l.startsWith("data-"))&&(l==="checked"||l==="disabled"?o[l]=e[l]:l==="value"&&(t==="input"||t==="textarea"||t==="select")?o[l]=e.value:o[l]=a.value,n=!0)}n&&(r.attributes=o);let s="";for(let a of Array.from(e.childNodes))if(a.nodeType===Node.TEXT_NODE){let l=a.nodeValue?.trim();l&&(s+=l+" ")}s=s.trim(),s&&(r.text=s);let i=[];for(let a of Array.from(e.children)){let l=ae(a);l&&i.push(l)}return i.length>0&&(r.children=i),t==="div"&&!n&&!s&&i.length===0?null:r}function Ve(e,t){let r=[];try{for(let o of t){let n=Je(e,o);n&&r.push(n)}return{success:!0}}catch(o){for(let n=r.length-1;n>=0;n--)try{Je(e,r[n])}catch(s){console.error("Critical: Rollback failed",s)}return{success:!1,error:o.message||String(o)}}}function Ke(e,t){if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null||Array.isArray(e)!==Array.isArray(t))return!1;let r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(let n of r)if(!o.includes(n)||!Ke(e[n],t[n]))return!1;return!0}function St(e){return e===""?[]:e==="/"?[""]:e.split("/").slice(1).map(t=>t.replace(/~1/g,"/").replace(/~0/g,"~"))}function Je(e,t){let r=St(t.path);if(r.length===0)throw new Error("Cannot operate on root state directly");let o=r.pop(),n=e;for(let s of r){if(n==null)throw new Error(`Path not found: ${t.path}`);if(Array.isArray(n)){let i=parseInt(s,10);if(isNaN(i))throw new Error(`Invalid array index: ${s}`);n=n[i]}else n=n[s]}if(n==null)throw new Error(`Path not found: ${t.path}`);if(t.op==="test"){let s;if(Array.isArray(n))if(o==="-")s=void 0;else{let i=parseInt(o,10);isNaN(i)||i<0||i>=n.length?s=void 0:s=n[i]}else s=n[o];if(!Ke(s,t.value))throw new Error(`Test failed at ${t.path}: expected ${JSON.stringify(t.value)}, got ${JSON.stringify(s)}`);return null}if(Array.isArray(n)){if(o==="-"){if(t.op==="add")return n.push(t.value),{op:"remove",path:t.path.replace(/-$/,(n.length-1).toString())};throw new Error("Can only add to '-' index")}let s=parseInt(o,10);if(isNaN(s)||s<0)throw new Error(`Invalid array index: ${o}`);if(t.op==="add"){if(s>n.length)throw new Error("Index out of bounds");return n.splice(s,0,t.value),{op:"remove",path:t.path}}else if(t.op==="remove"){if(s>=n.length)throw new Error("Index out of bounds");let i=n[s];return n.splice(s,1),{op:"add",path:t.path,value:i}}else if(t.op==="replace"){if(s>=n.length)throw new Error("Index out of bounds");let i=n[s];return n[s]=t.value,{op:"replace",path:t.path,value:i}}}else if(t.op==="add"){let s=n[o],i=Object.prototype.hasOwnProperty.call(n,o);return n[o]=t.value,i?{op:"replace",path:t.path,value:s}:{op:"remove",path:t.path}}else if(t.op==="replace"){if(!Object.prototype.hasOwnProperty.call(n,o))throw new Error(`Path not found: ${t.path}`);let s=n[o];return n[o]=t.value,{op:"replace",path:t.path,value:s}}else if(t.op==="remove"){if(!Object.prototype.hasOwnProperty.call(n,o))throw new Error(`Path not found: ${t.path}`);let s=n[o];return delete n[o],{op:"add",path:t.path,value:s}}return null}var k="0.25.25";var le=typeof __LLM__<"u"?__LLM__:typeof __DEBUG__>"u"||__DEBUG__,Mt=e=>ae(e||document.body),At=e=>{let t=C();return!t||!t.app?{success:!1,error:"No app state found"}:Ve(t.app,e)},Qe={vision:le?Mt:()=>null,transact:le?At:()=>({success:!1,error:"Production mode"}),compact:le?()=>{let e=C();if(!e||!e.app)return null;let t=e.app,r=F(t).map(s=>s.path.join(".")),o={};Object.entries(t).forEach(([s,i])=>{Array.isArray(i)?o[s]=`[${i.length}]`:i&&typeof i=="object"?o[s]="{...}":o[s]=i});let n=Array.from(e.internal.components.entries()).map(([s,i])=>({tag:s,hasLogic:!!i}));return{framework:{name:"boreDOM",version:k},state:{paths:r,sample:o},components:n}}:()=>null};var Ct=e=>e.replace(/-([a-z])/g,(t,r)=>r.toUpperCase()),wt=e=>e.replace(/\[(\d+)\]/g,".$1").replace(/^\./,"").split(".").filter(Boolean),H=(e,t)=>{if(e==null)return;let r=wt(t);return r.length===0?e:I(r,e)},x=(e,t)=>{let r=e.trim();if(r)return r==="index"||r==="i"?t.index:r==="item"?t.item:r==="detail"?t.detail:r==="self"?t.self:r.startsWith("state.")?H(t.state,r.slice(6)):r.startsWith("item.")?H(t.item,r.slice(5)):r.startsWith("detail.")?H(t.detail,r.slice(7)):r.startsWith("self.")?H(t.self,r.slice(5)):H(t.state,r)},xt=e=>{let t=e.getAttribute("data-class-base");if(t!==null)return t;let r=e.className;return e.setAttribute("data-class-base",r),r},Dt=(e,t,r)=>{let o=xt(e);if(t.includes(":")){let s=[];t.split(",").forEach(a=>{let[l,p]=a.split(":").map(c=>c.trim());!l||!p||x(p,r)&&s.push(l)});let i=[o,...s].filter(Boolean).join(" ").trim();e.className=i;return}let n=x(t,r);if(typeof n=="string")e.className=[o,n].filter(Boolean).join(" ").trim();else if(Array.isArray(n))e.className=[o,n.join(" ")].filter(Boolean).join(" ").trim();else if(n&&typeof n=="object"){let s=Object.entries(n).filter(([,i])=>!!i).map(([i])=>i);e.className=[o,...s].filter(Boolean).join(" ").trim()}else e.className=o.trim()},q=(e,t)=>{let r=[];if(e instanceof DocumentFragment){let n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;n.nextNode();)r.push(n.currentNode)}else r.push(e),e.traverse(n=>{r.push(n)},{traverseShadowRoot:!0});let o=t.item===void 0;r.forEach(n=>{if(n instanceof HTMLTemplateElement||o&&n.closest("[data-list-item]"))return;let s=n.getAttribute("data-list");if(s){let u=n.querySelector("template[data-item]");if(u instanceof HTMLTemplateElement){let y=x(s,t),m=Array.isArray(y)?y:[];Array.from(n.children).forEach(b=>{b.hasAttribute("data-list-item")&&b.remove()});let d=document.createDocumentFragment();m.forEach((b,E)=>{let S=u.content.cloneNode(!0);Array.from(S.childNodes).forEach(h=>{h.nodeType===Node.ELEMENT_NODE&&h.setAttribute("data-list-item","")}),q(S,{...t,item:b,index:E}),d.appendChild(S)}),n.appendChild(d)}}let i=n.getAttribute("data-text");if(i){let u=x(i,t);n.textContent=u==null?"":String(u)}let a=n.getAttribute("data-show");a&&(n.hidden=!x(a,t));let l=n.getAttribute("data-class");l&&Dt(n,l,t);let p=n.getAttribute("data-value");if(p&&"value"in n){let u=x(p,t);n.value=u==null?"":String(u)}let c=n.getAttribute("data-checked");if(c&&"checked"in n){let u=x(c,t);n.checked=!!u}let f=Array.from(n.attributes).filter(u=>u.name.startsWith("data-prop-"));if(f.length>0){let u=!1;if(f.forEach(y=>{let m=y.name.slice(10);if(!m)return;let d=x(y.value,t),b=`data-${m}`,E=n.getAttribute(b),h=(d==null||typeof d=="string"||typeof d=="number"||typeof d=="boolean")&&d!==void 0&&d!==null?String(d):null;h===null?E!==null&&(n.removeAttribute(b),u=!0):E!==h&&(n.setAttribute(b,h),u=!0);let _=Ct(m),A=n.__boreDOMDetail;A&&(A.data||(A.data={}),A.data[_]!==d&&(A.data[_]=d,u=!0))}),u){let y=n.__boreDOMRerender;typeof y=="function"&&y()}}})};var Xe=!1,fe=typeof __LLM__<"u"&&__LLM__,Ot=!fe&&(typeof __DEBUG__>"u"||__DEBUG__),Lt=(e,...t)=>{let r="";for(let o=0;o<e.length;o++)r+=e[o],o<t.length&&(r+=String(t[o]));return r};function vt(e,t,r){if(typeof document<"u"){let o=document.querySelector(`template[data-component="${e}"]`);if(o)o.innerHTML=t;else{let n=document.createElement("template");n.setAttribute("data-component",e),n.innerHTML=t,document.body.appendChild(n)}}return z(r)}var ce={get errors(){return T.errors},get lastError(){return T.lastError},rerender:T.rerender,clearError:T.clearError,export:T.export,get config(){return T.config},_setDebugConfig:P,version:k,llm:Qe,component:vt,html:Lt};Ot&&(Object.assign(ce,{define:W.define,operate:W.operate,exportComponent:W.exportComponent,defineHelper:w.defineHelper,clearHelper:w.clearHelper,clearMissingFunctions:w.clearMissingFunctions,inferTemplate:w.inferTemplate}),Object.defineProperties(ce,{missingFunctions:{get:()=>w.missingFunctions},lastMissing:{get:()=>w.lastMissing},helpers:{get:()=>w.helpers},inferredTemplates:{get:()=>w.inferredTemplates}}));typeof window<"u"&&(window.boreDOM=ce,window.dispatch=Z);async function Mn(e,t,r){r?.debug!==void 0&&P(r.debug),!Xe&&g("versionLog")&&(Xe=!0);let o=f=>f&&f[B]?f:typeof f=="function"?z(f):f,n=typeof __SINGLE_FILE__<"u"&&__SINGLE_FILE__,s=r?.singleFile??n,{names:i,inlineLogic:a}=await ge(o,{mirrorAttributes:r?.mirrorAttributes}),l=s?new Map:await me(i);if(a)for(let[f,u]of a)(!l.has(f)||l.get(f)===null)&&l.set(f,u);if(t)for(let f of Object.keys(t))l.set(f,t[f]);for(let f of i)(!l.has(f)||l.get(f)===null)&&l.set(f,z(()=>()=>{}));let c=Me({app:e,internal:{customTags:i,components:l,updates:{path:[],value:[],raf:void 0,subscribers:new Map}}});return c.internal.updates.path=[],c.internal.updates.value=[],c.internal.updates.raf&&(cancelAnimationFrame(c.internal.updates.raf),c.internal.updates.raf=void 0),re(c,z,ee),Ae(c),fe||qe(),c.app}function z(e){let t=(r,o)=>n=>{let{internal:s,app:i}=r,a=[],l=U(i,a,!0),p=_e(n),c=Se(n),f=Ee(n,i,o),u;n.state=l,n.refs=p,n.slots=c;let y=async()=>{let d=s.updates.subscribers;for(let b of a){let E=d.get(b);E?E.includes(u)||E.push(u):d.set(b,[u])}},m;try{m=e({detail:o,state:l,refs:p,on:f,self:n,makeComponent:(d,b)=>j(d,r,b?.detail)})}catch(d){let b=d;g("console")&&Le(o?.name??n.tagName.toLowerCase(),b),m=()=>{}}u=d=>{let b=o?.name??n.tagName.toLowerCase(),E=fe?{}:Pe(b,n,()=>u(d)),S=U(d,a,!1);if(g("errorBoundary"))try{m({state:S,refs:p,slots:c,self:n,detail:o,makeComponent:(h,_)=>j(h,r,_?.detail),helpers:E}),q(n,{state:S,detail:o,self:n}),y(),ne(n),te(b)}catch(h){let _=h,A={component:b,element:n,error:_,state:i,refs:p,slots:c,timestamp:Date.now(),rerender:()=>u(d),stack:_.stack??""};g("console")?De(A):Oe(b,_),we(A),ve(A),Te(n)}else m({state:S,refs:p,slots:c,self:n,detail:o,makeComponent:(h,_)=>j(h,r,_?.detail),helpers:E}),q(n,{state:S,detail:o,self:n}),y()},Ie(n,{state:i,refs:p,slots:c,self:n,detail:o,rerender:()=>u(i)}),n.__boreDOMDetail=o,n.__boreDOMRerender=()=>u(i),u(l)};return t[B]=!0,t}export{k as VERSION,ce as boreDOM,xe as clearGlobals,vt as component,Ce as getDebugConfig,Lt as html,Mn as inflictBoreDOM,g as isDebugEnabled,Ye as queryComponent,ee as registerComponent,P as setDebugConfig,z as webComponent};
