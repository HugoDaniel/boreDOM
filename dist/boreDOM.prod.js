var le=async e=>{let t=new Map;for(let o=0;o<e.length;++o){let a=Array.from(ue("script[src]")).find(s=>((s.getAttribute("src")??"").split("/").pop()??"")===`${e[o]}.js`)?.getAttribute("src"),i=null;if(a)try{let l=await import(new URL(a,document.baseURI).href);for(let u of Object.keys(l)){i=l[u];break}t.set(e[o],i)}catch(s){console.error(`Unable to import "${a}"`,s)}}return t},ce=async(e,t)=>{let o=typeof __LLM__<"u"&&__LLM__,r=t?.mirrorAttributes??!o,n=[],a=new Map,i=Array.from(ue("template[data-component]")).filter(s=>s instanceof HTMLElement);for(let s of i){let l="",u=[];for(let c in s.dataset)c==="component"?l=s.dataset[c]??"":r&&u.push([He(c),s.dataset[c]??""]);if(!l){console.error("Invalid <template> found: missing data-component",s);continue}if(ke(s)){let c=s.content.querySelector("script");if(c){let f=c.textContent;if(f&&f.trim().length>0)try{let d=new Blob([f],{type:"text/javascript"}),g=URL.createObjectURL(d),h=await import(g);URL.revokeObjectURL(g),c.remove();let m=null;if(h.default)m=h.default;else{let y=Object.keys(h);y.length>0&&(m=h[y[0]])}if(m){let y=e?e(m):m;a.set(l,y)}}catch{}}}pe(l,{attributes:u}),n.push(l)}return{names:n,inlineLogic:a}},Q=(e,t)=>{let o=x(e);if(!B(o)){let r=`The tag name "${e}" is not a BoreDOM  component.
      
"createComponent" only accepts tag-names with matching <template> tags that have a data-component attribute in them.`;throw console.error(r),new Error(r)}return t&&(o.renderCallback=t),o},$e=e=>{let t=fe(e);if(!(t===null||!B(t)))return t},fe=e=>document.querySelector(e),ue=e=>document.querySelectorAll(e),x=(e,t)=>{let o=document.createElement(e);return t&&Array.isArray(t)&&t.length>0&&t.map(r=>o.appendChild(r)),o};var X=(e,t)=>{document.readyState==="loading"?addEventListener("DOMContentLoaded",()=>dispatchEvent(new CustomEvent(e,{detail:t}))):dispatchEvent(new CustomEvent(e,{detail:t}))};var ke=e=>e instanceof HTMLTemplateElement,de=e=>typeof e=="object",ae=e=>typeof e=="function",B=e=>de(e)&&"isBored"in e&&!!e.isBored;var He=e=>{if(e===""||!e.split("").some(o=>o!==o.toLowerCase()))return e;let t="";for(let o=0;o<e.length;o++){let r=e[o];r===r.toUpperCase()&&o!==0&&(t+="-"),t+=r.toLowerCase()}return t},V=e=>e.startsWith("on"),Ne=e=>e.startsWith("queriedOn"),J=e=>V(e)?e.slice(2).toLowerCase():e.slice(9).toLowerCase(),K=class extends HTMLElement{},pe=(e,t={})=>{let o=typeof __LLM__<"u"&&__LLM__;customElements.get(e)||customElements.define(e,class extends K{static get observedAttributes(){return typeof t.attributeChangedCallback=="object"?Object.keys(t.attributeChangedCallback):[]}constructor(){super()}isBored=!0;traverse(r,{traverseShadowRoot:n,query:a}={}){Array.from(n?this.shadowRoot?.querySelectorAll(a??"*")??[]:[]).concat(Array.from(this.querySelectorAll(a??"*"))).filter(i=>i instanceof HTMLElement).forEach(r)}#e(r){return r.split("'").filter(n=>n.length>2&&!(n.includes("(")||n.includes(",")||n.includes(")")))}#n(r){return r.split(/[\s,]+/g).map(n=>n.trim()).filter(Boolean)}#t(r){let n=r.trim();return n.length===0?[]:n.includes("dispatch(")||n.includes("'")?this.#e(r):this.#n(r)}#r(){let r;this.traverse(n=>{if(n instanceof HTMLElement){customElements.get(n.tagName.toLowerCase())&&(r=n);for(let i=0;i<n.attributes.length;i++){let s=n.attributes[i],l=s.name,u=(c,f)=>{f.length!==0&&f.forEach(d=>{n.addEventListener(c,g=>X(d,{event:g,dispatcher:n,component:this,index:this.parentElement?Array.from(this.parentElement.children).indexOf(this):-1}))})};if(l.startsWith("on-")){let c=l.slice(3),f=this.#t(s.value);u(c,f),n.removeAttribute(l);continue}if(l==="data-dispatch"||l.startsWith("data-dispatch-")){let c=l==="data-dispatch"?"click":l.slice(14),f=this.#t(s.value);u(c,f),n.removeAttribute(l);continue}if(!o&&V(s.name)){let c=this.#e(s.value);c.length>0&&u(J(s.name),c),n.setAttribute(`data-${l}-dispatches`,c.join()),n.removeAttribute(l)}}}},{traverseShadowRoot:!0})}isInitialized=!1;#o(){let r=fe(`[data-component="${e}"]`)??x("template"),n=o?null:r.getAttribute("shadowrootmode");if(!o&&(t.style||t.shadow||n)){let i=t.shadowrootmode??n??"open",s=this.attachShadow({mode:i});if(t.style){let l=x("style");l.textContent=t.style,s.appendChild(l)}if(t.shadow){let l=x("template");l.innerHTML=t.shadow,s.appendChild(l.content.cloneNode(!0))}else n&&s.appendChild(r.content.cloneNode(!0))}r&&!n&&this.appendChild(r.content.cloneNode(!0)),t.onSlotChange&&this.traverse(i=>{i instanceof HTMLSlotElement&&i.addEventListener("slotchange",s=>t.onSlotChange?.(s))},{traverseShadowRoot:!0}),ae(t.onClick)&&this.addEventListener("click",t.onClick);for(let[i,s]of Object.entries(t))if(V(i)){if(!ae(s))continue;this.addEventListener(J(i),s)}else if(Ne(i)){if(o)continue;let l=s;if(!de(l))continue;let u=J(i);for(let[c,f]of Object.entries(l))this.traverse(d=>{d.addEventListener(u,f)},{traverseShadowRoot:!0,query:c})}t.attributes&&Array.isArray(t.attributes)&&t.attributes.map(([i,s])=>this.setAttribute(i,s)),this.#r(),this.isInitialized=!0}renderCallback=r=>{};connectedCallback(){this.isInitialized||this.#o(),this.renderCallback(this),t.connectedCallback?.(this)}disconnectedCallback(){t.disconnectedCallback?.(this)}adoptedCallback(){t.adoptedCallback?.(this)}attributeChangedCallback(r,n,a){t.attributeChangedCallback&&t.attributeChangedCallback[r]({element:this,name:r,oldValue:n,newValue:a})}})},Y=e=>{pe(e,{})};function $(e,t){let o=t;return t===null||e.forEach(r=>{o=o[r]}),o}function k(e,t=[]){let o=[{path:[],obj:e}],r=[],n=new WeakSet;for(;o.length>0;){let{path:a,obj:i}=o.pop();if(!n.has(i)){n.add(i);for(let s in i){if(t.includes(s))continue;let l=i[s],u=a.concat(s);typeof l=="object"&&l!==null&&!n.has(l)&&o.push({path:u,obj:l}),r.push({path:u,value:l})}}}return r}function A(e){if(e==null||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);return t==null?!0:t===Object.prototype}var Ie=e=>{let t={};for(let[o,r]of Object.entries(e.dataset))o.startsWith("prop")||r!==void 0&&(t[o]=r);return t};function me(e,t,o){return(r,n)=>{addEventListener(r,a=>{let i=a?.detail?.event.currentTarget,s;for(;i;){if(i===e){try{let l=n({state:t,e:a.detail,detail:o});Promise.resolve(l).catch(u=>{console.error(`Error in async handler for "${r}" event`,u)})}catch(l){console.error(`Error in handler for "${r}" event`,l)}return}i instanceof HTMLElement?i=i.parentElement:i=void 0}})}}function ge(e){return new Proxy({},{get(t,o,r){let n=new Error(`Ref "${String(o)}" not found in <${e.tagName}>`);if(typeof o=="string"){let a=e.querySelectorAll(`[data-ref="${o}"]`);if(!a)throw n;let i=Array.from(a).filter(s=>s instanceof HTMLElement);if(i.length===0)throw n;return i.length===1?i[0]:i}}})}function ye(e){return new Proxy({},{get(t,o,r){let n=new Error(`Slot "${String(o)}" not found in <${e.tagName}>`);if(typeof o=="string"){let a=e.querySelectorAll(`slot[name="${o}"]`);if(!a)throw n;let i=Array.from(a).filter(s=>s instanceof HTMLSlotElement);if(i.length===0)throw n;return i.length===1?i[0]:i}},set(t,o,r){if(typeof o!="string")return!1;let n=r;if(r instanceof HTMLElement)r.setAttribute("data-slot",o);else if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")n=x("span"),n.setAttribute("data-slot",o),n.innerText=String(r);else throw new Error(`Invalid value for slot ${o} in <${e.tagName}>`);let a=Array.from(e.querySelectorAll(`[data-slot="${o}"]`));return a.length>0?a.forEach(i=>i.parentElement?.replaceChild(n,i)):Array.from(e.querySelectorAll(`slot[name="${o}"]`)).forEach(s=>s.parentElement?.replaceChild(n,s)),!0}})}function H(e,t,o=!1,r){let n=r||{targets:new WeakMap,path:[]};if(e!==void 0)return new Proxy(e,{set(a,i,s){return o?Reflect.set(a,i,s):(typeof i=="string"&&console.error(`State is read-only for web components. Unable to set '${i}'.`),!1)},get(a,i,s){let l=Reflect.get(a,i,s),u=i==="__proto__";if(typeof i=="string"&&!u){n.targets.has(a)||n.targets.set(a,n.path.join("."));let f=n.targets.get(a);n.path.length=0,typeof f=="string"&&f!==""&&n.path.push(...f.split(".")),n.path.push(i)}if(u||Array.isArray(l)||A(l))return!n.targets.has(l)&&typeof i=="string"&&n.targets.set(l,n.path.join(".")),H(l,t,o,n);let c=n.targets.get(a)??"";return typeof c=="string"&&typeof i=="string"&&(Array.isArray(a)||(c+=c!==""?`.${i}`:i),t.indexOf(c)===-1&&t.push(c)),n.path.length=0,n.path.push(c),l}})}function Re(e){return()=>{let t=e.internal.updates,o=new Set,r=n=>{if(n)for(let a=0;a<n.length;a++){let i=n[a];if(!o.has(i)){o.add(i);try{i(e.app)}catch{}}}};for(let n=0;n<t.path.length;n++){let a=t.path[n],i=a.slice(a.indexOf(".")+1);r(t.subscribers.get(i));for(let[s,l]of t.subscribers.entries()){if(s===i)continue;let u=`${s}.`,c=`${i}.`;(i.startsWith(u)||s.startsWith(c))&&r(l)}}t.path=[],t.value=[],t.raf=void 0}}function he(e){let t=e.internal,o=e;if(o===void 0)return e;let r=new WeakSet,n=Symbol("boredom-proxy");function a(s,l){if(r.has(s))return s;let u=new Proxy(s,{get(c,f,d){return f===n?!0:Reflect.get(c,f,d)},set(c,f,d){if(!(c[f]!==d))return!0;if(typeof f=="string"){let h=Array.isArray(s)?l:`${l}.${f}`;!(d&&d[n]===!0)&&(Array.isArray(d)||A(d))&&(d=i(d,h))}return Reflect.set(c,f,d),typeof f!="string"||(Array.isArray(s)?t.updates.path.push(`${l}`):t.updates.path.push(`${l}.${f}`),t.updates.value.push(c),t.updates.raf||(t.updates.raf=requestAnimationFrame(Re(e)))),!0}});return r.add(s),r.add(u),u}function i(s,l){if(!Array.isArray(s)&&!A(s)||r.has(s)||s&&s[n]===!0)return s;if(Array.isArray(s))for(let u=0;u<s.length;u++){let c=s[u];(Array.isArray(c)||A(c))&&(s[u]=i(c,l))}else for(let u of Object.keys(s)){let c=s[u];(Array.isArray(c)||A(c))&&(s[u]=i(c,`${l}.${u}`))}return a(s,l)}return k(e,["internal"]).forEach(({path:s,value:l})=>{if(Array.isArray(l)||A(l)&&!r.has(l)){let c=s.join("."),f=$(s.slice(0,-1),o);if(f===l)return;f[s.at(-1)]=a(l,c)}}),e}function be(e){let t=e.internal.customTags.filter(r=>document.querySelector(r)!==null),o=e.internal.components;for(let[r,n]of o.entries()){if(n===null||!t.includes(r))continue;let a=Array.from(document.querySelectorAll(r)).filter(i=>B(i));a.length!==0&&a.forEach((i,s)=>{if(i.isBoredInitialized)return;let l={index:s,name:r,data:Ie(i)};n(e,l)(i),i.__boreDOMDetail=l,i.isBoredInitialized=!0})}}function N(e,t,o){let r=t.internal.components.get(e);if(r){let n={...o,tagName:e};n.data||(n.data={});let a=Q(e,r(t,n));return a.__boreDOMDetail=n,a}return Q(e)}var D={console:!0,globals:!0,errorBoundary:!0,visualIndicators:!0,errorHistory:!0,versionLog:!0,api:!0,methodMissing:!0,templateInference:!0,strict:!1,outputFormat:"human",llm:!0},I=new Map,R=null;function p(e){return e==="errorBoundary"?D.errorBoundary??!0:!1}function U(e){if(typeof e=="boolean"){let t=e;D={console:t,globals:t,errorBoundary:!0,visualIndicators:t,errorHistory:t,versionLog:t,api:t,methodMissing:t,templateInference:t,strict:!1,outputFormat:"human",llm:t}}else D={...D,...e}}function Ee(){return{...D}}function Ue(){}function _e(e,t){console.error(`[boreDOM] Render error in <${e}>: ${t.message}`)}function Z(e){e.removeAttribute("data-boredom-error")}function je(e){let t=e?I.get(e):R;if(!t)return null;try{return{component:t.component,state:JSON.parse(JSON.stringify(t.state)),timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}catch(o){return p("console")&&console.warn(`[boreDOM] exportState: Unable to serialize state for <${t.component}>:`,o instanceof Error?o.message:o),{component:t.component,state:"[Unable to serialize - contains circular references or functions]",timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}}var C={get errors(){return I},get lastError(){return R},rerender(e){let t=e?I.get(e):R;t?t.rerender():console.warn("[boreDOM] No error context found to rerender")},clearError(e){let t=e?I.get(e):R;t?(Z(t.element),void 0):p("console")&&console.warn(e?`[boreDOM] clearError: No error found for <${e}>`:"[boreDOM] clearError: No error to clear")},export:je,get config(){return Ee()}};var j=Symbol("boreDOM.webComponent"),O=null,ee=null,te=null,Fe=new WeakMap;function Se(e,t,o){O=e,t&&(ee=t),o&&(te=o)}function F(){return O}function Pe(e){return typeof e=="function"&&e[j]===!0}function we(e,t,o){return console.warn("[boreDOM] define() is not available in production build"),!1}function Ge(e,t){if(!O)return;let o=Array.from(document.querySelectorAll(e)),r={count:0};o.forEach((n,a)=>{if(n instanceof HTMLElement&&"renderCallback"in n)try{let s=t(O,{index:a,name:e,data:void 0});n.renderCallback=s,s(n)}catch(i){r.count++,p("console")&&console.error(`[boreDOM] Failed to initialize <${e}> instance ${a}:`,i)}}),r.count>0&&p("console")&&console.warn(`[boreDOM] ${r.count} of ${o.length} <${e}> instances failed to initialize`)}function Me(e,t=0){console.warn("[boreDOM] operate() is not available in production build")}function We(e){return console.warn("[boreDOM] exportComponent() is not available in production build"),null}var P={define:we,operate:Me,exportComponent:We};var v=new Map,G=new Map,ne=null,qe=new Map;function Ce(e,t,o){return{}}function ze(e,t){}function Je(e){v.delete(e)}function Ve(){G.clear(),ne=null}function Ke(e){p("console")&&(console.log("%c\u26A0\uFE0F boreDOM: Missing function %c%s%c in <%s>","color: #f39c12; font-weight: bold","color: #9b59b6; font-weight: bold",e.name,"color: #f39c12",e.component),e.args.length>0&&console.log("   Arguments:",e.args),console.log("%c\u{1F4A1} Define it:","color: #3498db; font-weight: bold"),console.log(`   $defineMissing((${Ae(e.args)}) => { ... })`),console.log(`   boreDOM.defineHelper('${e.name}', (${Ae(e.args)}) => { ... })`))}function Ae(e){return e.length===0?"":e.map((t,o)=>t==null?`arg${o}`:Array.isArray(t)?"items":typeof t=="object"?"name"in t&&"email"in t?"user":"id"in t&&"title"in t?"item":"id"in t?"record":"data":typeof t=="string"?"text":typeof t=="number"?"count":typeof t=="boolean"?"flag":`arg${o}`).join(", ")}function Qe(e){if(!p("errorHistory"))return;let t=G.get(e.name)||[];t.length>=10&&t.shift(),t.push(e),G.set(e.name,t),ne=e}function Xe(e){if(!p("globals")||typeof window>"u")return;let t=window;t.$missingName=e.name,t.$missingArgs=e.args,t.$missingComponent=e.component,t.$defineMissing=e.define}function Ye(e,t){return null}function Ze(e){return e.replace(/-([a-z])/g,(t,o)=>o.toUpperCase())}function et(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function tt(e){if(e==="true")return!0;if(e==="false")return!1;let t=Number(e);if(!isNaN(t)&&e!=="")return t;if(e.startsWith("{")||e.startsWith("["))try{return JSON.parse(e)}catch{return e}return e}function nt(e){return e==null?"":typeof e=="object"?JSON.stringify(e):String(e)}var _={get missingFunctions(){return G},get lastMissing(){return ne},defineHelper:ze,get helpers(){return new Map(v)},clearHelper:Je,clearMissingFunctions:Ve,get inferredTemplates(){return qe},inferTemplate:Ye};var rt=new Set(["script","style","noscript","template","link","meta","head","title"]),ot=new Set(["id","class","type","value","checked","disabled","placeholder","href","src","alt","title","role"]);function it(e){return!(e.hasAttribute("hidden")||e.style.display==="none"||e.style.visibility==="hidden"||e.getAttribute("aria-hidden")==="true")}function re(e){if(!(e instanceof HTMLElement))return null;let t=e.tagName.toLowerCase();if(rt.has(t)||!it(e))return null;let o={tagName:t},r={},n=!1;for(let s of Array.from(e.attributes)){let l=s.name;(ot.has(l)||l.startsWith("aria-")||l.startsWith("data-"))&&(l==="checked"||l==="disabled"?r[l]=e[l]:l==="value"&&(t==="input"||t==="textarea"||t==="select")?r[l]=e.value:r[l]=s.value,n=!0)}n&&(o.attributes=r);let a="";for(let s of Array.from(e.childNodes))if(s.nodeType===Node.TEXT_NODE){let l=s.nodeValue?.trim();l&&(a+=l+" ")}a=a.trim(),a&&(o.text=a);let i=[];for(let s of Array.from(e.children)){let l=re(s);l&&i.push(l)}return i.length>0&&(o.children=i),t==="div"&&!n&&!a&&i.length===0?null:o}function De(e,t){let o=[];try{for(let r of t){let n=xe(e,r);n&&o.push(n)}return{success:!0}}catch(r){for(let n=o.length-1;n>=0;n--)try{xe(e,o[n])}catch(a){console.error("Critical: Rollback failed",a)}return{success:!1,error:r.message||String(r)}}}function Oe(e,t){if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null||Array.isArray(e)!==Array.isArray(t))return!1;let o=Object.keys(e),r=Object.keys(t);if(o.length!==r.length)return!1;for(let n of o)if(!r.includes(n)||!Oe(e[n],t[n]))return!1;return!0}function st(e){return e===""?[]:e==="/"?[""]:e.split("/").slice(1).map(t=>t.replace(/~1/g,"/").replace(/~0/g,"~"))}function xe(e,t){let o=st(t.path);if(o.length===0)throw new Error("Cannot operate on root state directly");let r=o.pop(),n=e;for(let a of o){if(n==null)throw new Error(`Path not found: ${t.path}`);if(Array.isArray(n)){let i=parseInt(a,10);if(isNaN(i))throw new Error(`Invalid array index: ${a}`);n=n[i]}else n=n[a]}if(n==null)throw new Error(`Path not found: ${t.path}`);if(t.op==="test"){let a;if(Array.isArray(n))if(r==="-")a=void 0;else{let i=parseInt(r,10);isNaN(i)||i<0||i>=n.length?a=void 0:a=n[i]}else a=n[r];if(!Oe(a,t.value))throw new Error(`Test failed at ${t.path}: expected ${JSON.stringify(t.value)}, got ${JSON.stringify(a)}`);return null}if(Array.isArray(n)){if(r==="-"){if(t.op==="add")return n.push(t.value),{op:"remove",path:t.path.replace(/-$/,(n.length-1).toString())};throw new Error("Can only add to '-' index")}let a=parseInt(r,10);if(isNaN(a)||a<0)throw new Error(`Invalid array index: ${r}`);if(t.op==="add"){if(a>n.length)throw new Error("Index out of bounds");return n.splice(a,0,t.value),{op:"remove",path:t.path}}else if(t.op==="remove"){if(a>=n.length)throw new Error("Index out of bounds");let i=n[a];return n.splice(a,1),{op:"add",path:t.path,value:i}}else if(t.op==="replace"){if(a>=n.length)throw new Error("Index out of bounds");let i=n[a];return n[a]=t.value,{op:"replace",path:t.path,value:i}}}else if(t.op==="add"){let a=n[r],i=Object.prototype.hasOwnProperty.call(n,r);return n[r]=t.value,i?{op:"replace",path:t.path,value:a}:{op:"remove",path:t.path}}else if(t.op==="replace"){if(!Object.prototype.hasOwnProperty.call(n,r))throw new Error(`Path not found: ${t.path}`);let a=n[r];return n[r]=t.value,{op:"replace",path:t.path,value:a}}else if(t.op==="remove"){if(!Object.prototype.hasOwnProperty.call(n,r))throw new Error(`Path not found: ${t.path}`);let a=n[r];return delete n[r],{op:"add",path:t.path,value:a}}return null}var L="0.25.25";var oe=typeof __LLM__<"u"?__LLM__:!1,at=e=>re(e||document.body),lt=e=>{let t=F();return!t||!t.app?{success:!1,error:"No app state found"}:De(t.app,e)},ve={vision:oe?at:()=>null,transact:oe?lt:()=>({success:!1,error:"Production mode"}),compact:oe?()=>{let e=F();if(!e||!e.app)return null;let t=e.app,o=k(t).map(a=>a.path.join(".")),r={};Object.entries(t).forEach(([a,i])=>{Array.isArray(i)?r[a]=`[${i.length}]`:i&&typeof i=="object"?r[a]="{...}":r[a]=i});let n=Array.from(e.internal.components.entries()).map(([a,i])=>({tag:a,hasLogic:!!i}));return{framework:{name:"boreDOM",version:L},state:{paths:o,sample:r},components:n}}:()=>null};var ct=e=>e.replace(/-([a-z])/g,(t,o)=>o.toUpperCase()),ft=e=>e.replace(/\[(\d+)\]/g,".$1").replace(/^\./,"").split(".").filter(Boolean),T=(e,t)=>{if(e==null)return;let o=ft(t);return o.length===0?e:$(o,e)},S=(e,t)=>{let o=e.trim();if(o)return o==="index"||o==="i"?t.index:o==="item"?t.item:o==="detail"?t.detail:o==="self"?t.self:o.startsWith("state.")?T(t.state,o.slice(6)):o.startsWith("item.")?T(t.item,o.slice(5)):o.startsWith("detail.")?T(t.detail,o.slice(7)):o.startsWith("self.")?T(t.self,o.slice(5)):T(t.state,o)},W=e=>{let t=[];if(e instanceof DocumentFragment){let o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;o.nextNode();)t.push(o.currentNode);return t}return t.push(e),e.traverse(o=>{t.push(o)},{traverseShadowRoot:!0}),t},ut=e=>{let t=e.getAttribute("data-class-base");if(t!==null)return t;let o=e.className;return e.setAttribute("data-class-base",o),o},dt=(e,t,o)=>{let r=ut(e);if(t.includes(":")){let a=[];t.split(",").forEach(s=>{let[l,u]=s.split(":").map(c=>c.trim());!l||!u||S(u,o)&&a.push(l)});let i=[r,...a].filter(Boolean).join(" ").trim();e.className=i;return}let n=S(t,o);if(typeof n=="string")e.className=[r,n].filter(Boolean).join(" ").trim();else if(Array.isArray(n))e.className=[r,n.join(" ")].filter(Boolean).join(" ").trim();else if(n&&typeof n=="object"){let a=Object.entries(n).filter(([,i])=>!!i).map(([i])=>i);e.className=[r,...a].filter(Boolean).join(" ").trim()}else e.className=r.trim()},Le=(e,t)=>{let o=t.item===void 0;e.forEach(r=>{if(r instanceof HTMLTemplateElement||o&&r.closest("[data-list-item]"))return;let n=r.getAttribute("data-text");if(n){let c=S(n,t);r.textContent=c==null?"":String(c)}let a=r.getAttribute("data-show");a&&(r.hidden=!S(a,t));let i=r.getAttribute("data-class");i&&dt(r,i,t);let s=r.getAttribute("data-value");if(s&&"value"in r){let c=S(s,t);r.value=c==null?"":String(c)}let l=r.getAttribute("data-checked");if(l&&"checked"in r){let c=S(l,t);r.checked=!!c}let u=Array.from(r.attributes).filter(c=>c.name.startsWith("data-prop-"));if(u.length>0){let c=!1;if(u.forEach(f=>{let d=f.name.slice(10);if(!d)return;let g=S(f.value,t),h=`data-${d}`,m=r.getAttribute(h),E=(g==null||typeof g=="string"||typeof g=="number"||typeof g=="boolean")&&g!==void 0&&g!==null?String(g):null;E===null?m!==null&&(r.removeAttribute(h),c=!0):m!==E&&(r.setAttribute(h,E),c=!0);let w=ct(d),b=r.__boreDOMDetail;b&&(b.data||(b.data={}),b.data[w]!==g&&(b.data[w]=g,c=!0))}),c){let f=r.__boreDOMRerender;typeof f=="function"&&f()}}})},Te=(e,t)=>{let o=e.getAttribute("data-list");if(!o)return;let r=e.querySelector("template[data-item]");if(!(r instanceof HTMLTemplateElement))return;let n=S(o,t),a=Array.isArray(n)?n:[];Array.from(e.children).forEach(s=>{s.hasAttribute("data-list-item")&&s.remove()});let i=document.createDocumentFragment();a.forEach((s,l)=>{let u=r.content.cloneNode(!0);Array.from(u.childNodes).forEach(c=>{c.nodeType===Node.ELEMENT_NODE&&c.setAttribute("data-list-item","")}),pt(u,{...t,item:s,index:l}),i.appendChild(u)}),e.appendChild(i)},pt=(e,t)=>{let o=W(e);o.forEach(r=>Te(r,t)),o=W(e),Le(o,t)},ie=(e,t)=>{let o=W(e);o.forEach(r=>Te(r,t)),o=W(e),Le(o,t)};var Be=!1,mt=!1,gt=(e,...t)=>{let o="";for(let r=0;r<e.length;r++)o+=e[r],r<t.length&&(o+=String(t[r]));return o};function yt(e,t,o){if(typeof document<"u"){let r=document.querySelector(`template[data-component="${e}"]`);if(r)r.innerHTML=t;else{let n=document.createElement("template");n.setAttribute("data-component",e),n.innerHTML=t,document.body.appendChild(n)}}return q(o)}var se={get errors(){return C.errors},get lastError(){return C.lastError},rerender:C.rerender,clearError:C.clearError,export:C.export,get config(){return C.config},_setDebugConfig:U,version:L,llm:ve,component:yt,html:gt};mt&&(Object.assign(se,{define:P.define,operate:P.operate,exportComponent:P.exportComponent,defineHelper:_.defineHelper,clearHelper:_.clearHelper,clearMissingFunctions:_.clearMissingFunctions,inferTemplate:_.inferTemplate}),Object.defineProperties(se,{missingFunctions:{get:()=>_.missingFunctions},lastMissing:{get:()=>_.lastMissing},helpers:{get:()=>_.helpers},inferredTemplates:{get:()=>_.inferredTemplates}}));typeof window<"u"&&(window.boreDOM=se,window.dispatch=X);async function un(e,t,o){o?.debug!==void 0&&U(o.debug),!Be&&p("versionLog")&&(Be=!0);let r=f=>f&&f[j]?f:typeof f=="function"?q(f):f,n=typeof __SINGLE_FILE__<"u"&&__SINGLE_FILE__,a=o?.singleFile??n,{names:i,inlineLogic:s}=await ce(r,{mirrorAttributes:o?.mirrorAttributes}),l=a?new Map:await le(i);if(s)for(let[f,d]of s)(!l.has(f)||l.get(f)===null)&&l.set(f,d);if(t)for(let f of Object.keys(t))l.set(f,t[f]);for(let f of i)(!l.has(f)||l.get(f)===null)&&l.set(f,q(()=>()=>{}));let c=he({app:e,internal:{customTags:i,components:l,updates:{path:[],value:[],raf:void 0,subscribers:new Map}}});return c.internal.updates.path=[],c.internal.updates.value=[],c.internal.updates.raf&&(cancelAnimationFrame(c.internal.updates.raf),c.internal.updates.raf=void 0),Se(c,q,Y),be(c),c.app}function q(e){let t=(o,r)=>n=>{let{internal:a,app:i}=o,s=[],l=H(i,s,!0),u=ge(n),c=ye(n),f=me(n,i,r),d;n.state=l,n.refs=u,n.slots=c;let g=async()=>{let m=a.updates.subscribers;for(let y of s){let E=m.get(y);E?E.includes(d)||E.push(d):m.set(y,[d])}},h;try{h=e({detail:r,state:l,refs:u,on:f,self:n,makeComponent:(m,y)=>N(m,o,y?.detail)})}catch(m){let y=m;p("console")&&(r?.name??n.tagName.toLowerCase(),void 0),h=()=>{}}d=m=>{let y=r?.name??n.tagName.toLowerCase(),E=Ce(y,n,()=>d(m)),w=H(m,s,!1);if(p("errorBoundary"))try{h({state:w,refs:u,slots:c,self:n,detail:r,makeComponent:(b,M)=>N(b,o,M?.detail),helpers:E}),ie(n,{state:w,detail:r,self:n}),g(),Z(n)}catch(b){let M=b,z={component:y,element:n,error:M,state:i,refs:u,slots:c,timestamp:Date.now(),rerender:()=>d(m),stack:M.stack??""};p("console")?void 0:_e(y,M)}else h({state:w,refs:u,slots:c,self:n,detail:r,makeComponent:(b,M)=>N(b,o,M?.detail),helpers:E}),ie(n,{state:w,detail:r,self:n}),g()},n.__boreDOMDetail=r,n.__boreDOMRerender=()=>d(i),d(l)};return t[j]=!0,t}export{L as VERSION,se as boreDOM,Ue as clearGlobals,yt as component,Ee as getDebugConfig,gt as html,un as inflictBoreDOM,p as isDebugEnabled,$e as queryComponent,Y as registerComponent,U as setDebugConfig,q as webComponent};
