var x=(e,t)=>()=>(e&&(t=e(e=0)),t);function f(e){return e==="errorBoundary"?L.errorBoundary??!0:!1}function j(e){if(typeof e=="boolean"){let t=e;L={console:t,globals:t,errorBoundary:!0,visualIndicators:t,errorHistory:t,versionLog:t,api:t,methodMissing:t,templateInference:t,strict:!1,outputFormat:"human",llm:t}}else L={...L,...e}}function W(){return{...L}}function bt(){}function He(e,t){console.error(`[boreDOM] Render error in <${e}>: ${t.message}`)}function se(e){e.removeAttribute("data-boredom-error")}function _t(e){let t=e?N.get(e):P;if(!t)return null;try{return{component:t.component,state:JSON.parse(JSON.stringify(t.state)),timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}catch(r){return f("console")&&console.warn(`[boreDOM] exportState: Unable to serialize state for <${t.component}>:`,r instanceof Error?r.message:r),{component:t.component,state:"[Unable to serialize - contains circular references or functions]",timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}}var L,N,P,E,w=x(()=>{"use strict";L={console:!0,globals:!0,errorBoundary:!0,visualIndicators:!0,errorHistory:!0,versionLog:!0,api:!0,methodMissing:!0,templateInference:!0,strict:!1,outputFormat:"human",llm:!0},N=new Map,P=null;E={get errors(){return N},get lastError(){return P},rerender(e){let t=e?N.get(e):P;t?t.rerender():console.warn("[boreDOM] No error context found to rerender")},clearError(e){let t=e?N.get(e):P;t?(se(t.element),void 0):f("console")&&console.warn(e?`[boreDOM] clearError: No error found for <${e}>`:"[boreDOM] clearError: No error to clear")},export:_t,get config(){return W()}}});function z(e){let t=e.filter(n=>n.kind!=="unknown");if(t.length===0)return{kind:"unknown"};if(t.length===1)return t[0];if(t.every(n=>n.kind==="primitive")){let n=t,o=[...new Set(n.map(i=>i.value))];return o.length===1?t[0]:{kind:"union",types:o.map(i=>({kind:"primitive",value:i}))}}if(t.every(n=>n.kind==="object")){let n=t,o={};for(let i of n)for(let[s,a]of Object.entries(i.properties))o[s]?o[s]=z([o[s],a]):o[s]=a;return{kind:"object",properties:o}}if(t.every(n=>n.kind==="array")){let o=t.map(i=>i.elementType);return{kind:"array",elementType:z(o)}}let r=Et(t);return r.length===1?r[0]:{kind:"union",types:r}}function Et(e){let t=new Set,r=[];for(let n of e){let o=O(n);t.has(o)||(t.add(o),r.push(n))}return r}function O(e){switch(e.kind){case"primitive":return`p:${e.value}`;case"literal":return`l:${typeof e.value}:${e.value}`;case"array":return`a:${O(e.elementType)}`;case"object":return`o:{${Object.entries(e.properties).sort(([n],[o])=>n.localeCompare(o)).map(([n,o])=>`${n}:${O(o)}`).join(",")}}`;case"union":return`u:[${e.types.map(O).sort().join("|")}]`;case"function":return`f:(${e.params.map(n=>`${n.name}:${O(n.type)}`).join(",")})=>${O(e.returnType)}`;case"date":return"date";case"unknown":return"unknown"}}function g(e,t=0){let r="  ".repeat(t);switch(e.kind){case"primitive":return e.value;case"literal":return typeof e.value=="string"?`"${e.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:String(e.value);case"array":let n=g(e.elementType,t);return e.elementType.kind==="primitive"||e.elementType.kind==="unknown"?`${n}[]`:`Array<${n}>`;case"object":{let i=Object.entries(e.properties);return i.length===0?"{}":`{
${i.map(([a,c])=>`${r}  ${a}: ${g(c,t+1)};`).join(`
`)}
${r}}`}case"union":return e.types.map(i=>g(i,t)).join(" | ");case"function":return`(${e.params.map(s=>`${s.name}${s.optional?"?":""}: ${g(s.type)}`).join(", ")}) => ${g(e.returnType)}`;case"date":return"Date";case"unknown":return"unknown"}}function fe(){let e={};for(let[t,r]of ue)St(e,t,r.type);return le(e)}function St(e,t,r){let n=t.split("."),o=e;for(let a=0;a<n.length-1;a++){let c=n[a],l=c.match(/^(.+)\[(\d+)\]$/);if(l){let[,u]=l;o[u]||(o[u]={__isArray:!0,__elementType:{}}),o=o[u].__elementType}else o[c]||(o[c]={}),o=o[c]}let i=n[n.length-1],s=i.match(/^(.+)\[(\d+)\]$/);if(s){let[,a]=s;o[a]||(o[a]={__isArray:!0,__elementType:{}});let c=o[a].__elementType.__type;c?o[a].__elementType.__type=z([c,r]):o[a].__elementType.__type=r}else{let a=o[i]?.__type;a?o[i]={__type:z([a,r])}:o[i]={__type:r}}}function le(e){if(e.__type)return e.__type;if(e.__isArray)return{kind:"array",elementType:le(e.__elementType)};let t={};for(let[r,n]of Object.entries(e))r.startsWith("__")||n&&typeof n=="object"&&(t[r]=le(n));return Object.keys(t).length===0?{kind:"unknown"}:{kind:"object",properties:t}}function Ct(){let e=fe();return e.kind==="unknown"?"interface State {}":`interface State ${g(e)}`}function Ge(){return{state:"interface State {}",helpers:{},components:{},events:{},raw:{state:{kind:"object",properties:{}},helpers:{},components:{},events:{}}}}function Ne(){return Ge()}function Pe(e){return"unknown"}function wt(e,t){let r=t.split("."),n=e;for(let o of r){let i=o.match(/^(.+)\[(\d+)\]$/);if(i){let[,s]=i;if(n.kind==="object"&&n.properties[s])n=n.properties[s];else return null;if(n.kind==="array")n=n.elementType;else return null}else if(o.endsWith("[]")){let s=o.slice(0,-2);if(n.kind==="object"&&n.properties[s])n=n.properties[s];else return null}else if(n.kind==="object"&&n.properties[o])n=n.properties[o];else return null}return n}function je(){ue.clear(),ie.clear(),ae.clear(),ce.clear()}var ue,ie,ae,ce,q=x(()=>{"use strict";w();ue=new Map,ie=new Map,ae=new Map,ce=new Map});function Je(e,t,r){B=e,t&&(me=t),r&&(ge=r)}function S(){return B}function xt(e){return typeof e=="function"&&e[ye]===!0}function Ke(e,t,r){return console.warn("[boreDOM] define() is not available in production build"),!1}function kt(e,t){if(!B)return;let r=Array.from(document.querySelectorAll(e)),n={count:0};r.forEach((o,i)=>{if(o instanceof HTMLElement&&"renderCallback"in o)try{let a=t(B,{index:i,name:e,data:void 0});o.renderCallback=a,a(o)}catch(s){n.count++,f("console")&&console.error(`[boreDOM] Failed to initialize <${e}> instance ${i}:`,s)}}),n.count>0&&f("console")&&console.warn(`[boreDOM] ${n.count} of ${r.length} <${e}> instances failed to initialize`)}function Qe(e,t=0){console.warn("[boreDOM] operate() is not available in production build")}function vt(e){return console.warn("[boreDOM] exportComponent() is not available in production build"),null}var ye,B,me,ge,Mt,V,J=x(()=>{"use strict";w();ye=Symbol("boreDOM.webComponent"),B=null,me=null,ge=null,Mt=new WeakMap;V={define:Ke,operate:Qe,exportComponent:vt}});function Xe(e,t,r){return{}}function Tt(e,t){}function $t(e){I.delete(e)}function Lt(){K.clear(),he=null}function Ot(e){f("console")&&(console.log("%c\u26A0\uFE0F boreDOM: Missing function %c%s%c in <%s>","color: #f39c12; font-weight: bold","color: #9b59b6; font-weight: bold",e.name,"color: #f39c12",e.component),e.args.length>0&&console.log("   Arguments:",e.args),console.log("%c\u{1F4A1} Define it:","color: #3498db; font-weight: bold"),console.log(`   $defineMissing((${Ye(e.args)}) => { ... })`),console.log(`   boreDOM.defineHelper('${e.name}', (${Ye(e.args)}) => { ... })`))}function Ye(e){return e.length===0?"":e.map((t,r)=>t==null?`arg${r}`:Array.isArray(t)?"items":typeof t=="object"?"name"in t&&"email"in t?"user":"id"in t&&"title"in t?"item":"id"in t?"record":"data":typeof t=="string"?"text":typeof t=="number"?"count":typeof t=="boolean"?"flag":`arg${r}`).join(", ")}function Bt(e){if(!f("errorHistory"))return;let t=K.get(e.name)||[];t.length>=10&&t.shift(),t.push(e),K.set(e.name,t),he=e}function It(e){if(!f("globals")||typeof window>"u")return;let t=window;t.$missingName=e.name,t.$missingArgs=e.args,t.$missingComponent=e.component,t.$defineMissing=e.define}function Rt(e,t){return null}function Ut(e){return e.replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function Ft(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function Ht(e){if(e==="true")return!0;if(e==="false")return!1;let t=Number(e);if(!isNaN(t)&&e!=="")return t;if(e.startsWith("{")||e.startsWith("["))try{return JSON.parse(e)}catch{return e}return e}function Gt(e){return e==null?"":typeof e=="object"?JSON.stringify(e):String(e)}var I,K,he,Dt,m,be=x(()=>{"use strict";w();J();q();I=new Map,K=new Map,he=null,Dt=new Map;m={get missingFunctions(){return K},get lastMissing(){return he},defineHelper:Tt,get helpers(){return new Map(I)},clearHelper:$t,clearMissingFunctions:Lt,get inferredTemplates(){return Dt},inferTemplate:Rt}});var v,Q=x(()=>{"use strict";v="0.25.25"});function X(e){h=e}function _e(){return h?A(h.app):null}function Y(e){if(!h||!e)return;let t=h.app;if(t){for(let r of Object.keys(t))r in e||delete t[r];for(let[r,n]of Object.entries(e))t[r]=A(n)}}function A(e,t=new WeakMap){if(e===null||typeof e!="object")return e;if(t.has(e))return t.get(e);if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(e instanceof Map){let n=new Map;t.set(e,n);for(let[o,i]of e.entries())n.set(A(o,t),A(i,t));return n}if(e instanceof Set){let n=new Set;t.set(e,n);for(let o of e)n.add(A(o,t));return n}if(Array.isArray(e)){let n=new Array(e.length);t.set(e,n);for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=A(e[o],t));return n}let r={};t.set(e,r);for(let[n,o]of Object.entries(e))r[n]=A(o,t);return r}function Nt(e){let t=[];try{new Function("state","boreDOM",e)}catch(r){let n=r;t.push({type:"syntax",message:n.message,location:Pt(n),severity:"error"})}return t}function Pt(e){let t=e.message.match(/at position (\d+)/);if(t)return`position ${t[1]}`;let r=e.message.match(/line (\d+)/);if(r)return`line ${r[1]}`}function jt(e){let t=[];if(!h)return t;let r=h.app,n=Ee(r),o=Kt(),i=Wt(e);for(let a of i)if(!qt(a,n)){let c=Vt(a,n);t.push({type:"reference",message:`${a} is undefined`,suggestion:c?`Did you mean ${c}?`:void 0,severity:"error"})}let s=zt(e);for(let a of s)if(!o.includes(a)){let c=Jt(a,o);t.push({type:"reference",message:`Helper '${a}' is not defined`,suggestion:c?`Did you mean '${c}'?`:void 0,severity:"error"})}return t}function Wt(e){let t=[],r=/state\.([\w.[\]]+)/g,n;for(;(n=r.exec(e))!==null;){let o=n[1],i=/\.(push|pop|shift|unshift|map|filter|reduce|forEach|find|findIndex|some|every|indexOf|includes|splice|slice|concat|join|reverse|sort|flat|flatMap|at|fill|copyWithin|entries|keys|values|length|size|get|set|has|delete|add|clear|toString|valueOf|toJSON)$/;o=o.replace(i,""),o&&t.push(`state.${o}`)}return[...new Set(t)]}function zt(e){let t=[],r=/helpers\.(\w+)\s*\(/g,n;for(;(n=r.exec(e))!==null;)t.push(n[1]);return[...new Set(t)]}function Ee(e,t="state",r=new WeakSet){let n=[t];if(e==null||typeof e!="object"||r.has(e))return n;r.add(e);for(let o of Object.keys(e)){let i=`${t}.${o}`;n.push(i);let s=e[o];Array.isArray(s)?(n.push(i),s.length>0&&s[0]&&typeof s[0]=="object"&&n.push(...Ee(s[0],`${i}[0]`,r))):s&&typeof s=="object"&&n.push(...Ee(s,i,r))}return n}function qt(e,t){if(t.includes(e))return!0;let r=e.replace(/\[\d+\]/g,"");if(t.includes(r))return!0;let n=e.replace(/\[\d+\]\.[\w.]+$/,"");return!!(t.includes(n)||t.includes(`${n}[0]`))}function Vt(e,t){let r,n=1/0;for(let o of t){let i=et(e,o);i<n&&i<e.length/2&&(n=i,r=o)}return r}function Jt(e,t){for(let r of t)if(et(e,r)<=2)return r}function et(e,t){let r=[];for(let n=0;n<=t.length;n++)r[n]=[n];for(let n=0;n<=e.length;n++)r[0][n]=n;for(let n=1;n<=t.length;n++)for(let o=1;o<=e.length;o++)t.charAt(n-1)===e.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,r[n][o-1]+1,r[n-1][o]+1);return r[t.length][e.length]}function Kt(){if(typeof window>"u")return[];let e=window.boreDOM;return e?.helpers?Array.from(e.helpers.keys()):[]}function Qt(e){let t=[],r=[{pattern:/\.map\s*\(/,method:"map"},{pattern:/\.filter\s*\(/,method:"filter"},{pattern:/\.forEach\s*\(/,method:"forEach"},{pattern:/\.reduce\s*\(/,method:"reduce"},{pattern:/\.find\s*\(/,method:"find"},{pattern:/\.some\s*\(/,method:"some"},{pattern:/\.every\s*\(/,method:"every"}];for(let{pattern:i,method:s}of r)if(i.test(e)){let a=new RegExp(`(state\\.[\\w.]+)\\.${s}\\s*\\(`),c=e.match(a);if(c){let l=c[1],u=Ze(l);u==null?t.push({type:"type",message:`${l} is ${u}, cannot call .${s}()`,suggestion:`Add null check: ${l}?.${s}(...) or initialize ${l} first`,severity:"error"}):Array.isArray(u)||t.push({type:"type",message:`${l} is not an array, cannot call .${s}()`,suggestion:`Ensure ${l} is an array before calling .${s}()`,severity:"error"})}}let n=/state\.([\w.]+)\.([\w]+)/g,o;for(;(o=n.exec(e))!==null;){let i=`state.${o[1]}`,s=Ze(i);s==null&&t.push({type:"type",message:`${i} is ${s}, cannot read property '${o[2]}'`,suggestion:`Add null check: ${i}?.${o[2]} or initialize ${i} first`,severity:"warning"})}return(e.includes("await ")||e.includes("async "))&&t.push({type:"warning",message:"Async code detected - apply() executes synchronously",suggestion:"Use regular synchronous code or handle async separately",severity:"warning"}),t}function Ze(e){if(!h)return;let t=e.replace("state.","").split("."),r=h.app;for(let n of t){if(r==null)return r;let o=n.match(/^(\w+)\[(\d+)\]$/);if(o)if(r=r[o[1]],Array.isArray(r))r=r[parseInt(o[2],10)];else return;else r=r[n]}return r}function tt(e,t,r="state"){let n=[];if(e===t)return n;if(typeof e!=typeof t)return n.push({path:r,before:e,after:t}),n;if(Array.isArray(e)&&Array.isArray(t))return JSON.stringify(e)!==JSON.stringify(t)&&n.push({path:r,before:e,after:t}),n;if(typeof e=="object"&&e!==null&&t!==null){let o=new Set([...Object.keys(e),...Object.keys(t)]);for(let i of o)n.push(...tt(e[i],t[i],`${r}.${i}`));return n}return e!==t&&n.push({path:r,before:e,after:t}),n}function Yt(e){return[]}function Se(e){return{valid:!0,issues:[]}}function Ce(e){return{success:!1,error:"apply() not available in production",rollback:()=>{},componentsAffected:[],stateChanges:[]}}function nt(e){return{success:!1,results:[],rollbackAll:()=>{},error:"applyBatch() not available in production"}}var h,rt=x(()=>{"use strict";w();we();h=null});function Zt(e,t){if(e===t)return!0;if(!e||!t||typeof e!="object"||typeof t!="object")return!1;try{let r=Date.now()+Math.random();e[Ae]=r;let n=t[Ae]===r;return delete e[Ae],n}catch{return!1}}function xe(e,t="",r=new WeakSet){let n=[];if(e==null||typeof e!="object"||r.has(e))return n;r.add(e);for(let o of Object.keys(e)){let i=t?`${t}.${o}`:o;n.push(i);let s=e[o];Array.isArray(s)?(n.push(`${i}[]`),s.length>0&&typeof s[0]=="object"&&s[0]!==null&&n.push(...xe(s[0],`${i}[0]`,r))):s&&typeof s=="object"&&n.push(...xe(s,i,r))}return n}function ke(e,t=new WeakSet){return e===null?"null":e===void 0?"undefined":Array.isArray(e)?e.length===0?"any[]":`${ke(e[0],t)}[]`:typeof e=="object"?t.has(e)?"/* circular */":(t.add(e),`{
${Object.entries(e).map(([n,o])=>`  ${n}: ${ke(o,t)}`).join(`
`)}
}`):typeof e}function C(e,t=new WeakSet,r){if(e==null||typeof e!="object")return e;if(typeof e=="function")return"[Function]";if(typeof e=="symbol")return"[Symbol]";if(e instanceof Date)return e.toISOString();if(e instanceof RegExp)return e.toString();if(e instanceof Map)return"[Map]";if(e instanceof Set)return"[Set]";if(r===void 0&&(r=e),t.has(e))return"[Circular]";t.add(e);let n=Array.isArray(e)?[]:{};for(let[o,i]of Object.entries(e))Xt.some(a=>o.toLowerCase().includes(a.toLowerCase()))?n[o]="[REDACTED]":i&&typeof i=="object"?Zt(i,r)||t.has(i)?n[o]="[Circular]":n[o]=C(i,t,r):typeof i=="function"?n[o]="[Function]":typeof i=="symbol"?n[o]="[Symbol]":n[o]=i;return n}function en(e){let t=e.error.message.toLowerCase();if(t.includes("undefined")&&t.includes("reading")){let r=t.match(/reading '(\w+)'/);if(r)return`Property access on null/undefined. Add null check before accessing '${r[1]}' or initialize the value.`}if(t.includes("is not a function")){let r=t.match(/(\w+) is not a function/);if(r)return`'${r[1]}' is not a function. Check if it's defined, imported, or if the object exists.`}return t.includes("map")||t.includes("filter")||t.includes("foreach")?"Array method called on non-array. Initialize as empty array or add type check.":t.includes("null")||t.includes("undefined")?"Null/undefined value encountered. Add defensive checks or initialize data.":"Check the error message and component state for the root cause."}function De(){return E.errors}function at(){return m.missingFunctions}function tn(){return m.helpers}function ct(){if(typeof document>"u")return[];let e=[],t=document.querySelectorAll("*");for(let r of Array.from(t)){let n=r.tagName.toLowerCase();n.includes("-")&&!customElements.get(n)&&(e.includes(n)||e.push(n))}return e}function lt(){let e=S();return e?e.internal.customTags||[]:[]}function nn(e){return typeof document>"u"?null:document.querySelector(`template[data-component="${e}"]`)?.innerHTML??null}function rn(e){return typeof document>"u"?0:document.querySelectorAll(e).length}function ve(e){let r=S()?.internal.components.has(e)??!1,n=nn(e),o=rn(e),s=De().has(e),a=[],c=[];if(n){let l=document.createElement("div");l.innerHTML=n,l.querySelectorAll("[data-ref]").forEach(u=>{let p=u.getAttribute("data-ref");p&&a.push(p)}),l.querySelectorAll("[data-slot], slot[name]").forEach(u=>{let p=u.getAttribute("data-slot")||u.getAttribute("name");p&&c.push(p)})}return{tagName:e,template:n,hasLogic:r,refs:a,slots:c,events:[],stateAccess:[],hasError:s,instanceCount:o}}function on(){let e=lt(),t={};for(let r of e)t[r]=ve(r);return t}function sn(){let e=["reactive-state","web-components","event-handling"],t=W();return t.errorBoundary&&e.push("error-boundary"),t.globals&&e.push("debug-globals"),t.api&&e.push("runtime-define"),t.methodMissing&&e.push("method-missing"),t.templateInference&&e.push("template-inference"),e}function an(){let e=lt();return{eventNaming:"unknown",stateStructure:"unknown",componentNaming:e.length>0?e.every(r=>r.match(/^[a-z]+-[a-z]+(-[a-z]+)*$/))?"kebab-case (e.g., user-profile, todo-list)":"mixed":"unknown"}}function ut(e,t){if(t.length===0)return`${e}(): any`;let r=t.map((n,o)=>n===null?`arg${o}: null`:n===void 0?`arg${o}: undefined`:Array.isArray(n)?"items: any[]":typeof n=="object"?"data: object":`arg${o}: ${typeof n}`);return`${e}(${r.join(", ")}): any`}function st(){return{framework:{name:"boreDOM",version:v,capabilities:[]},state:{shape:"{}",paths:[],sample:{}},components:{},issues:{errors:[],missingFunctions:[],missingComponents:[]},helpers:{defined:{},missing:{}},patterns:{eventNaming:"unknown",stateStructure:"unknown",componentNaming:"unknown"}}}function it(){return{issue:{type:"none",description:"LLM features disabled or unavailable"},relevantState:{}}}function cn(){return st()}function ft(){return it()}function ln(){return"{}"}function ot(e,t,r){}function Me(){return[...D]}function un(){return[...D]}function fn(){D=[]}var D,Xt,Ae,pt,we=x(()=>{"use strict";w();J();be();Q();q();rt();D=[],Xt=["password","token","secret","apiKey","api_key","auth","credential","private","key","pass"],Ae=Symbol("__llm_circular_check__");pt={context:cn,focus:ft,copy:ln,get attempts(){return un()},clearAttempts:fn,_recordAttempt:ot,inferTypes:Ne,typeOf:Pe,_clearTypes:je,validate:Se,apply:Ce,applyBatch:nt,_setValidationAppState:X}});var $e=async e=>{let t=new Map;for(let r=0;r<e.length;++r){let i=Array.from(Be("script[src]")).find(a=>((a.getAttribute("src")??"").split("/").pop()??"")===`${e[r]}.js`)?.getAttribute("src"),s=null;if(i)try{let c=await import(new URL(i,document.baseURI).href);for(let l of Object.keys(c)){s=c[l];break}t.set(e[r],s)}catch(a){console.error(`Unable to import "${i}"`,a)}}return t},Le=()=>Array.from(Be("template[data-component]")).filter(e=>e instanceof HTMLElement).map(e=>{let t={name:"",attributes:[]};for(let r in e.dataset)r==="component"?t.name=e.dataset[r]??"":t.attributes.push([yt(r),e.dataset[r]??""]);if(t.name==="")throw new Error(`A <template> was found with an invalid data-component: "${e.dataset.component}"`);return t}).map(({name:e,attributes:t})=>(Re(e,{attributes:t}),e)),re=(e,t)=>{let r=$(e);if(!H(r)){let n=`The tag name "${e}" is not a BoreDOM  component.
      
"createComponent" only accepts tag-names with matching <template> tags that have a data-component attribute in them.`;throw console.error(n),new Error(n)}return t&&(r.renderCallback=t),r},mt=e=>{let t=Oe(e);if(!(t===null||!H(t)))return t},Oe=e=>document.querySelector(e),Be=e=>document.querySelectorAll(e),$=(e,t)=>{let r=document.createElement(e);return t&&Array.isArray(t)&&t.length>0&&t.map(n=>r.appendChild(n)),r};var gt=(e,t)=>{document.readyState==="loading"?addEventListener("DOMContentLoaded",()=>dispatchEvent(new CustomEvent(e,{detail:t}))):dispatchEvent(new CustomEvent(e,{detail:t}))};var Ie=e=>typeof e=="object",Te=e=>typeof e=="function",H=e=>Ie(e)&&"isBored"in e&&!!e.isBored;var yt=e=>{if(e===""||!e.split("").some(r=>r!==r.toLowerCase()))return e;let t="";for(let r=0;r<e.length;r++){let n=e[r];n===n.toUpperCase()&&r!==0&&(t+="-"),t+=n.toLowerCase()}return t};var te=e=>e.startsWith("on"),ht=e=>e.startsWith("queriedOn"),ee=e=>te(e)?e.slice(2).toLowerCase():e.slice(9).toLowerCase(),ne=class extends HTMLElement{},Re=(e,t={})=>{customElements.get(e)||customElements.define(e,class extends ne{static get observedAttributes(){return typeof t.attributeChangedCallback=="object"?Object.keys(t.attributeChangedCallback):[]}constructor(){super()}isBored=!0;traverse(r,{traverseShadowRoot:n,query:o}={}){Array.from(n?this.shadowRoot?.querySelectorAll(o??"*")??[]:[]).concat(Array.from(this.querySelectorAll(o??"*"))).filter(i=>i instanceof HTMLElement).forEach(r)}#e(r){return r.split("'").filter(n=>n.length>2&&!(n.includes("(")||n.includes(",")||n.includes(")")))}#t(){let r;this.traverse(n=>{if(n instanceof HTMLElement){customElements.get(n.tagName.toLowerCase())&&(r=n);for(let i=0;i<n.attributes.length;i++){let s=n.attributes[i];if(te(s.name)){let a=this.#e(s.value);a.length>0&&a.forEach(c=>{n.addEventListener(ee(s.name),l=>gt(c,{event:l,dispatcher:n,component:this,index:this.parentElement?Array.from(this.parentElement.children).indexOf(this):-1}))}),n.setAttribute(`data-${s.name}-dispatches`,a.join()),n.removeAttribute(s.name)}}}},{traverseShadowRoot:!0})}isInitialized=!1;#n(){let r=Oe(`[data-component="${e}"]`)??$("template"),n=r.getAttribute("shadowrootmode");if(t.style||t.shadow||n){let i=t.shadowrootmode??n??"open",s=this.attachShadow({mode:i});if(t.style){let a=$("style");a.textContent=t.style,s.appendChild(a)}if(t.shadow){let a=$("template");a.innerHTML=t.shadow,s.appendChild(a.content.cloneNode(!0))}else n&&s.appendChild(r.content.cloneNode(!0))}r&&!n&&this.appendChild(r.content.cloneNode(!0)),t.onSlotChange&&this.traverse(i=>{i instanceof HTMLSlotElement&&i.addEventListener("slotchange",s=>t.onSlotChange?.(s))},{traverseShadowRoot:!0}),Te(t.onClick)&&this.addEventListener("click",t.onClick);for(let[i,s]of Object.entries(t))if(te(i)){if(!Te(s))continue;this.addEventListener(ee(i),s)}else if(ht(i)){let a=s;if(!Ie(a))continue;let c=ee(i);for(let[l,u]of Object.entries(a))this.traverse(p=>{p.addEventListener(c,u)},{traverseShadowRoot:!0,query:l})}t.attributes&&Array.isArray(t.attributes)&&t.attributes.map(([i,s])=>this.setAttribute(i,s)),this.#t(),this.isInitialized=!0}renderCallback=r=>{};connectedCallback(){this.isInitialized||this.#n(),this.renderCallback(this),t.connectedCallback?.(this)}slots=G(this);updateSlot(r,n,o){document.createElement(o).setAttribute("slot",r)}disconnectedCallback(){t.disconnectedCallback?.(this)}adoptedCallback(){t.adoptedCallback?.(this)}attributeChangedCallback(r,n,o){t.attributeChangedCallback&&t.attributeChangedCallback[r]({element:this,name:r,oldValue:n,newValue:o})}})},oe=e=>{Re(e,{})};function Ue(e,t){let r=t;return t===null||e.forEach(n=>{r=r[n]}),r}function Fe(e,t=[]){let r=[{path:[],obj:e}],n=[],o=new WeakSet;for(;r.length>0;){let{path:i,obj:s}=r.pop();if(!o.has(s)){o.add(s);for(let a in s){if(t.includes(a))continue;let c=s[a],l=i.concat(a);typeof c=="object"&&c!==null&&!o.has(c)&&r.push({path:l,obj:c}),n.push({path:l,value:c})}}}return n}function k(e){if(e==null||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);return t==null?!0:t===Object.prototype}q();function We(e,t,r){return(n,o)=>{addEventListener(n,i=>{let s=i?.detail?.event.currentTarget,a;for(;s;){if(s===e){try{let c=o({state:t,e:i.detail,detail:r});Promise.resolve(c).catch(l=>{console.error(`Error in async handler for "${n}" event`,l)})}catch(c){console.error(`Error in handler for "${n}" event`,c)}return}s instanceof HTMLElement?s=s.parentElement:s=void 0}})}}function ze(e){return new Proxy({},{get(t,r,n){let o=new Error(`Ref "${String(r)}" not found in <${e.tagName}>`);if(typeof r=="string"){let i=e.querySelectorAll(`[data-ref="${r}"]`);if(!i)throw o;let s=Array.from(i).filter(a=>a instanceof HTMLElement);if(s.length===0)throw o;return s.length===1?s[0]:s}}})}function G(e){return new Proxy({},{get(t,r,n){let o=new Error(`Slot "${String(r)}" not found in <${e.tagName}>`);if(typeof r=="string"){let i=e.querySelectorAll(`slot[name="${r}"]`);if(!i)throw o;let s=Array.from(i).filter(a=>a instanceof HTMLSlotElement);if(s.length===0)throw o;return s.length===1?s[0]:s}},set(t,r,n){if(typeof r!="string")return!1;let o=n;if(n instanceof HTMLElement)n.setAttribute("data-slot",r);else if(typeof n=="string")o=$("span"),o.setAttribute("data-slot",r),o.innerText=n;else throw new Error(`Invalid value for slot ${r} in <${e.tagName}>`);let i=Array.from(e.querySelectorAll(`[data-slot="${r}"]`));return i.length>0?i.forEach(s=>s.parentElement?.replaceChild(o,s)):Array.from(e.querySelectorAll(`slot[name="${r}"]`)).forEach(a=>a.parentElement?.replaceChild(o,a)),!0}})}function pe(e,t,r){let n=r||{targets:new WeakMap,path:[]};if(e!==void 0)return new Proxy(e,{set(o,i,s){return typeof i=="string"&&console.error(`State is read-only for web components. Unable to set '${i}'.`),!1},get(o,i,s){let a=Reflect.get(o,i,s),c=i==="__proto__";if(typeof i=="string"&&!c){n.targets.has(o)||n.targets.set(o,n.path.join("."));let u=n.targets.get(o);n.path.length=0,typeof u=="string"&&u!==""&&n.path.push(...u.split(".")),n.path.push(i)}if(c||Array.isArray(a)||k(a))return!n.targets.has(a)&&typeof i=="string"&&n.targets.set(a,n.path.join(".")),pe(a,t,n);let l=n.targets.get(o)??"";return typeof l=="string"&&typeof i=="string"&&(Array.isArray(o)||(l+=l!==""?`.${i}`:i),t.indexOf(l)===-1&&t.push(l)),n.path.length=0,n.path.push(l),a}})}function At(e){return()=>{let t=e.internal.updates,r=new Set,n=o=>{if(o)for(let i=0;i<o.length;i++){let s=o[i];if(!r.has(s)){r.add(s);try{s(e.app)}catch{}}}};for(let o=0;o<t.path.length;o++){let i=t.path[o],s=i.slice(i.indexOf(".")+1);n(t.subscribers.get(s));for(let[a,c]of t.subscribers.entries()){if(a===s)continue;let l=`${a}.`,u=`${s}.`;(s.startsWith(l)||a.startsWith(u))&&n(c)}}t.path=[],t.value=[],t.raf=void 0}}function qe(e){let t=e.internal,r=e;if(r===void 0)return e;let n=new WeakSet,o=Symbol("boredom-proxy");function i(a,c){if(n.has(a))return a;let l=new Proxy(a,{get(u,p,d){return p===o?!0:Reflect.get(u,p,d)},set(u,p,d){if(!(u[p]!==d))return!0;if(typeof p=="string"){let y=Array.isArray(a)?c:`${c}.${p}`;!(d&&d[o]===!0)&&(Array.isArray(d)||k(d))&&(d=s(d,y))}return Reflect.set(u,p,d),typeof p!="string"||(Array.isArray(a)?t.updates.path.push(`${c}`):t.updates.path.push(`${c}.${p}`),t.updates.value.push(u),t.updates.raf||(t.updates.raf=requestAnimationFrame(At(e)))),!0}});return n.add(a),n.add(l),l}function s(a,c){if(!Array.isArray(a)&&!k(a)||n.has(a)||a&&a[o]===!0)return a;if(Array.isArray(a))for(let l=0;l<a.length;l++){let u=a[l];(Array.isArray(u)||k(u))&&(a[l]=s(u,c))}else for(let l of Object.keys(a)){let u=a[l];(Array.isArray(u)||k(u))&&(a[l]=s(u,`${c}.${l}`))}return i(a,c)}return Fe(e,["internal"]).forEach(({path:a,value:c})=>{if(Array.isArray(c)||k(c)&&!n.has(c)){let u=a.join("."),p=Ue(a.slice(0,-1),r);if(p===c)return;p[a.at(-1)]=i(c,u)}}),e}function Ve(e){let t=e.internal.customTags.filter(n=>document.querySelector(n)!==null),r=e.internal.components;for(let[n,o]of r.entries()){if(o===null||!t.includes(n))continue;let i=Array.from(document.querySelectorAll(n)).filter(s=>H(s));i.length!==0&&i.forEach((s,a)=>{o(e,{index:a,name:n,data:void 0})(s)})}}function de(e,t,r){let n=t.internal.components.get(e);if(n){let o={...r,tagName:e};return re(e,n(t,o))}return re(e)}w();J();be();we();w();Q();Q();var dt=!1,pn={get errors(){return E.errors},get lastError(){return E.lastError},rerender:E.rerender,clearError:E.clearError,export:E.export,get config(){return E.config},_setDebugConfig:j,version:v,define:V.define,operate:V.operate,exportComponent:V.exportComponent,get missingFunctions(){return m.missingFunctions},get lastMissing(){return m.lastMissing},defineHelper:m.defineHelper,get helpers(){return m.helpers},clearHelper:m.clearHelper,clearMissingFunctions:m.clearMissingFunctions,get inferredTemplates(){return m.inferredTemplates},inferTemplate:m.inferTemplate,llm:pt};typeof window<"u"&&(window.boreDOM=pn);async function mr(e,t,r){r?.debug!==void 0&&j(r.debug),!dt&&f("versionLog")&&(dt=!0,typeof console<"u"&&typeof console.info=="function"&&console.info(`[boreDOM] v${v}`));let n=Le(),o=await $e(n);if(t)for(let a of Object.keys(t))o.set(a,t[a]);let s=qe({app:e,internal:{customTags:n,components:o,updates:{path:[],value:[],raf:void 0,subscribers:new Map}}});return s.internal.updates.path=[],s.internal.updates.value=[],s.internal.updates.raf&&(cancelAnimationFrame(s.internal.updates.raf),s.internal.updates.raf=void 0),Je(s,dn,oe),X(s),typeof window<"u"&&window.boreDOM?.llm?._setValidationAppState&&window.boreDOM.llm._setValidationAppState(s),Ve(s),s.app}function dn(e){let t=null,r,n=(o,i)=>s=>{let{internal:a,app:c}=o,l=[],u=pe(c,l),p=ze(s),d=G(s),F=We(s,c,i);if(t!==s){let y=async()=>{let b=a.updates.subscribers;for(let _ of l){let T=b.get(_);T?T.includes(r)||T.push(r):b.set(_,[r])}},R;try{R=e({detail:i,state:u,refs:p,on:F,self:s})}catch(b){let _=b;f("console")&&(i?.name??s.tagName.toLowerCase(),void 0),R=()=>{}}r=b=>{let _=i?.name??s.tagName.toLowerCase(),T=Xe(_,s,()=>r(b));if(f("errorBoundary"))try{R({state:b,refs:p,slots:d,self:s,detail:i,makeComponent:(U,M)=>de(U,o,M?.detail),helpers:T}),y(),se(s)}catch(U){let M=U,Z={component:_,element:s,error:M,state:c,refs:p,slots:d,timestamp:Date.now(),rerender:()=>r(b),stack:M.stack??""};f("console")?void 0:He(_,M)}else R({state:b,refs:p,slots:d,self:s,detail:i,makeComponent:(U,M)=>de(U,o,M?.detail),helpers:T}),y()}}r(u),t=s};return n[ye]=!0,n}export{v as VERSION,pn as boreDOM,bt as clearGlobals,W as getDebugConfig,mr as inflictBoreDOM,f as isDebugEnabled,mt as queryComponent,oe as registerComponent,j as setDebugConfig,dn as webComponent};
