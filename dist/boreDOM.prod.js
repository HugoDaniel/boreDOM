var k=typeof __LLM__<"u"&&__LLM__,fe=e=>e.split("'").filter(t=>t.length>2&&!(t.includes("(")||t.includes(",")||t.includes(")"))),le=e=>e.split(/[\s,]+/g).map(t=>t.trim()).filter(Boolean),J=k?le:e=>{let t=e.trim();return t.length===0?[]:t.includes("dispatch(")||t.includes("'")?fe(e):le(e)},ue=async e=>{let t=new Map;for(let r=0;r<e.length;++r){let s=Array.from(pe("script[src]")).find(a=>((a.getAttribute("src")??"").split("/").pop()??"")===`${e[r]}.js`)?.getAttribute("src"),i=null;if(s)try{let l=await import(new URL(s,document.baseURI).href);for(let m of Object.keys(l)){i=l[m];break}t.set(e[r],i)}catch(a){console.error(`Unable to import "${s}"`,a)}}return t},de=async(e,t)=>{let r=!k&&(t?.mirrorAttributes??!0),o=[],n=new Map,s=Array.from(pe("template[data-component]")).filter(i=>i instanceof HTMLElement);for(let i of s){let a="",l=[];for(let m in i.dataset)m==="component"?a=i.dataset[m]??"":r&&l.push([Fe(m),i.dataset[m]??""]);if(!a){console.error("Invalid <template> found: missing data-component",i);continue}if(Ie(i)){let m=i.content.querySelector("script");if(m){let c=m.textContent;if(c&&c.trim().length>0)try{let f=new Blob([c],{type:"text/javascript"}),u=URL.createObjectURL(f),g=await import(u);URL.revokeObjectURL(u),m.remove();let p=null;if(g.default)p=g.default;else{let d=Object.keys(g);d.length>0&&(p=g[d[0]])}if(p){let d=e?e(p):p;n.set(a,d)}}catch{}}}ge(a,{attributes:l}),o.push(a)}return{names:o,inlineLogic:n}},Y=(e,t)=>{let r=x(e);if(!H(r)){let o=`The tag name "${e}" is not a BoreDOM  component.
      
"createComponent" only accepts tag-names with matching <template> tags that have a data-component attribute in them.`;throw console.error(o),new Error(o)}return t&&(r.renderCallback=t),r},Ne=e=>{let t=K(e);if(!(t===null||!H(t)))return t},K=e=>document.querySelector(e),pe=e=>document.querySelectorAll(e),x=(e,t)=>{let r=document.createElement(e);return t&&Array.isArray(t)&&t.length>0&&t.map(o=>r.appendChild(o)),r};var Z=(e,t)=>{document.readyState==="loading"?addEventListener("DOMContentLoaded",()=>dispatchEvent(new CustomEvent(e,{detail:t}))):dispatchEvent(new CustomEvent(e,{detail:t}))};var Ie=e=>e instanceof HTMLTemplateElement,me=e=>typeof e=="object",ce=e=>typeof e=="function",H=e=>me(e)&&"isBored"in e&&!!e.isBored;var Fe=e=>{if(e===""||!e.split("").some(r=>r!==r.toLowerCase()))return e;let t="";for(let r=0;r<e.length;r++){let o=e[r];o===o.toUpperCase()&&r!==0&&(t+="-"),t+=o.toLowerCase()}return t},Q=e=>e.startsWith("on"),Ue=e=>e.startsWith("queriedOn"),V=e=>Q(e)?e.slice(2).toLowerCase():e.slice(9).toLowerCase(),X=class extends HTMLElement{},ge=(e,t={})=>{if(customElements.get(e))return;let r=(c,f,{traverseShadowRoot:u,query:g}={})=>{Array.from(u?c.shadowRoot?.querySelectorAll(g??"*")??[]:[]).concat(Array.from(c.querySelectorAll(g??"*"))).filter(d=>d instanceof HTMLElement).forEach(f)},o=(c,f,u,g)=>{g.length!==0&&g.forEach(p=>{f.addEventListener(u,d=>Z(p,{event:d,dispatcher:f,component:c,index:c.parentElement?Array.from(c.parentElement.children).indexOf(c):-1}))})},i=k?c=>{r(c,f=>{for(let u=0;u<f.attributes.length;u++){let g=f.attributes[u],p=g.name;if(p==="data-dispatch"||p.startsWith("data-dispatch-")){let d=p==="data-dispatch"?"click":p.slice(14);o(c,f,d,J(g.value)),f.removeAttribute(p)}}},{traverseShadowRoot:!0})}:c=>{r(c,f=>{for(let u=0;u<f.attributes.length;u++){let g=f.attributes[u],p=g.name;if(p.startsWith("on-")){let d=p.slice(3);o(c,f,d,J(g.value)),f.removeAttribute(p);continue}if(p==="data-dispatch"||p.startsWith("data-dispatch-")){let d=p==="data-dispatch"?"click":p.slice(14);o(c,f,d,J(g.value)),f.removeAttribute(p);continue}if(Q(p)){let d=fe(g.value);d.length>0&&o(c,f,V(p),d),f.setAttribute(`data-${p}-dispatches`,d.join()),f.removeAttribute(p)}}},{traverseShadowRoot:!0})},m=k?c=>{let f=K(`[data-component="${e}"]`)??x("template");c.appendChild(f.content.cloneNode(!0)),t.attributes&&Array.isArray(t.attributes)&&t.attributes.forEach(([u,g])=>c.setAttribute(u,g)),i(c),c.isInitialized=!0}:c=>{let f=K(`[data-component="${e}"]`)??x("template"),u=f.getAttribute("shadowrootmode");if(t.style||t.shadow||u){let p=t.shadowrootmode??u??"open",d=c.attachShadow({mode:p});if(t.style){let y=x("style");y.textContent=t.style,d.appendChild(y)}if(t.shadow){let y=x("template");y.innerHTML=t.shadow,d.appendChild(y.content.cloneNode(!0))}else u&&d.appendChild(f.content.cloneNode(!0))}f&&!u&&c.appendChild(f.content.cloneNode(!0)),t.onSlotChange&&r(c,p=>{p instanceof HTMLSlotElement&&p.addEventListener("slotchange",d=>t.onSlotChange?.(d))},{traverseShadowRoot:!0}),ce(t.onClick)&&c.addEventListener("click",t.onClick);for(let[p,d]of Object.entries(t))if(Q(p)){if(!ce(d))continue;c.addEventListener(V(p),d)}else if(Ue(p)){let y=d;if(!me(y))continue;let E=V(p);for(let[S,h]of Object.entries(y))r(c,_=>{_.addEventListener(E,h)},{traverseShadowRoot:!0,query:S})}t.attributes&&Array.isArray(t.attributes)&&t.attributes.forEach(([p,d])=>c.setAttribute(p,d)),i(c),c.isInitialized=!0};customElements.define(e,class extends X{static get observedAttributes(){return typeof t.attributeChangedCallback=="object"?Object.keys(t.attributeChangedCallback):[]}constructor(){super()}isBored=!0;isInitialized=!1;traverse(c,f={}){r(this,c,f)}renderCallback=c=>{};connectedCallback(){this.isInitialized||m(this),this.renderCallback(this),t.connectedCallback?.(this)}disconnectedCallback(){t.disconnectedCallback?.(this)}adoptedCallback(){t.adoptedCallback?.(this)}attributeChangedCallback(c,f,u){t.attributeChangedCallback&&t.attributeChangedCallback[c]({element:this,name:c,oldValue:f,newValue:u})}})},ee=e=>{ge(e,{})};function R(e,t){let r=t;return t===null||e.forEach(o=>{r=r[o]}),r}function N(e,t=[]){let r=[{path:[],obj:e}],o=[],n=new WeakSet;for(;r.length>0;){let{path:s,obj:i}=r.pop();if(!n.has(i)){n.add(i);for(let a in i){if(t.includes(a))continue;let l=i[a],m=s.concat(a);typeof l=="object"&&l!==null&&!n.has(l)&&r.push({path:m,obj:l}),o.push({path:m,value:l})}}}return o}function D(e){if(e==null||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);return t==null?!0:t===Object.prototype}var je=e=>{let t={};for(let[r,o]of Object.entries(e.dataset))r.startsWith("prop")||o!==void 0&&(t[r]=o);return t};function ye(e,t,r){return(o,n)=>{addEventListener(o,s=>{let i=s?.detail?.event.currentTarget,a;for(;i;){if(i===e){try{let l=n({state:t,e:s.detail,detail:r});Promise.resolve(l).catch(m=>{console.error(`Error in async handler for "${o}" event`,m)})}catch(l){console.error(`Error in handler for "${o}" event`,l)}return}i instanceof HTMLElement?i=i.parentElement:i=void 0}})}}function be(e){return new Proxy({},{get(t,r,o){let n=new Error(`Ref "${String(r)}" not found in <${e.tagName}>`);if(typeof r=="string"){let s=e.querySelectorAll(`[data-ref="${r}"]`);if(!s)throw n;let i=Array.from(s).filter(a=>a instanceof HTMLElement);if(i.length===0)throw n;return i.length===1?i[0]:i}}})}function he(e){return new Proxy({},{get(t,r,o){let n=new Error(`Slot "${String(r)}" not found in <${e.tagName}>`);if(typeof r=="string"){let s=e.querySelectorAll(`slot[name="${r}"]`);if(!s)throw n;let i=Array.from(s).filter(a=>a instanceof HTMLSlotElement);if(i.length===0)throw n;return i.length===1?i[0]:i}},set(t,r,o){if(typeof r!="string")return!1;let n=o;if(o instanceof HTMLElement)o.setAttribute("data-slot",r);else if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")n=x("span"),n.setAttribute("data-slot",r),n.innerText=String(o);else throw new Error(`Invalid value for slot ${r} in <${e.tagName}>`);let s=Array.from(e.querySelectorAll(`[data-slot="${r}"]`));return s.length>0?s.forEach(i=>i.parentElement?.replaceChild(n,i)):Array.from(e.querySelectorAll(`slot[name="${r}"]`)).forEach(a=>a.parentElement?.replaceChild(n,a)),!0}})}function I(e,t,r=!1,o){let n=o||{targets:new WeakMap,path:[]};if(e!==void 0)return new Proxy(e,{set(s,i,a){return r?Reflect.set(s,i,a):(typeof i=="string"&&console.error(`State is read-only for web components. Unable to set '${i}'.`),!1)},get(s,i,a){let l=Reflect.get(s,i,a),m=i==="__proto__";if(typeof i=="string"&&!m){n.targets.has(s)||n.targets.set(s,n.path.join("."));let f=n.targets.get(s);n.path.length=0,typeof f=="string"&&f!==""&&n.path.push(...f.split(".")),n.path.push(i)}if(m||Array.isArray(l)||D(l))return!n.targets.has(l)&&typeof i=="string"&&n.targets.set(l,n.path.join(".")),I(l,t,r,n);let c=n.targets.get(s)??"";return typeof c=="string"&&typeof i=="string"&&(Array.isArray(s)||(c+=c!==""?`.${i}`:i),t.indexOf(c)===-1&&t.push(c)),n.path.length=0,n.path.push(c),l}})}function Pe(e){return()=>{let t=e.internal.updates,r=new Set,o=n=>{if(n)for(let s=0;s<n.length;s++){let i=n[s];if(!r.has(i)){r.add(i);try{i(e.app)}catch{}}}};for(let n=0;n<t.path.length;n++){let s=t.path[n],i=s.slice(s.indexOf(".")+1);o(t.subscribers.get(i));for(let[a,l]of t.subscribers.entries()){if(a===i)continue;let m=`${a}.`,c=`${i}.`;(i.startsWith(m)||a.startsWith(c))&&o(l)}}t.path=[],t.value=[],t.raf=void 0}}function Ee(e){let t=e.internal,r=e;if(r===void 0)return e;let o=new WeakSet,n=Symbol("boredom-proxy");function s(a,l){if(o.has(a))return a;let m=new Proxy(a,{get(c,f,u){return f===n?!0:Reflect.get(c,f,u)},set(c,f,u){if(!(c[f]!==u))return!0;if(typeof f=="string"){let p=Array.isArray(a)?l:`${l}.${f}`;!(u&&u[n]===!0)&&(Array.isArray(u)||D(u))&&(u=i(u,p))}return Reflect.set(c,f,u),typeof f!="string"||(Array.isArray(a)?t.updates.path.push(`${l}`):t.updates.path.push(`${l}.${f}`),t.updates.value.push(c),t.updates.raf||(t.updates.raf=requestAnimationFrame(Pe(e)))),!0}});return o.add(a),o.add(m),m}function i(a,l){if(!Array.isArray(a)&&!D(a)||o.has(a)||a&&a[n]===!0)return a;if(Array.isArray(a))for(let m=0;m<a.length;m++){let c=a[m];(Array.isArray(c)||D(c))&&(a[m]=i(c,l))}else for(let m of Object.keys(a)){let c=a[m];(Array.isArray(c)||D(c))&&(a[m]=i(c,`${l}.${m}`))}return s(a,l)}return N(e,["internal"]).forEach(({path:a,value:l})=>{if(Array.isArray(l)||D(l)&&!o.has(l)){let c=a.join("."),f=R(a.slice(0,-1),r);if(f===l)return;f[a.at(-1)]=s(l,c)}}),e}function _e(e){let t=e.internal.customTags.filter(o=>document.querySelector(o)!==null),r=e.internal.components;for(let[o,n]of r.entries()){if(n===null||!t.includes(o))continue;let s=Array.from(document.querySelectorAll(o)).filter(i=>H(i));s.length!==0&&s.forEach((i,a)=>{if(i.isBoredInitialized)return;let l={index:a,name:o,data:je(i)};n(e,l)(i),i.__boreDOMDetail=l,i.isBoredInitialized=!0})}}function F(e,t,r){let o=t.internal.components.get(e);if(o){let n={...r,tagName:e};n.data||(n.data={});let s=Y(e,o(t,n));return s.__boreDOMDetail=n,s}return Y(e)}var L={console:!0,globals:!0,errorBoundary:!0,visualIndicators:!0,errorHistory:!0,versionLog:!0,api:!0,methodMissing:!0,templateInference:!0,strict:!1,outputFormat:"human",llm:!0},U=new Map,j=null;function b(e){return e==="errorBoundary"?L.errorBoundary??!0:!1}function P(e){if(typeof e=="boolean"){let t=e;L={console:t,globals:t,errorBoundary:!0,visualIndicators:t,errorHistory:t,versionLog:t,api:t,methodMissing:t,templateInference:t,strict:!1,outputFormat:"human",llm:t}}else L={...L,...e}}function Se(){return{...L}}function We(){}function Me(e,t){console.error(`[boreDOM] Render error in <${e}>: ${t.message}`)}function te(e){e.removeAttribute("data-boredom-error")}function Ge(e){let t=e?U.get(e):j;if(!t)return null;try{return{component:t.component,state:JSON.parse(JSON.stringify(t.state)),timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}catch(r){return b("console")&&console.warn(`[boreDOM] exportState: Unable to serialize state for <${t.component}>:`,r instanceof Error?r.message:r),{component:t.component,state:"[Unable to serialize - contains circular references or functions]",timestamp:new Date(t.timestamp).toISOString(),error:t.error.message}}}var O={get errors(){return U},get lastError(){return j},rerender(e){let t=e?U.get(e):j;t?t.rerender():console.warn("[boreDOM] No error context found to rerender")},clearError(e){let t=e?U.get(e):j;t?(te(t.element),void 0):b("console")&&console.warn(e?`[boreDOM] clearError: No error found for <${e}>`:"[boreDOM] clearError: No error to clear")},export:Ge,get config(){return Se()}};var v=Symbol("boreDOM.webComponent"),Ae=null,Ce=null,we=null;function ne(e,t,r){Ae=e,t&&(Ce=t),r&&(we=r)}function C(){return Ae}function xe(){return Ce}function De(){return we}var qe=new WeakMap;function ze(e){return typeof e=="function"&&e[v]===!0}function Oe(e,t,r){return console.warn("[boreDOM] define() is not available in production build"),!1}function Je(e,t){let r=C();if(!r)return;let o=Array.from(document.querySelectorAll(e)),n={count:0};o.forEach((s,i)=>{if(s instanceof HTMLElement&&"renderCallback"in s)try{let l=t(r,{index:i,name:e,data:void 0});s.renderCallback=l,l(s)}catch(a){n.count++,b("console")&&console.error(`[boreDOM] Failed to initialize <${e}> instance ${i}:`,a)}}),n.count>0&&b("console")&&console.warn(`[boreDOM] ${n.count} of ${o.length} <${e}> instances failed to initialize`)}function Le(e,t=0){console.warn("[boreDOM] operate() is not available in production build")}function Ve(e){return console.warn("[boreDOM] exportComponent() is not available in production build"),null}var W={define:Oe,operate:Le,exportComponent:Ve};var T=new Map,G=new Map,re=null,Ke=new Map;function Te(e,t,r){return{}}function Qe(e,t){}function Xe(e){T.delete(e)}function Ye(){G.clear(),re=null}function Ze(e){b("console")&&(console.log("%c\u26A0\uFE0F boreDOM: Missing function %c%s%c in <%s>","color: #f39c12; font-weight: bold","color: #9b59b6; font-weight: bold",e.name,"color: #f39c12",e.component),e.args.length>0&&console.log("   Arguments:",e.args),console.log("%c\u{1F4A1} Define it:","color: #3498db; font-weight: bold"),console.log(`   $defineMissing((${ve(e.args)}) => { ... })`),console.log(`   boreDOM.defineHelper('${e.name}', (${ve(e.args)}) => { ... })`))}function ve(e){return e.length===0?"":e.map((t,r)=>t==null?`arg${r}`:Array.isArray(t)?"items":typeof t=="object"?"name"in t&&"email"in t?"user":"id"in t&&"title"in t?"item":"id"in t?"record":"data":typeof t=="string"?"text":typeof t=="number"?"count":typeof t=="boolean"?"flag":`arg${r}`).join(", ")}function et(e){if(!b("errorHistory"))return;let t=G.get(e.name)||[];t.length>=10&&t.shift(),t.push(e),G.set(e.name,t),re=e}function tt(e){if(!b("globals")||typeof window>"u")return;let t=window;t.$missingName=e.name,t.$missingArgs=e.args,t.$missingComponent=e.component,t.$defineMissing=e.define}function nt(e,t){return null}function rt(e){return e.replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function ot(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function it(e){if(e==="true")return!0;if(e==="false")return!1;let t=Number(e);if(!isNaN(t)&&e!=="")return t;if(e.startsWith("{")||e.startsWith("["))try{return JSON.parse(e)}catch{return e}return e}function st(e){return e==null?"":typeof e=="object"?JSON.stringify(e):String(e)}var A={get missingFunctions(){return G},get lastMissing(){return re},defineHelper:Qe,get helpers(){return new Map(T)},clearHelper:Xe,clearMissingFunctions:Ye,get inferredTemplates(){return Ke},inferTemplate:nt};var at=new Set(["script","style","noscript","template","link","meta","head","title"]),lt=new Set(["id","class","type","value","checked","disabled","placeholder","href","src","alt","title","role"]);function ct(e){return!(e.hasAttribute("hidden")||e.style.display==="none"||e.style.visibility==="hidden"||e.getAttribute("aria-hidden")==="true")}function oe(e){if(!(e instanceof HTMLElement))return null;let t=e.tagName.toLowerCase();if(at.has(t)||!ct(e))return null;let r={tagName:t},o={},n=!1;for(let a of Array.from(e.attributes)){let l=a.name;(lt.has(l)||l.startsWith("aria-")||l.startsWith("data-"))&&(l==="checked"||l==="disabled"?o[l]=e[l]:l==="value"&&(t==="input"||t==="textarea"||t==="select")?o[l]=e.value:o[l]=a.value,n=!0)}n&&(r.attributes=o);let s="";for(let a of Array.from(e.childNodes))if(a.nodeType===Node.TEXT_NODE){let l=a.nodeValue?.trim();l&&(s+=l+" ")}s=s.trim(),s&&(r.text=s);let i=[];for(let a of Array.from(e.children)){let l=oe(a);l&&i.push(l)}return i.length>0&&(r.children=i),t==="div"&&!n&&!s&&i.length===0?null:r}function $e(e,t){let r=[];try{for(let o of t){let n=Be(e,o);n&&r.push(n)}return{success:!0}}catch(o){for(let n=r.length-1;n>=0;n--)try{Be(e,r[n])}catch(s){console.error("Critical: Rollback failed",s)}return{success:!1,error:o.message||String(o)}}}function ke(e,t){if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null||Array.isArray(e)!==Array.isArray(t))return!1;let r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(let n of r)if(!o.includes(n)||!ke(e[n],t[n]))return!1;return!0}function ft(e){return e===""?[]:e==="/"?[""]:e.split("/").slice(1).map(t=>t.replace(/~1/g,"/").replace(/~0/g,"~"))}function Be(e,t){let r=ft(t.path);if(r.length===0)throw new Error("Cannot operate on root state directly");let o=r.pop(),n=e;for(let s of r){if(n==null)throw new Error(`Path not found: ${t.path}`);if(Array.isArray(n)){let i=parseInt(s,10);if(isNaN(i))throw new Error(`Invalid array index: ${s}`);n=n[i]}else n=n[s]}if(n==null)throw new Error(`Path not found: ${t.path}`);if(t.op==="test"){let s;if(Array.isArray(n))if(o==="-")s=void 0;else{let i=parseInt(o,10);isNaN(i)||i<0||i>=n.length?s=void 0:s=n[i]}else s=n[o];if(!ke(s,t.value))throw new Error(`Test failed at ${t.path}: expected ${JSON.stringify(t.value)}, got ${JSON.stringify(s)}`);return null}if(Array.isArray(n)){if(o==="-"){if(t.op==="add")return n.push(t.value),{op:"remove",path:t.path.replace(/-$/,(n.length-1).toString())};throw new Error("Can only add to '-' index")}let s=parseInt(o,10);if(isNaN(s)||s<0)throw new Error(`Invalid array index: ${o}`);if(t.op==="add"){if(s>n.length)throw new Error("Index out of bounds");return n.splice(s,0,t.value),{op:"remove",path:t.path}}else if(t.op==="remove"){if(s>=n.length)throw new Error("Index out of bounds");let i=n[s];return n.splice(s,1),{op:"add",path:t.path,value:i}}else if(t.op==="replace"){if(s>=n.length)throw new Error("Index out of bounds");let i=n[s];return n[s]=t.value,{op:"replace",path:t.path,value:i}}}else if(t.op==="add"){let s=n[o],i=Object.prototype.hasOwnProperty.call(n,o);return n[o]=t.value,i?{op:"replace",path:t.path,value:s}:{op:"remove",path:t.path}}else if(t.op==="replace"){if(!Object.prototype.hasOwnProperty.call(n,o))throw new Error(`Path not found: ${t.path}`);let s=n[o];return n[o]=t.value,{op:"replace",path:t.path,value:s}}else if(t.op==="remove"){if(!Object.prototype.hasOwnProperty.call(n,o))throw new Error(`Path not found: ${t.path}`);let s=n[o];return delete n[o],{op:"add",path:t.path,value:s}}return null}var B="0.25.25";var ie=typeof __LLM__<"u"?__LLM__:!1,ut=e=>oe(e||document.body),dt=e=>{let t=C();return!t||!t.app?{success:!1,error:"No app state found"}:$e(t.app,e)},He={vision:ie?ut:()=>null,transact:ie?dt:()=>({success:!1,error:"Production mode"}),compact:ie?()=>{let e=C();if(!e||!e.app)return null;let t=e.app,r=N(t).map(s=>s.path.join(".")),o={};Object.entries(t).forEach(([s,i])=>{Array.isArray(i)?o[s]=`[${i.length}]`:i&&typeof i=="object"?o[s]="{...}":o[s]=i});let n=Array.from(e.internal.components.entries()).map(([s,i])=>({tag:s,hasLogic:!!i}));return{framework:{name:"boreDOM",version:B},state:{paths:r,sample:o},components:n}}:()=>null};var pt=e=>e.replace(/-([a-z])/g,(t,r)=>r.toUpperCase()),mt=e=>e.replace(/\[(\d+)\]/g,".$1").replace(/^\./,"").split(".").filter(Boolean),$=(e,t)=>{if(e==null)return;let r=mt(t);return r.length===0?e:R(r,e)},w=(e,t)=>{let r=e.trim();if(r)return r==="index"||r==="i"?t.index:r==="item"?t.item:r==="detail"?t.detail:r==="self"?t.self:r.startsWith("state.")?$(t.state,r.slice(6)):r.startsWith("item.")?$(t.item,r.slice(5)):r.startsWith("detail.")?$(t.detail,r.slice(7)):r.startsWith("self.")?$(t.self,r.slice(5)):$(t.state,r)},gt=e=>{let t=e.getAttribute("data-class-base");if(t!==null)return t;let r=e.className;return e.setAttribute("data-class-base",r),r},yt=(e,t,r)=>{let o=gt(e);if(t.includes(":")){let s=[];t.split(",").forEach(a=>{let[l,m]=a.split(":").map(c=>c.trim());!l||!m||w(m,r)&&s.push(l)});let i=[o,...s].filter(Boolean).join(" ").trim();e.className=i;return}let n=w(t,r);if(typeof n=="string")e.className=[o,n].filter(Boolean).join(" ").trim();else if(Array.isArray(n))e.className=[o,n.join(" ")].filter(Boolean).join(" ").trim();else if(n&&typeof n=="object"){let s=Object.entries(n).filter(([,i])=>!!i).map(([i])=>i);e.className=[o,...s].filter(Boolean).join(" ").trim()}else e.className=o.trim()},q=(e,t)=>{let r=[];if(e instanceof DocumentFragment){let n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;n.nextNode();)r.push(n.currentNode)}else r.push(e),e.traverse(n=>{r.push(n)},{traverseShadowRoot:!0});let o=t.item===void 0;r.forEach(n=>{if(n instanceof HTMLTemplateElement||o&&n.closest("[data-list-item]"))return;let s=n.getAttribute("data-list");if(s){let u=n.querySelector("template[data-item]");if(u instanceof HTMLTemplateElement){let g=w(s,t),p=Array.isArray(g)?g:[];Array.from(n.children).forEach(y=>{y.hasAttribute("data-list-item")&&y.remove()});let d=document.createDocumentFragment();p.forEach((y,E)=>{let S=u.content.cloneNode(!0);Array.from(S.childNodes).forEach(h=>{h.nodeType===Node.ELEMENT_NODE&&h.setAttribute("data-list-item","")}),q(S,{...t,item:y,index:E}),d.appendChild(S)}),n.appendChild(d)}}let i=n.getAttribute("data-text");if(i){let u=w(i,t);n.textContent=u==null?"":String(u)}let a=n.getAttribute("data-show");a&&(n.hidden=!w(a,t));let l=n.getAttribute("data-class");l&&yt(n,l,t);let m=n.getAttribute("data-value");if(m&&"value"in n){let u=w(m,t);n.value=u==null?"":String(u)}let c=n.getAttribute("data-checked");if(c&&"checked"in n){let u=w(c,t);n.checked=!!u}let f=Array.from(n.attributes).filter(u=>u.name.startsWith("data-prop-"));if(f.length>0){let u=!1;if(f.forEach(g=>{let p=g.name.slice(10);if(!p)return;let d=w(g.value,t),y=`data-${p}`,E=n.getAttribute(y),h=(d==null||typeof d=="string"||typeof d=="number"||typeof d=="boolean")&&d!==void 0&&d!==null?String(d):null;h===null?E!==null&&(n.removeAttribute(y),u=!0):E!==h&&(n.setAttribute(y,h),u=!0);let _=pt(p),M=n.__boreDOMDetail;M&&(M.data||(M.data={}),M.data[_]!==d&&(M.data[_]=d,u=!0))}),u){let g=n.__boreDOMRerender;typeof g=="function"&&g()}}})};var Re=!1,ae=typeof __LLM__<"u"&&__LLM__,bt=!ae&&!1,ht=(e,...t)=>{let r="";for(let o=0;o<e.length;o++)r+=e[o],o<t.length&&(r+=String(t[o]));return r};function Et(e,t,r){if(typeof document<"u"){let o=document.querySelector(`template[data-component="${e}"]`);if(o)o.innerHTML=t;else{let n=document.createElement("template");n.setAttribute("data-component",e),n.innerHTML=t,document.body.appendChild(n)}}return z(r)}var se={get errors(){return O.errors},get lastError(){return O.lastError},rerender:O.rerender,clearError:O.clearError,export:O.export,get config(){return O.config},_setDebugConfig:P,version:B,llm:He,component:Et,html:ht};bt&&(Object.assign(se,{define:W.define,operate:W.operate,exportComponent:W.exportComponent,defineHelper:A.defineHelper,clearHelper:A.clearHelper,clearMissingFunctions:A.clearMissingFunctions,inferTemplate:A.inferTemplate}),Object.defineProperties(se,{missingFunctions:{get:()=>A.missingFunctions},lastMissing:{get:()=>A.lastMissing},helpers:{get:()=>A.helpers},inferredTemplates:{get:()=>A.inferredTemplates}}));typeof window<"u"&&(window.boreDOM=se,window.dispatch=Z);async function En(e,t,r){r?.debug!==void 0&&P(r.debug),!Re&&b("versionLog")&&(Re=!0);let o=f=>f&&f[v]?f:typeof f=="function"?z(f):f,n=typeof __SINGLE_FILE__<"u"&&__SINGLE_FILE__,s=r?.singleFile??n,{names:i,inlineLogic:a}=await de(o,{mirrorAttributes:r?.mirrorAttributes}),l=s?new Map:await ue(i);if(a)for(let[f,u]of a)(!l.has(f)||l.get(f)===null)&&l.set(f,u);if(t)for(let f of Object.keys(t))l.set(f,t[f]);for(let f of i)(!l.has(f)||l.get(f)===null)&&l.set(f,z(()=>()=>{}));let c=Ee({app:e,internal:{customTags:i,components:l,updates:{path:[],value:[],raf:void 0,subscribers:new Map}}});return c.internal.updates.path=[],c.internal.updates.value=[],c.internal.updates.raf&&(cancelAnimationFrame(c.internal.updates.raf),c.internal.updates.raf=void 0),ne(c,z,ee),_e(c),ae||void 0,c.app}function z(e){let t=(r,o)=>n=>{let{internal:s,app:i}=r,a=[],l=I(i,a,!0),m=be(n),c=he(n),f=ye(n,i,o),u;n.state=l,n.refs=m,n.slots=c;let g=async()=>{let d=s.updates.subscribers;for(let y of a){let E=d.get(y);E?E.includes(u)||E.push(u):d.set(y,[u])}},p;try{p=e({detail:o,state:l,refs:m,on:f,self:n,makeComponent:(d,y)=>F(d,r,y?.detail)})}catch(d){let y=d;b("console")&&(o?.name??n.tagName.toLowerCase(),void 0),p=()=>{}}u=d=>{let y=o?.name??n.tagName.toLowerCase(),E=ae?{}:Te(y,n,()=>u(d)),S=I(d,a,!1);if(b("errorBoundary"))try{p({state:S,refs:m,slots:c,self:n,detail:o,makeComponent:(h,_)=>F(h,r,_?.detail),helpers:E}),q(n,{state:S,detail:o,self:n}),g(),te(n)}catch(h){let _=h,M={component:y,element:n,error:_,state:i,refs:m,slots:c,timestamp:Date.now(),rerender:()=>u(d),stack:_.stack??""};b("console")?void 0:Me(y,_)}else p({state:S,refs:m,slots:c,self:n,detail:o,makeComponent:(h,_)=>F(h,r,_?.detail),helpers:E}),q(n,{state:S,detail:o,self:n}),g()},n.__boreDOMDetail=o,n.__boreDOMRerender=()=>u(i),u(l)};return t[v]=!0,t}export{B as VERSION,se as boreDOM,We as clearGlobals,Et as component,Se as getDebugConfig,ht as html,En as inflictBoreDOM,b as isDebugEnabled,Ne as queryComponent,ee as registerComponent,P as setDebugConfig,z as webComponent};
